(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[46305],{85174:t=>{t.exports={content:"content-A343HTYW",titleWrapper:"titleWrapper-A343HTYW",title:"title-A343HTYW",subtitle:"subtitle-A343HTYW",text:"text-A343HTYW",icon:"icon-A343HTYW",group:"group-A343HTYW",groupIcon:"groupIcon-A343HTYW",beforeMarketOpen:"beforeMarketOpen-A343HTYW",afterMarketClose:"afterMarketClose-A343HTYW",groupTitle:"groupTitle-A343HTYW",groupRow:"groupRow-A343HTYW",groupCell:"groupCell-A343HTYW",link:"link-A343HTYW",mob:"mob-A343HTYW",mini:"mini-A343HTYW"}},10685:(t,e,s)=>{"use strict";s.d(e,{DialogRenderer:()=>o});var i=s(62325),r=s.n(i);class o{constructor(){this._container=document.createElement("div"),this._visibility=new(r())(!1)}visible(){return this._visibility.readonly()}_setVisibility(t){this._visibility.setValue(t)}}},27565:(t,e,s)=>{"use strict";s.d(e,{LollipopGroupIcons:()=>i,LollipopTooltipContentRow:()=>h});var i,r=s(59496),o=s(97754),a=s.n(o),n=s(83436),l=s(85174);function h(t){const{name:e,value:s,style:i,valueRightIcon:o}=t;return r.createElement("div",{key:e,className:l.groupRow,style:i},r.createElement("div",{className:l.groupCell},r.createElement("span",{className:l.text},e)),r.createElement("div",{className:l.groupCell},r.createElement("span",{className:l.text},s),o&&r.createElement(n.Icon,{icon:o.iconContent,className:a()(l.groupIcon,o.iconClass,"apply-common-tooltip"),title:o.tooltipText})))}!function(t){t[t.BeforeMarketOpen=l.beforeMarketOpen]="BeforeMarketOpen",t[t.AfterMarketClose=l.afterMarketClose]="AfterMarketClose"}(i||(i={}))},40448:(t,e,s)=>{"use strict";s.d(e,{dateFormatProperty:()=>n,restoreDateFormatSettingsValue:()=>l});var i=s(62802),r=s(60949),o=s(30318);function a(){return i.getValue("date_format",(0,o.defaultDateFormat)())}const n=(0,r.createPrimitiveProperty)(a());function l(){n.setValue((0,o.defaultDateFormat)()),i.remove("date_format")}i.onSync.subscribe(null,()=>n.setValue(a())),n.listeners().subscribe(null,()=>i.setValue("date_format",n.value()))},10637:(t,e,s)=>{"use strict";s.r(e),s.d(e,{DividendsPaneView:()=>yt,EarningsPaneView:()=>nt,SplitsPaneView:()=>dt});var i=s(35357),r=s(88537),o=s(86441),a=s(91055),n=s(87236),l=s(27565),h=s(43498),u=s(46511),d=s(70617),c=s(21386),p=s(8214),_=s(65513),y=s(91419),m=s(88427),v=s(73044),S=s(73444),g=s(18718),f=s(93987),b=s(4122),w=s(40448),x=s(45185),P=s(20422),I=s(72461);class C extends P.LollipopRenderer{_drawLollipop(t,e,s){const i=s.pixelRatio,r=this._data.style;t.save(),t.translate(e.x-r.lollipop.width*i/2,e.y-r.lollipop.height*i/2),t.scale(i,i);const o=this._createPaths();r.lollipop.fillCircle&&r.lollipop.backgroundColor&&(t.fillStyle=r.lollipop.backgroundColor,t.fill(o.fillPath)),t.strokeStyle=r.lollipop.strokeStyle,t.lineWidth=Math.round(r.lollipop.lineWidth*i)/i,(0,I.setLineStyle)(t,x.LINESTYLE_SOLID),r.lollipop.fillCircle&&r.lollipop.fillStyle&&(t.fillStyle=r.lollipop.fillStyle,t.fill(o.strokePath)),t.stroke(o.strokePath),t.restore()}_createPaths(){let t,e;switch(this._data.style.type){case"Positive":
t=new Path2D("M8.961.92a3 3 0 0 1 3.078 0l7.5 4.48A3 3 0 0 1 21 7.975V20a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V7.975A3 3 0 0 1 1.461 5.4l7.5-4.48z"),e=new Path2D("M9.867 2.742c.39-.23.875-.23 1.266 0l7.5 4.406c.382.225.617.635.617 1.078V20c0 .69-.56 1.25-1.25 1.25H3c-.69 0-1.25-.56-1.25-1.25V8.226c0-.443.235-.853.617-1.078l7.5-4.406z");break;case"Negative":t=new Path2D("M8.961 22.08a3 3 0 0 0 3.078 0l7.5-4.48A3 3 0 0 0 21 15.025V3a3 3 0 0 0-3-3H3a3 3 0 0 0-3 3v12.025A3 3 0 0 0 1.461 17.6l7.5 4.48z"),e=new Path2D("M9.866 20.257c.391.23.877.23 1.268 0l7.5-4.414a1.25 1.25 0 0 0 .616-1.078V3c0-.69-.56-1.25-1.25-1.25H3c-.69 0-1.25.56-1.25 1.25v11.765c0 .443.234.853.616 1.078l7.5 4.414z");break;default:t=new Path2D("M3 0h15c1.662 0 3 1.338 3 3v15c0 1.662-1.338 3-3 3H3c-1.662 0-3-1.338-3-3V3c0-1.662 1.338-3 3-3z"),e=new Path2D("M3 1.75h15c.693 0 1.25.557 1.25 1.25v15c0 .693-.557 1.25-1.25 1.25H3c-.692 0-1.25-.558-1.25-1.25V3c0-.692.558-1.25 1.25-1.25z")}return{fillPath:t,strokePath:e}}}var D=s(32070),T=s(13652),V=s(40204),L=s(40615),R=s(71829),k=s(72680),M=s(13219),A=s(75327),E=s(20477),F=s(59925),N=s(9598),O=s(26091);const H=(0,n.t)("Earnings & Revenue"),B=(0,n.t)("Earnings"),z=(0,n.t)("Standardized"),W=(0,n.t)("Reported"),$=(0,n.t)("Estimate"),U=(0,n.t)("Surprise"),Y=(0,n.t)("Split"),G=(0,n.t)("Dividends"),q=(0,n.t)("Net"),j=(0,n.t)("Gross"),X=(0,n.t)("Date"),Q=(0,n.t)("Period Ending"),Z=(0,n.t)("Payment Date"),J=(0,n.t)("Revenue"),K=(0,n.t)("Before market open"),tt=(0,n.t)("After market close");class et extends V.LollipopPaneView{constructor(){super(...arguments),this._hideLollipops=!1,this._stackStudies=[]}addLollipop(t,e,s,i,a,n,l){const h=n[0],u=this._model.mainSeries().symbolInfo();if(!u)return;const d=u.name;let c=null;const p=this._source.metaInfo().id+"_"+h+"_"+d,_=this._lollipops[p],y=void 0!==_?_.itemIndex:this._lollipopsCounter++,m=this._model.lastHittestData(),v=p===this.getLastClickedLollipopId(),S=this._model.hoveredSource()===this._source&&null!==m&&m.activeItem===y;if(S||v){const t=e.valueAt(a);if(null!==t){const e=t[3],s=(0,r.ensureNotNull)(this._model.mainSeries().firstValue());c=i.priceToCoordinate(e,s)}}this._lollipops[p]={id:p,itemIndex:y,visible:!0,basePoint:new o.Point(s.indexToCoordinate(a),t),hovered:S,active:v,barY:c,stack:l,...this.extraData(n)}}renderer(t,e){return this._invalidated&&(this._updateImpl(e,t),this._invalidated=!1),this._hideLollipops?null:this._renderer}_updateImpl(t,e){this._setStackStudies();const s=this._source.data(),i=this._model.timeScale(),o=i.visibleBarsStrictRange(),a=this._model.mainSeries().bars(),n=this._source.priceScale(),l=this._model.mainSeries().firstBar();if(!n||n.isEmpty()||i.isEmpty()||!l||!s||null===o)return;if(i.barSpacing()/23<2/3&&v.Interval.parse(this._model.mainSeries().interval()).inMilliseconds()>=432e6)return this._hideLollipops=!0,void this.clearLastClicked();this._hideLollipops=!1;for(const t in this._lollipops)this._lollipops.hasOwnProperty(t)&&((0,r.ensureDefined)(this._lollipops[t]).visible=!1);const h=this._getY(),u=o.firstBar(),d=o.lastBar()
;s.range(u,d).each((t,e)=>{let s=0;for(let e=0;e<this._stackStudies.length;++e)this._stackStudies[e].data().contains(t)&&++s;return t>u&&t<d&&this.addLollipop(h,a,i,n,t,e,s),!1}),this.afterUpdate(h,a,i,n),this._createRenderers(t,e)}_formatDate(t,e){let s,i=!0;if(i=T.Version.parse(this._source.metaInfo().version).isLessOrEqual(new T.Version(137,0)),i){let e="Etc/UTC";const i=this._model.mainSeries();if(!i.isDWM()&&(e=this._model.properties().childs().timezone.value(),"exchange"===e)){const t=i.symbolInfo();e=t&&t.timezone||""}const r=(0,f.get_timezone)(e);s=(0,f.utc_to_cal)(r,t)}else s=new Date(t);return(e?"≈ ":"")+new b.DateFormatter(w.dateFormatProperty.value()).format(s)}_setStackStudies(){if(this._stackStudies=[],!(this._source instanceof R.study_ESD$TV_EARNINGS))for(const t of this._model.dataSources())(t instanceof R.study_ESD$TV_EARNINGS||t instanceof R.study_ESD$TV_SPLITS&&this._source instanceof R.study_ESD$TV_DIVIDENDS)&&this._stackStudies.push(t)}_getMoreFinancialsLink(){var t,e;return{text:(0,n.t)("More {symbol} financials",{replace:{symbol:null!==(e=null===(t=this._model.mainSeries().symbolInfo())||void 0===t?void 0:t.name)&&void 0!==e?e:""}}),onClick:()=>(0,L.showFinancialsDialog)({initialTabId:"income statements"})}}}const st={positive:a.colorsPalette["color-minty-green-600"],negative:a.colorsPalette["color-ripe-red-600"],future:a.colorsPalette["color-grapes-purple-a400"],unknown:a.colorsPalette["color-cold-gray-350"]},it={positive:a.colorsPalette["color-minty-green-500"],negative:a.colorsPalette["color-ripe-red-500"],future:a.colorsPalette["color-grapes-purple-a200"],unknown:a.colorsPalette["color-cold-gray-700"]};function rt(t){return t?st:it}const ot=new _.PercentageFormatter,at=new y.VolumeFormatter;class nt extends et{constructor(t,e,s){super(t,e,s)}styles(t){return t?{positive:a.colorsPalette["color-minty-green-600"],negative:a.colorsPalette["color-ripe-red-600"],future:a.colorsPalette["color-grapes-purple-a400"],unknown:a.colorsPalette["color-cold-gray-350"]}:{positive:a.colorsPalette["color-minty-green-500"],negative:a.colorsPalette["color-ripe-red-500"],future:a.colorsPalette["color-grapes-purple-a200"],unknown:a.colorsPalette["color-cold-gray-700"]}}extraData(t){const e=t[8],s=14===e,i=t[1],r=t[2],o=t[3],a=t[4],n=s?null:t[5],l=null!=n&&null!=r?n-r:null,h=t[6],u=s?null:t[7];let d;return null!=e?e<20?d="Future":null!==l&&(d=l<0?"Negative":"Positive"):null!==l?d=l<0?"Negative":"Positive":a>Date.now()&&(d="Future"),{standardized:i,reported:n,estimate:r,revenueValue:u,revenueEstimate:h,period:o,date:a,type:d,timeType:null!=e?e:void 0}}afterUpdate(t,e,s,i){const r=this._source.getEstimate();if(r){const o=r.value.slice();o[4]*=1e3,this.addLollipop(t,e,s,i,r.index,o)}}createTooltipContent(t){const e=t.standardized,s=null!=e,o=t.reported,a=null!=o,n=t.estimate,u=null!=n,d=a&&u?o-n:null;let c=t.revenueEstimate,p=!1;null!=c&&(p=!0,c*=1e6);let _=t.revenueValue,y=!1;null!=_&&(y=!0,_*=1e6);const m=y&&p?_-c:null,v=rt(this._model.isDark());let S,g,f,b,w;switch(t.type){case"Future":g=v.future,S=A;break
;case"Negative":g=v.negative,S=M;break;case"Positive":g=v.positive,S=k;break;default:g=v.unknown,S=A}switch(t.timeType){case 12:case 22:f=O,b=l.LollipopGroupIcons.AfterMarketClose,w=tt;break;case 11:case 21:f=N,b=l.LollipopGroupIcons.BeforeMarketOpen,w=K}const x=10===t.timeType||14===t.timeType,P={name:X,value:this._formatDate(t.date,x)};f&&(P.valueRightIcon={iconContent:f,iconClass:b,tooltipText:w});const I=[P];t.period&&I.push({name:Q,value:i.unix(t.period).format("MMM 'YY")});const C={title:y||p?H:B,subTitle:I,tooltipIcon:S,style:{color:g},content:[],anchor:this._getMoreFinancialsLink()},T={title:B,content:[]};if(s&&T.content.push({name:z,value:(0,D.roundToFirstValuable)(e)}),a&&T.content.push({name:W,value:(0,D.roundToFirstValuable)(o)}),u&&T.content.push({name:$,value:(0,D.roundToFirstValuable)(n)}),null!==d){const t=100*Math.abs(d/n);let e=(0,D.roundToFirstValuable)(d);isFinite(t)&&(e+=" ("+ot.format(t)+")"),T.content.push({name:U,value:(0,h.forceLTRStr)(e),style:{fontWeight:"bold",color:g}})}if((0,r.ensureDefined)(C.content).push(T),y||p){const t={title:J,content:[]};if(y&&t.content.push({name:W,value:at.format(_)}),p&&t.content.push({name:$,value:at.format(c)}),null!==m){const e=100*Math.abs(m/c);let s=at.format(m);isFinite(e)&&(s+=" ("+ot.format(e)+")"),t.content.push({name:U,value:(0,h.forceLTRStr)(s),style:{fontWeight:"bold",color:m>=0?v.positive:v.negative}})}(0,r.ensureDefined)(C.content).push(t)}return C}showBarLine(){return!this._model.mainSeries().properties().childs().esdShowBreaks.value()}renderer(t,e){const s=super.renderer(t,e);if(null===s)return null;if(this._model.mainSeries().properties().childs().esdShowBreaks.value())for(const t in this._lollipops)if(this._lollipops.hasOwnProperty(t)){const e=(0,r.ensureDefined)(this._lollipops[t]);if(e.visible){const t=this.getStyle(e),{strokeStyle:i,lineStyle:r,lineWidth:o}=t.barLine,a={color:i,linestyle:r,linewidth:o,x:e.basePoint.x,top:0,bottom:e.basePoint.y-t.lollipop.bottom-t.lollipop.height},n=new S.VerticalLineRenderer;n.setData(a),s.insert(n,0)}}return s}getStyle(t){if(void 0===t.type)return super.getStyle(t);const e=t.active?"active":t.hovered?"hovered":"default";let s=e;t.stack&&(s+="_stack:"+t.stack);let i=this._getStyleObject(t.type,s);if(null!==i)return i;if(this._stylesCache||(this._stylesCache={}),!this._stylesCache[s]){i=this._getStyleObject(t.type,e);const r=(0,d.clone)(i);r&&(t.stack&&(r.lollipop.incHeight=25*t.stack),this._stylesCache[s]=r)}return this._stylesCache[s]}_createRendererForLollipop(t,e){return new C(t,new g.HitTestResult(g.HitTestResult.CUSTOM,e),this._textWidthCache)}_recreateStyles(t){const e=t.isDark(),s=rt(e),i=s.unknown,r={barLine:{lineStyle:x.LINESTYLE_DASHED,lineWidth:1,strokeStyle:i},lollipop:{width:21,height:21,bottom:2,lineWidth:1.5,importance:"earnings",strokeStyle:i,backgroundColor:e?a.colorsPalette["color-cold-gray-900"]:a.colorsPalette["color-white"],fillCircle:!0,text:{label:"E",strokeStyle:i,font:(0,p.makeFont)(12,m.CHART_FONT_FAMILY,"bold")}}},o={lollipop:{fillStyle:(0,c.generateColor)(i,85)}},n={lollipop:{
fillStyle:i,text:{strokeStyle:a.colorsPalette["color-cold-gray-50"]}}};this.defaultStyle=(0,u.deepCopy)(r),this.hoveredStyle=(0,d.merge)((0,u.deepCopy)(r),o),this.activeStyle=(0,d.merge)((0,u.deepCopy)(r),n);const l=(t,e)=>{const s=(0,u.deepCopy)(r);return s.barLine.strokeStyle=t,s.lollipop.strokeStyle=t,s.lollipop.text.strokeStyle=t,s.type=e,o.lollipop.fillStyle=(0,c.generateColor)(t,85),n.lollipop.fillStyle=t,{default:s,hovered:(0,d.merge)((0,u.deepCopy)(s),o),active:(0,d.merge)((0,u.deepCopy)(s),n)}};n.lollipop.text.strokeStyle=a.colorsPalette["color-grapes-purple-50"];const h=l(s.future,"Future");r.lollipop.height=23,r.lollipop.text.deltaY=1,n.lollipop.text.strokeStyle=a.colorsPalette["color-minty-green-50"];const _=l(s.positive,"Positive");r.lollipop.bottom=.5,r.lollipop.text.deltaY=-.5,n.lollipop.text.strokeStyle=a.colorsPalette["color-ripe-red-50"];const y=l(s.negative,"Negative");this._earningTypeStyles={Future:h,Positive:_,Negative:y},this._stylesCache=null}_getStyleObject(t,e){const s=this._earningTypeStyles[t];switch(e){case"default":return s.default;case"hovered":return s.hovered;case"active":return s.active}return null}}const lt=a.colorsPalette["color-tan-orange-600"],ht=a.colorsPalette["color-tan-orange-500"];function ut(t){return t?lt:ht}class dt extends et{extraData(t){const e=t[1];return{numerator:t[2],denominator:e,date:t[3]}}createTooltipContent(t){let e=Y;return(0,d.isNumber)(t.numerator)&&(0,d.isNumber)(t.denominator)&&(e+=": "+t.numerator+"/"+t.denominator),{title:e,subTitle:this._formatDate(t.date),tooltipIcon:E,style:{color:ut(this._model.isDark())},anchor:this._getMoreFinancialsLink()}}_recreateStyles(t){const e=t.isDark(),s=ut(e),i={barLine:{lineStyle:x.LINESTYLE_DASHED,lineWidth:1,strokeStyle:s},lollipop:{width:23,height:23,bottom:1,lineWidth:1.5,importance:"splits",strokeStyle:s,backgroundColor:e?a.colorsPalette["color-cold-gray-900"]:a.colorsPalette["color-white"],fillCircle:!0,text:{label:"S",strokeStyle:s,font:(0,p.makeFont)(12,m.CHART_FONT_FAMILY,"bold")}}},r={lollipop:{fillStyle:(0,c.generateColor)(s,85)}},o={lollipop:{fillStyle:s,text:{strokeStyle:a.colorsPalette["color-tan-orange-50"]}}};this.defaultStyle=i,this.hoveredStyle=(0,d.merge)((0,u.deepCopy)(i),r),this.activeStyle=(0,d.merge)((0,u.deepCopy)(i),o),this._stylesCache=null}}const ct=a.colorsPalette["color-tv-blue-600"],pt=a.colorsPalette["color-tv-blue-500"];function _t(t){return t?ct:pt}class yt extends et{extraData(t){return{grossDividends:t[1],netDividends:t[3],date:t[2],paymentDate:t[4]}}createTooltipContent(t){const e=[{name:X,value:this._formatDate(t.date)}],s=+t.netDividends;isFinite(s)&&0!==s&&e.push({name:q,value:(0,D.roundToFirstValuable)(s)});const i=+t.grossDividends;isFinite(i)&&e.push({name:j,value:(0,D.roundToFirstValuable)(i)});const r=+t.paymentDate;return isFinite(r)&&e.push({name:Z,value:this._formatDate(r)}),{title:G,subTitle:e,tooltipIcon:F,style:{color:_t(this._model.isDark())},anchor:this._getMoreFinancialsLink()}}_recreateStyles(t){const e=t.isDark(),s=_t(e),i={barLine:{lineStyle:x.LINESTYLE_DASHED,
lineWidth:1,strokeStyle:s},lollipop:{width:23,height:23,bottom:1,lineWidth:1.5,importance:"dividends",strokeStyle:s,backgroundColor:e?a.colorsPalette["color-cold-gray-900"]:a.colorsPalette["color-white"],fillCircle:!0,text:{label:"D",strokeStyle:s,font:(0,p.makeFont)(12,m.CHART_FONT_FAMILY,"bold")}}},r={lollipop:{fillStyle:(0,c.generateColor)(s,85)}},o={lollipop:{fillStyle:s,text:{strokeStyle:a.colorsPalette["color-tv-blue-50"]}}};this.defaultStyle=i,this.hoveredStyle=(0,d.merge)((0,u.deepCopy)(i),r),this.activeStyle=(0,d.merge)((0,u.deepCopy)(i),o),this._stylesCache=null}}},81269:(t,e,s)=>{"use strict";s.d(e,{customFormatters:()=>i});const i={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null}},30318:(t,e,s)=>{"use strict";s.d(e,{monthFormatFunction:()=>p,dateFormatFunctions:()=>_,availableDateFormats:()=>y,defaultDateFormat:()=>m});var i=s(87236),r=s(89765);const o={1:()=>(0,i.t)("Jan"),2:()=>(0,i.t)("Feb"),3:()=>(0,i.t)("Mar"),4:()=>(0,i.t)("Apr"),5:()=>(0,i.t)("May",{context:"short"}),6:()=>(0,i.t)("Jun"),7:()=>(0,i.t)("Jul"),8:()=>(0,i.t)("Aug"),9:()=>(0,i.t)("Sep"),10:()=>(0,i.t)("Oct"),11:()=>(0,i.t)("Nov"),12:()=>(0,i.t)("Dec")},a=(t,e)=>(e?t.getMonth():t.getUTCMonth())+1,n=(t,e)=>e?t.getFullYear():t.getUTCFullYear(),l=(t,e)=>(0,r.numberToStringWithLeadingZero)(((t,e)=>e?t.getDate():t.getUTCDate())(t,e),2),h=(t,e)=>o[a(t,e)](),u=(t,e)=>(0,r.numberToStringWithLeadingZero)(a(t,e),2),d=(t,e)=>(0,r.numberToStringWithLeadingZero)(n(t,e)%100,2),c=(t,e)=>(0,r.numberToStringWithLeadingZero)(n(t,e),4),p=(t,e)=>h(t,e),_={"dd MMM 'yy":(t,e)=>`${l(t,e)} ${h(t,e)} '${d(t,e)}`,"MMM dd, yyyy":(t,e)=>`${h(t,e)} ${l(t,e)}, ${c(t,e)}`,"MMM dd":(t,e)=>`${h(t,e)} ${l(t,e)}`,"yyyy-MM-dd":(t,e)=>`${c(t,e)}-${u(t,e)}-${l(t,e)}`,"yy-MM-dd":(t,e)=>`${d(t,e)}-${u(t,e)}-${l(t,e)}`,"yy/MM/dd":(t,e)=>`${d(t,e)}/${u(t,e)}/${l(t,e)}`,"yyyy/MM/dd":(t,e)=>`${c(t,e)}/${u(t,e)}/${l(t,e)}`,"dd-MM-yyyy":(t,e)=>`${l(t,e)}-${u(t,e)}-${c(t,e)}`,"dd-MM-yy":(t,e)=>`${l(t,e)}-${u(t,e)}-${d(t,e)}`,"dd/MM/yy":(t,e)=>`${l(t,e)}/${u(t,e)}/${d(t,e)}`,"dd/MM/yyyy":(t,e)=>`${l(t,e)}/${u(t,e)}/${c(t,e)}`,"MM/dd/yy":(t,e)=>`${u(t,e)}/${l(t,e)}/${d(t,e)}`,"MM/dd/yyyy":(t,e)=>`${u(t,e)}/${l(t,e)}/${c(t,e)}`},y=Object.keys(_),m=()=>-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"},4122:(t,e,s)=>{"use strict";s.d(e,{DateFormatter:()=>o});var i=s(81269),r=s(30318);class o{constructor(t="yyyy-MM-dd"){this._dateFormatFunc=r.dateFormatFunctions[t]}format(t){return i.customFormatters&&i.customFormatters.dateFormatter?i.customFormatters.dateFormatter.format(t):this._dateFormatFunc(t,!1)}formatLocal(t){return i.customFormatters.dateFormatter?i.customFormatters.dateFormatter.formatLocal?i.customFormatters.dateFormatter.formatLocal(t):i.customFormatters.dateFormatter.format(t):this._dateFormatFunc(t,!0)}}},32070:(t,e,s)=>{"use strict";function i(t){let e="";t<0&&(e="−",t=-t);const s=t.toString(),i=s.split(".")[1];let r=2;if(i){const t=i.match(/^([0]+)/);t&&(r=t[1].length+1)}return e+parseFloat(s).toFixed(r)}s.d(e,{
roundToFirstValuable:()=>i})},40204:(t,e,s)=>{"use strict";s.d(e,{LollipopPaneView:()=>c});var i=s(88537),r=s(86441),o=s(70617),a=s(17611),n=s(5222),l=s(24112),h=s(73444),u=s(20422),d=s(18718);class c{constructor(t,e,s){this._invalidated=!1,this._renderer=new a.CompositeRenderer,this._textWidthCache=new n.TextWidthCache,this._stylesCache=null,this._lollipops={},this._lollipopsCounter=0,this._lastClickedId=null,this.onPaneBgChange=()=>{this._recreateStyles(this._model)},this._lastClickedId=null,this._model=t,this._source=e,this._hitTestHandler=s,this._recreateStyles(t),t.backgroundColor().subscribe(this.onPaneBgChange),t.mainSeries().onSymbolIntervalChanged().subscribe(this,this._onSymbolOrIntervalChanged)}destroy(){this._model.backgroundColor().unsubscribe(this.onPaneBgChange),this._model.mainSeries().onSymbolIntervalChanged().unsubscribeAll(this)}onClickOutside(t){var e;if(null===this._lastClickedId||!t)return void this.clearLastClicked();let s=null;if(function(t){return void 0!==t.touches}(t)){if(1!==t.touches.length)return;{const e=(0,i.ensureNotNull)(t.target).getBoundingClientRect(),o=t.touches[0];s=new r.Point(o.clientX-e.left,o.clientY-e.top)}}else s=new r.Point(t.offsetX,t.offsetY);const o=this._renderer.hitTest(s,{physicalHeight:0,physicalWidth:0,pixelRatio:1,cssHeight:0,cssWidth:0});null!==o&&(null===(e=o.data())||void 0===e?void 0:e.activeItem)===(0,i.ensureDefined)(this._lollipops[this._lastClickedId]).itemIndex||this.clearLastClicked()}clearLastClicked(){const t=null!==this._lastClickedId&&this._lollipops[this._lastClickedId]||null;null!==t&&(t.active=!1),this._lastClickedId=null}getLastClickedLollipopId(){return this._lastClickedId}update(){this._invalidated=!0}afterUpdate(t,e,s,i){}showBarLine(){return!0}getStyle(t){const e=t.active?"active":t.hovered?"hovered":"default";let s=e;if(t.stack&&(s+="_stack:"+t.stack),"active"===s)return this.activeStyle;if("hovered"===s)return this.hoveredStyle;if("default"===s)return this.defaultStyle;if(this._stylesCache||(this._stylesCache={}),!this._stylesCache[s]){const i=(0,o.clone)("active"===e?this.activeStyle:"hovered"===e?this.hoveredStyle:this.defaultStyle);t.stack&&(i.lollipop.incHeight=25*t.stack),this._stylesCache[s]=i}return this._stylesCache[s]}hasTooltip(t){return!0}_getY(){let t=0;const e=this._model.panes();for(let s=e.length;s--;){const i=e[s];i.containsMainSeries()&&(t+=i.height())}return t}_createRenderers(t,e){this._renderer.clear();const s=new l.Size(t,e);for(const t in this._lollipops)if(this._lollipops.hasOwnProperty(t)){const e=(0,i.ensureDefined)(this._lollipops[t]);if(e.visible){const t=this.getStyle(e),i={id:e.id,centerPoint:new r.Point(e.basePoint.x,e.basePoint.y-t.lollipop.bottom-t.lollipop.height/2-(t.lollipop.incHeight||0)),style:t},o={activeItem:e.itemIndex,clickHandler:this._lollipopMouseClickHandler.bind(this,i,s),tapHandler:this._lollipopMouseClickHandler.bind(this,i,s)};if(this._renderer.append(this._createRendererForLollipop(i,o)),(e.hovered||e.active)&&this.hasTooltip(e)&&e.barY&&this.showBarLine()){const s={
color:t.barLine.strokeStyle,linestyle:t.barLine.lineStyle,linewidth:t.barLine.lineWidth,x:e.basePoint.x,top:0,bottom:e.basePoint.y-t.lollipop.bottom-t.lollipop.height},i=new h.VerticalLineRenderer;i.setData(s),this._renderer.insert(i,0)}}}}_recreateStyles(t){this._stylesCache=null}_createRendererForLollipop(t,e){return new u.LollipopRenderer(t,new d.HitTestResult(d.HitTestResult.CUSTOM,e),this._textWidthCache)}_lollipopMouseClickHandler(t,e,s){s.preventDefault();const o=t.id;if(this._lastClickedId=this._lastClickedId===o?null:o,null===this._lastClickedId)return;const a={target:s.target,targetSize:e,point:new r.Point(t.centerPoint.x,t.centerPoint.y-t.style.lollipop.height/2-8),marginTop:15};this._hitTestHandler(a,()=>{const t=(0,i.ensureDefined)(this._lollipops[o]),e=this.createTooltipContent(t);return e?[e]:null})}_onSymbolOrIntervalChanged(){this._lollipops={},this._lollipopsCounter=0,this._renderer.clear(),this.clearLastClicked()}}},59081:(t,e,s)=>{"use strict";function i(t,e){return t.pixelRatio===e.pixelRatio}s.d(e,{areEqualPaneRenderParams:()=>i})},20422:(t,e,s)=>{"use strict";s.d(e,{LollipopRenderer:()=>u});var i=s(34026),r=s(86441),o=s(72461),a=s(45185),n=s(64149),l=s(24112),h=s(1132);class u{constructor(t,e,s){this._data=t,this._hittest=e,this._textWidthCache=s}draw(t,e){const s=e.pixelRatio,i=this._data.centerPoint,o=Math.round(i.x*s),a=Math.round(i.y*s),n=Math.max(1,Math.floor(s))%2/2,l=new r.Point(o+n,a-n);this._drawLollipop(t,l,e),this._drawLabel(t,l,e.pixelRatio)}hitTest(t,e){const s=(0,h.interactionTolerance)().esd,o=this._data.centerPoint.y-this._data.style.lollipop.height/2-s,a=this._data.centerPoint.x-this._data.style.lollipop.width/2-s,n=(0,r.box)(new r.Point(a,o),new r.Point(a+this._data.style.lollipop.width+2*s,o+this._data.style.lollipop.height+2*s));return(0,i.pointInBox)(t,n)?this._hittest:null}_drawLollipop(t,e,s){const i=this._data.style,r=s.pixelRatio,l=Math.max(1,Math.floor(r));let h=Math.round(i.lollipop.width*r);h%2!=l%2&&(h+=1);const u=h/2;i.lollipop.fillCircle&&i.lollipop.backgroundColor&&(t.fillStyle=i.lollipop.backgroundColor,(0,n.createCircle)(t,e.x,e.y,u),t.fill());const d=Math.round(i.lollipop.lineWidth*r);t.strokeStyle=i.lollipop.strokeStyle,t.lineWidth=d,(0,o.setLineStyle)(t,a.LINESTYLE_SOLID);const c=u-Math.round(1*r+d/2);(0,n.createCircle)(t,e.x,e.y,c),i.lollipop.fillCircle&&i.lollipop.fillStyle&&(t.fillStyle=i.lollipop.fillStyle,t.fill()),t.stroke()}_drawLabel(t,e,s){const i=this._data.style.lollipop.text,r=i.label;t.textAlign="center",t.textBaseline="middle",t.fillStyle=i.strokeStyle,t.font=i.font;const o=this._textWidthCache.yMidCorrection(t,r);t.translate(e.x,e.y+((i.deltaY||0)+o)*s),(0,l.drawScaled)(t,s,()=>{t.fillText(r,0,0)})}}},15653:(t,e,s)=>{"use strict";s.d(e,{calculateLabelPosition:()=>p,wordWrap:()=>m,TextRenderer:()=>T});var i=s(86441),r=s(88537),o=s(34026),a=s(43498),n=s(18718),l=s(64149),h=s(72461),u=s(70617),d=s(24112),c=s(45185);function p(t,e,s,r,o){const a=.5*(e.x+s.x);let n=s.y;return e.y>s.y?(n-=t.height/2+r.y,n=Math.max(t.height/2,n)):(n+=t.height/2+r.y,
n=Math.min(o-t.height/2,n)),new i.Point(a,n)}let _;function y(){const t=document.createElement("canvas");t.width=0,t.height=0,_=(0,r.ensureNotNull)(t.getContext("2d"))}function m(t,e,s){_||y(),s=(0,u.isString)(s)?parseInt(s):s,t+="";const i=!(0,u.isNumber)(s)||!isFinite(s)||s<=0?t.split(/\r\n|\r|\n|$/):t.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/);if(i[i.length-1]||i.pop(),!(0,u.isNumber)(s)||!isFinite(s)||s<=0)return i;_.font=e;const r=[];for(let t=0;t<i.length;t++){const e=i[t],o=_.measureText(e).width;if(o<=s){r.push(e);continue}const a=e.split(/([-)\]},.!?:;])|(\s+)/);let n=0;for(;a.length;){let t=~~(s/o*(a.length+2)/3);if(t<=0||_.measureText(a.slice(0,3*t-1).join("")).width<=s)for(;_.measureText(a.slice(0,3*(t+1)-1).join("")).width<=s;)t++;else for(;t>0&&_.measureText(a.slice(0,3*--t-1).join("")).width>s;);if(t>0)r.push(a.slice(0,3*t-1).join("")),a.splice(0,3*t);else{const t=a[0]+(a[1]||"");if(n=1===n?1:~~(s/_.measureText(t).width*t.length),_.measureText(t.substring(0,n)).width<=s)for(;_.measureText(t.substring(0,n+1)).width<=s;)n++;else for(;n>1&&_.measureText(t.substring(0,--n)).width>s;);n<1&&(n=1),r.push(t.substring(0,n)),a[0]=t.substring(n),a[1]=""}if(_.measureText(a.join("")).width<=s){r.push(a.join(""));break}}}return r}function v(t,e,s){if(0===s)return t.clone();const r=(t.x-e.x)*Math.cos(s)-(t.y-e.y)*Math.sin(s)+e.x,o=(t.x-e.x)*Math.sin(s)+(t.y-e.y)*Math.cos(s)+e.y;return new i.Point(r,o)}function S(t,e){return e+2*x(t)+2*b(t)}function g(t,e){return I(t)*e+P(t)*(e-1)+2*w(t)+2*f(t)}function f(t){return void 0!==t.boxPaddingVert?t.boxPaddingVert*D(t):void 0!==t.boxPadding?t.boxPadding*D(t):I(t)/3}function b(t){return void 0!==t.boxPaddingHorz?t.boxPaddingHorz*D(t):void 0!==t.boxPadding?t.boxPadding*D(t):I(t)/3}function w(t){return(t.backgroundVertInflate||0)*D(t)}function x(t){return(t.backgroundHorzInflate||0)*D(t)}function P(t){return(t.padding||0)*D(t)}function I(t){return Math.ceil(C(t)*D(t))}function C(t){return t.fontsize||t.fontSize||30}function D(t){const e=Math.min(1,Math.max(.2,Math.min(t.scaleX||1,t.scaleY||1)));if(1===e)return e;const s=C(t);return Math.ceil(e*s)/s}class T{constructor(t,e){this._data=null,this._internalData=null,this._boxSize=null,this._polygonPoints=null,this._linesInfo=null,this._fontInfo=null,this._hittest=e||new n.HitTestResult(n.HitTestResult.MOVEPOINT,{areaName:n.AreaName.Text}),void 0!==t&&this.setData(t)}setData(t){t.horzTextAlign||(t.horzTextAlign=t.horzAlign),function(t,e){if(null===t||null===e)return null===t==(null===e);if(void 0===t.points!=(void 0===e.points))return!1;if(void 0!==t.points&&void 0!==e.points){if(t.points.length!==e.points.length)return!1;for(let r=0;r<t.points.length;++r)if(s=t.points[r],i=e.points[r],s.x!==i.x||s.y!==i.y)return!1}var s,i
;return t.text===e.text&&t.vertAlign===e.vertAlign&&t.horzAlign===e.horzAlign&&t.horzTextAlign===e.horzTextAlign&&t.font===e.font&&t.offsetX===e.offsetX&&t.offsetY===e.offsetY&&t.bold===e.bold&&t.italic===e.italic&&t.fontsize===e.fontsize&&t.fontSize===e.fontSize&&t.backgroundRoundRect===e.backgroundRoundRect&&t.forceTextAlign===e.forceTextAlign&&t.wordWrapWidth===e.wordWrapWidth&&t.forceCalculateMaxLineWidth===e.forceCalculateMaxLineWidth&&t.padding===e.padding&&t.scaleY===e.scaleY&&t.scaleX===e.scaleX&&t.highlightBorder===e.highlightBorder&&t.backgroundHorzInflate===e.backgroundHorzInflate&&t.backgroundVertInflate===e.backgroundVertInflate&&t.boxPadding===e.boxPadding&&t.boxPaddingVert===e.boxPaddingVert&&t.boxPaddingHorz===e.boxPaddingHorz&&t.angle===e.angle&&t.maxHeight===e.maxHeight&&(0,u.deepEquals)(t.boxShadow,e.boxShadow)[0]}(this._data,t)?this._data=t:(this._data=t,this._internalData=null,this._boxSize=null,this._polygonPoints=null,this._linesInfo=null,this._fontInfo=null)}hitTest(t){return null===this._data||void 0===this._data.points||0===this._data.points.length?null:(0,o.pointInPolygon)(t,this._getPolygonPoints())?this._hittest:null}doesIntersectWithBox(t){return null!==this._data&&void 0!==this._data.points&&0!==this._data.points.length&&(0,o.pointInBox)(this._data.points[0],t)}measure(){if(null===this._data)return{width:0,height:0};const t=this._getBoxSize();return{width:t.boxWidth,height:t.boxHeight}}rect(){if(null===this._data)return{x:0,y:0,width:0,height:0};const t=this._getInternalData();return{x:t.boxLeft,y:t.boxTop,width:t.boxWidth,height:t.boxHeight}}isOutOfScreen(t,e){if(null===this._data||void 0===this._data.points||0===this._data.points.length)return!0;const s=this._getInternalData();if(s.boxLeft+s.boxWidth<0||s.boxLeft>t){const s=(0,i.box)(new i.Point(0,0),new i.Point(t,e));return this._getPolygonPoints().every(t=>!(0,o.pointInBox)(t,s))}return!1}setPoints(t,e){(0,r.ensureNotNull)(this._data).points=t,this._hittest=e||new n.HitTestResult(n.HitTestResult.MOVEPOINT)}fontStyle(t){return null===this._data?"":this._getFontInfo().fontStyle}wordWrap(t,e,s){return m(t,s||this.fontStyle(),e)}draw(t,e){if(null===this._data||void 0===this._data.points||0===this._data.points.length)return;if(this.isOutOfScreen(e.cssWidth,e.cssHeight))return;const s=e.pixelRatio,i=this._getInternalData(),r=this._getRotationPoint().scaled(s);t.save(),t.translate(r.x,r.y),t.rotate(this._data.angle||0),t.translate(-r.x,-r.y);const o=this._getFontInfo().fontSize;t.textBaseline=i.textBaseLine,t.textAlign=i.textAlign,t.font=this.fontStyle();const{scaledLeft:a,scaledRight:n,scaledTop:u,scaledBottom:p}=function(t,e){const s=Math.round(t.boxLeft*e),i=Math.round(t.boxTop*e);return{scaledLeft:s,scaledRight:s+Math.round(t.boxWidth*e),scaledTop:i,scaledBottom:i+Math.round(t.boxHeight*e)}}(i,s);if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){const e=this._data.borderWidth||Math.max(o/12,1),i=Math.round(e*s),r=i/2;let d=!1;if(this._data.boxShadow){t.save()
;const{shadowColor:e,shadowBlur:s,shadowOffsetX:i=0,shadowOffsetY:r=0}=this._data.boxShadow;t.shadowColor=e,t.shadowBlur=s,t.shadowOffsetX=i,t.shadowOffsetY=r,d=!0}if(this._data.backgroundRoundRect)this._data.backgroundColor&&((0,l.drawRoundRect)(t,a,u,n-a,p-u,this._data.backgroundRoundRect*s),t.fillStyle=this._data.backgroundColor,t.fill(),d&&(t.restore(),d=!1)),this._data.borderColor&&((0,l.drawRoundRect)(t,a-r,u-r,n-a+i,p-u+i,this._data.backgroundRoundRect*s+i),t.strokeStyle=this._data.borderColor,t.lineWidth=i,t.stroke(),d&&(t.restore(),d=!1));else if(this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.fillRect(a,u,n-a,p-u),d&&(t.restore(),d=!1)),this._data.borderColor||this._data.highlightBorder){let e;this._data.borderColor?(t.strokeStyle=this._data.borderColor,e=i):(t.strokeStyle=this._data.color,(0,h.setLineStyle)(t,c.LINESTYLE_DASHED),e=Math.max(1,Math.floor(s))),t.lineWidth=e,t.beginPath(),t.moveTo(a-e/2,u-e/2),t.lineTo(a-e/2,p+e/2),t.lineTo(n+e/2,p+e/2),t.lineTo(n+e/2,u-e/2),t.lineTo(a-e/2,u-e/2),t.stroke(),d&&t.restore()}}t.fillStyle=this._data.color;const _=(a+Math.round(i.textStart*s))/s,y=.05*o;let m=(u+Math.round((i.textTop+y)*s))/s;const v=P(this._data),S=this._getLinesInfo();for(const e of S.lines)(0,d.drawScaled)(t,s,()=>t.fillText(e,_,m)),m+=o+v;t.restore()}_getLinesMaxWidth(t){if(_||y(),_.textBaseline="alphabetic",_.font=this.fontStyle(),null!==this._data&&this._data.wordWrapWidth&&!this._data.forceCalculateMaxLineWidth)return this._data.wordWrapWidth*D(this._data);let e=0;for(const s of t)e=Math.max(e,_.measureText(s).width);return e}_getInternalData(){if(null!==this._internalData)return this._internalData;const t=(0,r.ensureNotNull)(this._data),e=this._getBoxSize(),s=e.boxWidth,i=e.boxHeight,o=(0,r.ensureDefined)(t.points)[0];let n=o.y;switch(t.vertAlign){case"bottom":n-=i+t.offsetY;break;case"middle":n-=i/2;break;case"top":n+=t.offsetY}let l=o.x;const h=b(t),u=f(t),d=x(t)+h;let c;const p=n+(w(t)+u)+I(t)/2;let _;switch(t.horzAlign){case"left":l+=t.offsetX;break;case"center":l-=s/2;break;case"right":l-=s+t.offsetX}switch((0,r.ensureDefined)(t.horzTextAlign)){case"left":_="start",c=l+d,(0,a.isRtl)()&&(t.forceTextAlign?_="left":(c=l+s-d,_="right"));break;case"center":_="center",c=l+s/2;break;case"right":_="end",c=l+s-d,(0,a.isRtl)()&&t.forceTextAlign&&(_="right")}return this._internalData={boxLeft:l,boxTop:n,boxWidth:s,boxHeight:i,textStart:c-l,textTop:p-n,textAlign:_,textBaseLine:"middle"},this._internalData}_getLinesInfo(){if(null===this._linesInfo){const t=(0,r.ensureNotNull)(this._data);let e=this.wordWrap(t.text,t.wordWrapWidth);if(void 0!==t.maxHeight){const s=function(t){const e=(0,r.ensureDefined)(t.maxHeight),s=I(t),i=P(t);return Math.floor((e+i)/(s+i))}(t);e.length>s&&(e=e.slice(0,s))}this._linesInfo={linesMaxWidth:this._getLinesMaxWidth(e),lines:e}}return this._linesInfo}_getFontInfo(){if(null===this._fontInfo){const t=(0,r.ensureNotNull)(this._data),e=I(t),s=(t.bold?"bold ":"")+(t.italic?"italic ":"")+e+"px "+t.font;this._fontInfo={fontStyle:s,fontSize:e}}
return this._fontInfo}_getBoxSize(){if(null===this._boxSize){const t=this._getLinesInfo(),e=(0,r.ensureNotNull)(this._data);this._boxSize={boxWidth:S(e,t.linesMaxWidth),boxHeight:g(e,t.lines.length)}}return this._boxSize}_getPolygonPoints(){if(null!==this._polygonPoints)return this._polygonPoints;if(null===this._data)return[];const t=this._data.angle||0,{boxLeft:e,boxTop:s,boxWidth:r,boxHeight:o}=this._getInternalData(),a=this._getRotationPoint();return this._polygonPoints=[v(new i.Point(e,s),a,t),v(new i.Point(e+r,s),a,t),v(new i.Point(e+r,s+o),a,t),v(new i.Point(e,s+o),a,t)],this._polygonPoints}_getRotationPoint(){const{boxLeft:t,boxTop:e,boxWidth:s,boxHeight:o}=this._getInternalData(),{horzAlign:a,vertAlign:n}=(0,r.ensureNotNull)(this._data);let l,h;switch(a){case"center":l=t+s/2;break;case"left":l=t;break;case"right":l=t+s}switch(n){case"middle":h=e+o/2;break;case"top":h=e;break;case"bottom":h=e+o}return new i.Point(l,h)}}},21555:(t,e,s)=>{"use strict";s.d(e,{drawArrow:()=>d,TrendLineRenderer:()=>c});var i=s(88537),r=s(4652),o=s(63985),a=s(18718),n=s(72461),l=s(1132),h=s(64149);function u(t,e,s,i,r){e.save(),e.fillStyle="#000000",e.beginPath(),e.arc(t.x*r,t.y*r,s*r,0,2*Math.PI,!1),e.fill(),i.strokeWidth&&(e.lineWidth=i.strokeWidth,e.stroke()),e.restore()}function d(t,e,s,i,r,o=!1){if(e.subtract(t).length()<1)return;const a=(0,l.getArrowPoints)(t,e,i,o);for(let t=0;t<a.length;++t){const e=a[t][0],i=a[t][1];(0,n.drawLine)(s,e.x*r,e.y*r,i.x*r,i.y*r)}}class c{constructor(){this._data=null,this._hittest=new a.HitTestResult(a.HitTestResult.MOVEPOINT)}setData(t){this._data=t}setHitTest(t){this._hittest=t}draw(t,e){const s=this._data;if(null===s)return;if("points"in s&&s.points.length<2)return;const i=e.pixelRatio;t.lineCap="butt",t.strokeStyle=s.color,t.lineWidth=Math.max(1,Math.floor(s.linewidth*i)),(0,n.setLineStyle)(t,s.linestyle);const r=s.points[0],o=s.points[1];let a=[];s.overlayLineEndings?a=[r.clone(),o.clone()]:this._drawEnds(t,[r,o],s.linewidth,i);const l=this._extendAndClipLineSegment(r,o,e);null!==l&&s.linewidth>0&&(l[0].x===l[1].x?(0,h.drawVerticalLine)(t,Math.round(l[0].x*i),l[0].y*i,l[1].y*i):l[0].y===l[1].y?(0,h.drawHorizontalLine)(t,Math.round(l[0].y*i),l[0].x*i,l[1].x*i):(0,n.drawLine)(t,l[0].x*i,l[0].y*i,l[1].x*i,l[1].y*i)),s.overlayLineEndings&&this._drawEnds(t,a,s.linewidth,i)}hitTest(t,e){const s=this._data;if(null===s)return null;if("points"in s&&s.points.length<2)return null;const i=(0,l.interactionTolerance)().line,o=s.points[0],a=s.points[1],n=this._extendAndClipLineSegment(o,a,e);if(null!==n){if((0,r.distanceToSegment)(n[0],n[1],t).distance<=i)return this._hittest}return null}_extendAndClipLineSegment(t,e,s){const r=(0,i.ensureNotNull)(this._data);return(0,l.extendAndClipLineSegment)(t,e,s.cssWidth,s.cssHeight,r.extendleft,r.extendright)}_drawEnds(t,e,s,r){const a=e[0],n=e[1],l=(0,i.ensureNotNull)(this._data);switch(l.leftend){case o.LineEnd.Arrow:d(n,a,t,s,r);break;case o.LineEnd.Circle:u(a,t,s,(0,i.ensureDefined)(l.endstyle),r)}switch(l.rightend){case o.LineEnd.Arrow:d(a,n,t,s,r);break
;case o.LineEnd.Circle:u(n,t,s,(0,i.ensureDefined)(l.endstyle),r)}}}},73444:(t,e,s)=>{"use strict";s.d(e,{VerticalLineRenderer:()=>n});var i=s(18718),r=s(72461),o=s(64149),a=s(1132);class n{constructor(){this._data=null,this._hitTest=new i.HitTestResult(i.HitTestResult.MOVEPOINT)}setData(t){this._data=t}setHitTest(t){this._hitTest=t}hitTest(t){if(null===this._data||null===this._hitTest)return null;const e=(0,a.interactionTolerance)().line,s=Math.abs(t.x-this._data.x)<=e+this._data.linewidth/2,i=void 0===this._data.top||this._data.top-t.y<=e,r=void 0===this._data.bottom||t.y-this._data.bottom<=e;return s&&i&&r?this._hitTest:null}draw(t,e){if(null===this._data)return;if(this._data.linewidth<=0)return;if(this._data.x<-this._data.linewidth/2||this._data.x>e.cssWidth+this._data.linewidth/2)return;const s=e.pixelRatio;t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=Math.max(1,Math.floor(this._data.linewidth*s)),void 0!==this._data.linestyle&&(0,r.setLineStyle)(t,this._data.linestyle);const i=void 0!==this._data.top?Math.max(this._data.top,0):0,a=void 0!==this._data.bottom?Math.min(this._data.bottom,e.cssHeight):e.cssHeight,n=Math.round(this._data.x*s),l=Math.floor(i*s),h=Math.ceil(a*s);(0,o.drawVerticalLine)(t,n,l,h)}}},81886:(t,e,s)=>{"use strict";s.d(e,{financialPeriodToString:()=>o,financialPeriodToShortString:()=>a});var i=s(88537),r=s(87236);function o(t){switch(t){case"FQ":return(0,r.t)("Quarterly");case"FY":return(0,r.t)("Annual");case"TTM":return(0,r.t)("TTM")}(0,i.ensureNever)(t)}function a(t){switch(t){case"FQ":return(0,r.t)("FQ");case"FY":return(0,r.t)("FY");case"TTM":return(0,r.t)("TTM")}(0,i.ensureNever)(t)}},20681:(t,e,s)=>{"use strict";s.d(e,{Fundamental:()=>_});var i=s(87236),r=s(48874),o=s(81886),a=s(85339);class n extends a.StudyPriceAxisView{constructor(t,e){super(t,e),this._fundamental=t}_updatePaneRendererData(t){t.text="",this._showPaneLabel()&&(t.text=this._fundamental.labelTitle(),t.visible=!0)}}var l=s(67850);class h extends l.StudyPriceLineAxisView{constructor(t,e){super(t,e),this._model=t.model()}_isVisible(){return this._model.properties().childs().scalesProperties.childs().showFundamentalLastValue.value()&&this._study.properties().styles[this._plotname].trackPrice.value()}}var u=s(51620),d=s(6096);const c=(0,i.t)("This fundamental metric is not available for this symbol");class p extends u.StudyStatusProvider{sourceStatusText(){const t=this._source.status();return t.type===d.StudyStatusType.Error&&0===t.errorDescription.error.indexOf("resolve_error ")?c:super.sourceStatusText()}}class _ extends r.Study{labelTitle(){return this.title(!0)}createPriceAxisView(t){return new n(this,{plotIndex:t})}createPriceLineAxisView(t){return new h(this,t)}hasStateForAlert(){return!1}titleInParts(t,e,s,i){return[this._title(!!t)]}statusProvider(t){return new p(this,this._model.properties().childs().scalesProperties.childs().textColor)}_title(t){const e=this.metaInfo();let s;if(s=t?e.shortDescription:e.description,void 0!==e.financialPeriod){const r=t?(0,
o.financialPeriodToShortString)(e.financialPeriod):(0,o.financialPeriodToString)(e.financialPeriod);s=`${(0,i.t)(s,{context:"study"})} · ${r}`}const r=this._titleInputs(!0);return r.length>0&&(s=`${(0,i.t)(r[0],{context:"study"})} · ${s}`),s}_titleInputsOptions(t,e){return{...super._titleInputsOptions(t,e),skipOptionalEmptySymbolInputs:!0,allowedInputTypes:["symbol"]}}}},41139:(t,e,s)=>{"use strict";function i(t,e,s){let i=t[`${e}#${s}`]||null;return null===i&&(i=t[e]||null),null===i&&Object.keys(t).forEach(s=>{null===i&&s.startsWith(e+"#")&&(i=t[s]||null)}),i}s.d(e,{getObsoleteIdeaSymbolInfo:()=>i})},59251:(t,e,s)=>{"use strict";s.d(e,{NonSeriesStudy:()=>o});var i=s(88537),r=s(48874);class o extends r.Study{clearData(){this._customData=null,this._indexes=null}restoreData(t,e,s){super.restoreData(t),this._customData=e,this._indexes=s}state(t){const e=super.state(t);return t&&(e.nonSeriesData=this._customData,e.indexes=this._indexes),e}customData(){return this._customData}_setPaneViews(t){this._paneViews=t,this.model().lightUpdate()}_onDataUpdated(t,e,s){null!==e&&(e.indexes_replace?((0,i.assert)("nochange"!==s),this._indexes=s):(this._customData=e.data,"nochange"!==s&&(this._indexes=s))),super._onDataUpdated(t,e,s)}}},5075:(t,e,s)=>{"use strict";s.d(e,{OverlayLegendValuesProvider:()=>w});var i=s(49473),r=s(93751),o=s(87236),a=s(38456),n=s(21386),l=s(43498),h=s(65513),u=s(94683),d=s(52280),c=s(40968),p=s(8170),_=s(2052),y=s(89627),m=s(76809);const v=a.CheckMobile.any(),S=v&&!1,g=new h.PercentageFormatter,f=(0,o.t)("n/a"),b=`${f} (${f}%)`;class w extends class{constructor(t,e){this._study=t,this._model=e,this._emptyValues=[{title:(0,o.t)("Open"),visible:!1,value:"",index:0,id:""},{title:(0,o.t)("High"),visible:!1,value:"",index:1,id:""},{title:(0,o.t)("Low"),visible:!1,value:"",index:2,id:""},{title:(0,o.t)("Close"),visible:!1,value:"",index:3,id:""},{title:"",visible:!1,value:"",index:4,id:""},{title:"",visible:!1,value:"",index:5,id:""},{title:(0,o.t)("Change"),visible:!1,value:"",index:6,id:""}]}getItems(){return this._emptyValues}getValues(t){const e=this._emptyValues.map(t=>({...t}));if(this._model.timeScale().isEmpty())return e;if(0===this._study.data().size())return e;const s=this._showLastPriceAndChangeOnly();if((0,r.isNumber)(t)||(s?t=this._study.data().lastIndex():(t=this._model.crossHairSource().appliedIndex(),(0,r.isNumber)(t)||(t=this._study.data().lastIndex()))),null===t||!(0,r.isNumber)(t))return e;const i=this._study.data().search(t,d.PlotRowSearchMode.NearestLeft,1),o=this._model.backgroundTopColor().value();if(null===i)return e;const a=i.index,h=i.value,c=h[1],p=h[2],_=h[3],v=h[4];e[0].value=f,e[1].value=f,e[2].value=f,e[3].value=f,e[6].value=b;for(const t of e)t.visible=!s;const w=e[4];w.visible=!1;const{values:x}=this._changesData(v,c,a,s),P=(0,m.getPriceValueFormatterForSource)(this._study);if((0,m.shouldBeFormattedAsPercent)(this._study))e[6].value="";else if(void 0!==x){const t=this._study.formatter();e[6].value=(0,l.forceLTRStr)(`${t.format(x.change,!0)} (${g.format(x.percentChange,!0)})`)}
s?(e[5].value=null==v?f:P(v),e[5].visible=!0,e[6].visible=!0):(e[0].value=null==c?f:P(c),e[1].value=null==p?f:P(p),e[2].value=null==_?f:P(_),e[3].value=null==v?f:P(v),w.value=P(this._study.barFunction()(h)),e[5].visible=!1);let I=null;if(s&&!S)I=void 0===x||x.change>=0?y.SeriesBarColorer.upColor(this._study.properties()):y.SeriesBarColorer.downColor(this._study.properties());else{const t=this._study.barColorer().barStyle(a,!1),e=null!=t.barBorderColor?t.barBorderColor:t.barColor;I=(0,u.calculateColor)(o,e)}I=(0,n.resetTransparency)((0,u.calculateColor)(o,I));for(const t of e)t.color=I;return e}_showLastPriceAndChangeOnly(){return v&&(null===this._model.crossHairSource().pane||(0,c.isLineToolName)(p.tool.value())||null!==this._model.lineBeingEdited())}_changesData(t,e,s,i){var r;if(i&&!S){const t=this._study.quotes();if(null!==t)return{values:{change:t.change,percentChange:t.change_percent},priceDirection:{basedOnCurrentBar:t.change>=0?0:1,basedOnPrevClose:t.change>=0?0:1}}}else{const i=this._study.data().search(s-1,d.PlotRowSearchMode.NearestLeft,1),o=null!==(r=null==i?void 0:i.value[4])&&void 0!==r?r:null;if(null!==o&&null!=t&&null!=e)return{values:{change:t-o,percentChange:(0,_.barPercentChange)(o,t)},priceDirection:{basedOnCurrentBar:t>=e?0:1,basedOnPrevClose:t>=o?0:1}}}return null==t||null==e?{}:{priceDirection:{basedOnCurrentBar:t>=e?0:1,basedOnPrevClose:t>=e?0:1}}}}{constructor(t,e){super(t,e);const s=e.properties().childs().paneProperties.childs().legendProperties.childs();this._showBarChange=s.showBarChange,this._showSeriesOHLC=s.showSeriesOHLC,this._seriesStyle=t.properties().childs().style}getValues(t){const e=super.getValues(t);if(!this._showLastPriceAndChangeOnly()){const t=(0,i.isPriceSourceStyle)(this._seriesStyle.value()),s=this._showSeriesOHLC.value(),r=s&&!t,o=s&&t;e[0].visible=r,e[1].visible=r,e[2].visible=r,e[3].visible=r,e[6].visible=this._showBarChange.value(),e[4].visible=o}return e}}},9776:(t,e,s)=>{"use strict";s.d(e,{OverlayStatusProvider:()=>r});var i=s(51620);class r extends i.StudyStatusProvider{getSplitTitle(){return this._source.titleInParts(!0,void 0,!1,!1)}text(){return this._source.isActualInterval()?this._source.isFailed()?`${this._source.title(!0,void 0,!1,!1)}: ${this.sourceStatusText()}`:`${this._source.title(!0,void 0,!1,!1)} ${this.sourceStatusText()}`:this._source.title(!0,void 0,!1,!1)}}},20962:(t,e,s)=>{"use strict";s.d(e,{PivotPointsStandardLastPricesView:()=>a});var i=s(52280);const r=["p","s1","r1","s2","r2","s3","r3","s4","r4","s5","r5"],o={P:"P",S1:"S1/R1",S2:"S2/R2",S3:"S3/R3",S4:"S4/R4",S5:"S5/R5",R1:"S1/R1",R2:"S2/R2",R3:"S3/R3",R4:"S4/R4",R5:"S5/R5"};class a{constructor(t){this._visiblePivots=new Set,this._invidated=!0,this._prices=[],this._source=t}visiblePivots(){return this._visiblePivots}update(){this._invidated=!0}prices(){return this._invidated&&(this._updateImpl(),this._invidated=!1),this._prices}_updateImpl(){this._visiblePivots.clear();const t=this._source.model(),e=this._source.priceScale();if(null===e)return;if(t.timeScale().isEmpty()||e.isEmpty())return
;const s=t.timeScale().visibleBarsStrictRange();if(null===s)return;if(!this._source.customData()||!this._source.customData().pivots)return;const a=t.mainSeries().bars().search(s.lastBar(),i.PlotRowSearchMode.NearestLeft);if(null===a)return;const n=a.index,l=this._source.customData().pivots,h=this._source.indexes(),u=this._source.properties(),d=this._source.firstValue();for(let t=0;t<l.length;t++){if(!l[t])continue;const s=h[l[t].startIndex],i=h[l[t].endIndex],a=u.inputs.showHistoricalPivots.value();if(s<=n&&(i>=n||a)){this._visiblePivots.add(l[t]),this._prices=[];for(let s=0;s<r.length;s++){const i=r[s],a=l[t][i];if(void 0===a||null===d)continue;const n=e.priceToCoordinate(a,d),h=i.toUpperCase(),c=o[h],p=u.levelsStyle.colors[c].value();this._prices.push({formatted:e.formatPrice(a,d),price:a,coordinate:n,color:p})}}}}}},98640:(t,e,s)=>{"use strict";s.d(e,{PaneRendererStandardPivotLabel:()=>r});var i=s(18718);class r{constructor(t,e,s){this._drawRects=[],this._cacheProvider=t,this._point=e,this._label=s}draw(t,e){const s=this._cacheProvider(e);t.save(),t.setTransform(1,0,0,1,0,0);const i=e.pixelRatio;this._drawRects=[];const r=e=>{const r=s.labelRectByIndex(e),o={left:Math.round(this._point.x-r.width+a),top:Math.round(this._point.y-r.height/2),width:r.width,height:r.height};return t.drawImage(s.canvas(),Math.round(r.left*i),Math.round(r.top*i),r.width*i,r.height*i,Math.round(o.left*i),Math.round(o.top*i),o.width*i,o.height*i),this._drawRects.push(o),r.width},o=this._label.split("/");let a=0;for(let t=0;t<o.length;t++){const e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(o[t]);t>0&&(a+=r(e+11)/2),a+=r(e)/2}t.restore()}hitTest(t){for(const e of this._drawRects)if(t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height)return new i.HitTestResult(i.HitTestResult.REGULAR);return null}}},22464:(t,e,s)=>{"use strict";s.d(e,{StandardPivotPointsImageCache:()=>o});var i=s(24112),r=s(88537);class o{constructor(t,e,s,r){this._priceAxisFontSize=11,this._prices=[],this._labelWidth=0,this._paneRenderParams=t,this._recreateCanvasAndContext(new i.Size(0,0)),this.reset({font:e,fontSize:s,backColors:r})}destroy(){delete this._canvas,delete this._cache}canvas(){return this._canvas}reset(t){this._renderParams=t,this._prices=[],this._cache.font=t.fontSize+"px "+t.font,this._labelWidth=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5","/"].reduce((t,e)=>{const s=this._cache.measureText(e).width;return Math.max(s,t)},0)}rowHeight(){return this._priceAxisFontSize+4}labelRectByIndex(t){return{left:0,top:Math.round(this._topByIndex(t)),width:Math.round(this._labelWidth+4),height:Math.round(this._renderParams.fontSize+8)}}setPrices(t){let e=!1;const s=(t,e)=>{const s=void 0===t,i=void 0===e;return(!s&&!i||s===i)&&(0,r.ensureDefined)(t).formatted===(0,r.ensureDefined)(e).formatted};if(t.length!==this._prices.length)e=!0;else for(let i=0;i<this._prices.length;i++)if(!s(this._prices[i],t[i])){e=!0;break}if(e){const e=this._labelWidth+6,s=this._renderParams.fontSize,r=Math.max(t.length,22)*(s+8)
;this._recreateCanvasAndContext(new i.Size(e,r)),this._prices=t,this._cache.save(),(0,i.drawScaled)(this._cache,this._paneRenderParams.pixelRatio,()=>{this._cache.translate(.5,.5),this._cache.font=this._renderParams.fontSize+"px "+this._renderParams.font,this._cache.textBaseline="middle";for(let t=0;t<this._prices.length;t++){if(!this._prices[t])continue;const e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"][t];this._cache.fillStyle=this._renderParams.backColors[t],this._cache.fillText(e,0,this._centerByIndex(t)),this._cache.fillText("/",0,this._centerByIndex(t+11))}}),this._cache.restore(),this._prices=t}}_recreateCanvasAndContext(t){this._canvas=document.createElement("canvas"),this._canvas.width=t.w*this._paneRenderParams.pixelRatio,this._canvas.height=t.h*this._paneRenderParams.pixelRatio,this._cache=(0,r.ensureNotNull)(this._canvas.getContext("2d"))}_centerByIndex(t){return Math.round((t+.5)*(this._renderParams.fontSize+8))}_topByIndex(t){return Math.round(t*(this._renderParams.fontSize+8))}}},30401:(t,e,s)=>{"use strict";s.d(e,{StandardPivotPointsPriceAxisView:()=>o});var i=s(98424);const r=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"];class o extends i.PriceAxisView{constructor(t,e){super(),this._source=t,this._data=e;const s=e.name;this._completeName="P"===s.toUpperCase()?"P":`S${s[1]}/R${s[1]}`}_updateRendererData(t,e,s){t.visible=!1,e.visible=!1;const i=this._source.properties();if(!i.visible.value())return;const o=this._completeName,a=i.levelsStyle.visibility;if(!a[o]||!a[o].value())return;const n=this._source.model().timeScale(),l=this._source.priceScale();if(n.isEmpty()||null===n.visibleBarsStrictRange()||null!==l&&l.isEmpty())return;const h=this._source.customData();if(!h||!h.pivots)return;const u=this._source.pricesView().prices()[r.indexOf(this._data.name.toUpperCase())];if(!u)return;s.background=u.color,s.textColor=this.generateTextColor(u.color),s.coordinate=u.coordinate,s.floatCoordinate=u.floatCoordinate;const d=this._source.model().properties().childs().scalesProperties.childs();d.showStudyLastValue.value()&&(t.text=u.formatted,t.visible=!0),d.showStudyPlotLabels.value()&&(e.text=this._source.priceLabelText(this._data.name),e.visible=!0)}}},2359:(t,e,s)=>{"use strict";var i=s(59270).PriceRange,r=s(86441).Point,o=s(34840).StudyStatusView,a=s(49633).StudyDataWindowView,n=s(59251).NonSeriesStudy,l=s(30401).StandardPivotPointsPriceAxisView,h=s(13648).PanePriceAxisView,u=s(18718).HitTestResult,d=s(17611).CompositeRenderer,c=s(59081).areEqualPaneRenderParams,p=s(22464).StandardPivotPointsImageCache,_=s(20962).PivotPointsStandardLastPricesView,y=s(98640).PaneRendererStandardPivotLabel,m=s(37689).HorizontalLineRenderer,v=s(88427);class S{constructor(t,e){this._model=t,this._source=e,this._pivots=[],this._textCache={}}setCache(t){this._cache=t}priceAxisViews(t,e){return this._priceAxisViews}mergeLabel(t,e,s){var i=""+e;void 0===t[i]?(t[i]={},t[i].text=s,t[i].ids=[this.complete(s)]):(t[i].text+="/"+s,t[i].ids.push(this.complete(s)))}complete(t){return"P"===t?t:"S"+t[1]+"/R"+t[1]}
update(){this._invalidated=!0}_updateImpl(){if(this._source.pricesView().prices(),this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()){var t=this._source.customData().pivots,e=this._source._indexes,s=this._model.timeScale(),i=this._source.priceScale();if(i&&!i.isEmpty()&&!s.isEmpty()&&t){var r=s.visibleBarsStrictRange(),o=r.firstBar(),a=r.lastBar();if(this._source.ownerSource())for(var n=this._source.ownerSource().firstValue(),l=0;l<t.length;l++)if(t[l]){var h=e[t[l].startIndex],u=e[t[l].endIndex];if(!(u<o||h>a)){var d={},c=this._source.properties().levelsStyle.visibility;c.P.value()&&this.mergeLabel(d,t[l].p,"P"),c["S1/R1"].value()&&(this.mergeLabel(d,t[l].s1,"S1"),this.mergeLabel(d,t[l].r1,"R1")),c["S2/R2"].value()&&(this.mergeLabel(d,t[l].s2,"S2"),this.mergeLabel(d,t[l].r2,"R2")),c["S3/R3"].value()&&(this.mergeLabel(d,t[l].s3,"S3"),this.mergeLabel(d,t[l].r3,"R3")),c["S4/R4"].value()&&(this.mergeLabel(d,t[l].s4,"S4"),this.mergeLabel(d,t[l].r4,"R4")),c["S5/R5"].value()&&(this.mergeLabel(d,t[l].s5,"S5"),this.mergeLabel(d,t[l].r5,"R5"));var p=s.indexToCoordinate(h),_=s.indexToCoordinate(u);for(var y in d){var m=parseFloat(y),v=i.priceToCoordinate(m,n);this._pivots.push({x1:p,x2:_,y:v,label:d[y].text,labelIds:d[y].ids,src:t[l]})}}}}}}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);for(var t=new d,e=this._source.properties().levelsStyle.colors,s=this._source.properties().levelsStyle.widths,i=this._source.visiblePivots(),o=0;o<this._pivots.length;o++){var a=this._pivots[o];if(i.has(a.src)){var n={width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e[a.labelIds[0]].value(),linewidth:s[a.labelIds[0]].value(),linestyle:CanvasEx.LINESTYLE_SOLID,y:a.y,left:a.x1,right:a.x2},l=new m;if(l.setData(n),l.setHitTest(new u(u.REGULAR)),t.append(l),this._source.properties().levelsStyle.showLabels.value()){var h=function(t){return this._source.getCache(t)}.bind(this);t.append(new y(h,new r(a.x1,a.y),a.label))}}}return t}}e.study_PivotPointsStandard=class extends n{constructor(t,e,s,i){super(t,e,s,i);for(var r=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],o=this.properties().levelsStyle.visibility,a=0;a<r.length;a++)o[r[a]].listeners().subscribe(this,this.processHibernate);this._cacheDrawParams=null,this._cache=null}indexes(){return this._indexes}getCache(t){return this.createCacheIfRequred(t),this._cache}createCacheIfRequred(t){if(null===this._cache||null==this._cacheDrawParams||!c(t,this._cacheDrawParams)){this._cache&&this._cache.destroy();var e=this._getActualCacheParams();this._cache=new p(t,e.font,e.fontSize,e.backColors),this._cache.setPrices(this._pricesView.prices()),this._cacheDrawParams=t,this._cacheInvalidated=!1,this._cache.reset(e),this._cache.setPrices(this._pricesView.prices())}}lastValueData(t,e,s){var i=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(t.toUpperCase()),r=this._pricesView.prices()[i];return null!=r?r:{noData:!0}}priceLabelText(t){
return this._metaInfo.shortDescription+":"+t.toUpperCase()}pricesView(){return this._pricesView}_getActualCacheParams(){var t={};return t.font=v.CHART_FONT_FAMILY,t.fontSize=this.properties().fontsize.value(),t.backColors=[this.properties().levelsStyle.colors.P.value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S5/R5"].value(),this.properties().levelsStyle.colors["S5/R5"].value()],t}updateAllViews(){super.updateAllViews(),this._pricesView.update()}_createViews(){this._cache&&(this._cache.destroy(),this._cache=null),this._priceAxisViews=[];var t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"];this._paneViews.length=0,this._labelPaneViews=[];var e=new S(this._model,this);e.setCache(this._cache),this._paneViews.push(e),this._mainPaneView=e;for(var s=0;s<t.length;s++){var i=new l(this,{name:t[s],cache:this._cache});this._priceAxisViews.push(i),this._labelPaneViews.push(new h(i,this,this._model))}this._dataWindowView||(this._dataWindowView=new a(this,this._model)),this._statusView||(this._statusView=new o(this,this._model.properties().scalesProperties.textColor)),this._legendView=null,this._pricesView=new _(this)}visiblePivots(){return this._pricesView.visiblePivots()}_postProcessGraphics(){}isVisible(){if(!this.properties().visible.value()||!this.isActualInterval())return!1;for(var t=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],e=this.properties().levelsStyle.visibility,s=0;s<t.length;s++)if(e[t[s]].value())return!0;return!1}stop(){super.stop(),this._cache&&(this._cache.destroy(),this._cache=null)}priceRange(t,e){if(!this.customData()||!this.customData().pivots||!this._indexes)return null;if(!this.priceScale())return null;for(var s=this.customData().pivots,r=this._indexes,o=null,a=0;a<s.length;a++)if(s[a]){var n=r[s[a].startIndex];if(!(r[s[a].endIndex]<t||n>e)){var l=[],h=this._properties.levelsStyle.visibility;h.P.value()&&l.push(s[a].p),h["S1/R1"].value()&&l.push(s[a].s1,s[a].r1),h["S2/R2"].value()&&l.push(s[a].s2,s[a].r2),h["S3/R3"].value()&&l.push(s[a].s3,s[a].r3),h["S4/R4"].value()&&l.push(s[a].s4,s[a].r4),h["S5/R5"].value()&&l.push(s[a].s5,s[a].r5);for(var u=0;u<l.length;u++)l[u]&&(null===o?o=new i(l[u],l[u]):o.apply(l[u],l[u]))}}return this.priceScale().isLog()&&o?new i(this.priceScale().priceToLogical(o.minValue()),this.priceScale().priceToLogical(o.maxValue())):o}}},46305:(t,e,s)=>{"use strict";s.r(e),s.d(e,{createStudy:()=>lt,isESDStudy:()=>ot,isFundamentalStudy:()=>rt,isFundamentalStudyMetaInfo:()=>at,isStudy:()=>et,isStudyStrategy:()=>st,isStudyStub:()=>it,studyColorRotationMode:()=>ht,useSameColorRotationComparator:()=>dt})
;var i=s(70028),r=s.n(i),o=s(48874),a=s(49156),n=s(71829),l=s(20681),h=s(85584),u=s(76745),d=s(59251);class c extends d.NonSeriesStudy{startIndex(){const t=this.customData();if(null==t||null==this._indexes)return null;const e=this._indexes[t.startIndex];return e!==u.INVALID_TIME_POINT_INDEX?e:null}endIndex(){const t=this.customData();if(null==t||null==this._indexes)return null;const e=this._indexes[t.endIndex];return e!==u.INVALID_TIME_POINT_INDEX?e:null}baseLine(){const t=this.customData();return null!=t?t.baseLine:null}downLine(){const t=this.customData();return null!=t?t.downLine:null}upLine(){const t=this.customData();return null!=t?t.upLine:null}pearsons(){const t=this.customData();return null!=t&&void 0!==t.pearsons?t.pearsons:null}isVisible(){if(!this.properties().visible.value()||!this.isActualInterval())return!1;const t=this.properties().styles;return t.upLine.visible.value()||t.downLine.visible.value()||t.baseLine.visible.value()}_createViews(){super._createViews(),Promise.all([s.e(15517),s.e(46305),s.e(20507)]).then(s.bind(s,49238)).then(({LinearRegressionPaneView:t})=>{this._setPaneViews([new t(this.model(),this)])})}}var p=s(30276),_=s(88537),y=s(59270);class m extends o.Study{priceRange(t,e){let s=!1;this.graphics().hhists().forEach((t,e)=>{s=s||this.properties().child("graphics").child("hhists").child(e).child("showValues").value()});const i=function(t,e,s,i){let r=null;return t.forEach((t,i)=>{t.forEach(t=>{t.firstBarTime<=s&&t.lastBarTime>=e&&(null===r?r={low:{l:t.priceLow,h:t.priceHigh},high:{h:t.priceHigh}}:(t.priceLow<r.low.l&&(r.low.l=t.priceLow,r.low.h=t.priceHigh),r.high.h=Math.max(r.high.h,t.priceHigh)))})}),null===r?null:i?new y.PriceRange(r.low.l-.8*(r.low.h-r.low.l),r.high.h):new y.PriceRange(r.low.l,r.high.h)}(this.graphics().hhists(),t,e,s);if(null===i)return null;const r=(0,_.ensureNotNull)(this.priceScale());return r.isLog()?new y.PriceRange(r.priceToLogical(i.minValue()),r.priceToLogical(i.maxValue())):i}}class v extends m{}var S=s(61118),g=s(87236),f=s(52280),b=s(44276),w=s(24635),x=s(6096),P=s(12270),I=s(23083),C=s(74316);class D{constructor(t,e){this._rough=t,this._detailed=e}forEach(t,e){this._mostDetailedHorizLines().forEach(s=>{t.call(e,s,s,this)})}has(t){let e=!1;return this._mostDetailedHorizLines().forEach(s=>{e=e||s===t}),e}get size(){return this._rough.size}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}_mostDetailedHorizLines(){const t=new Map;this._rough.forEach(e=>t.set(e.startIndex,e));for(let e=this._detailed.length-1;e>=0;e--){this._detailed[e].forEach(e=>{t.has(e.startIndex)&&t.set(e.startIndex,e)})}return t}}class T{constructor(t,e){this._roughHorizLineSets=t,this._detailedHorizLineSets=e}forEach(t,e){this._roughHorizLineSets.forEach((s,i)=>{t.call(e,(0,_.ensureDefined)(this.get(i)),i,this)})}get(t){if(this._roughHorizLineSets.has(t))return new D((0,
_.ensureDefined)(this._roughHorizLineSets.get(t)),this._detailedHorizLineSets.map(e=>e.get(t)).filter(t=>void 0!==t))}has(t){return this._roughHorizLineSets.has(t)}get size(){return this._roughHorizLineSets.size}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class V{constructor(t,e){this._rough=t,this._detailed=e}forEach(t,e){this._rough.forEach((s,i)=>{for(const s of this._detailed){const r=s.get(i);if(void 0!==r)return void t.call(e,r,i,this)}t.call(e,s,i,this)})}get(t){for(const e of this._detailed){const s=e.get(t);if(void 0!==s)return s}return this._rough.get(t)}has(t){for(const e of this._detailed){if(e.has(t))return!0}return this._rough.has(t)}get size(){return this._rough.size}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class L{constructor(t,e){this._graphics=t,this._styleId=e}forEach(t,e){this._graphics.hhistsByTimePointIndex().forEach(s=>{s.forEach(s=>{if(s.styleId===this._styleId){const i={firstBarTime:s.firstBarTime,lastBarTime:s.lastBarTime,rate:s.rate,priceHigh:s.priceHigh,priceLow:s.priceLow};t.call(e,i,i,this)}})})}has(t){let e=!1;return this._graphics.hhistsByTimePointIndex().forEach(s=>{s.forEach(s=>{s.styleId===this._styleId&&s===t&&(e=!0)})}),e}get size(){let t=0;return this._graphics.hhistsByTimePointIndex().forEach(e=>{e.forEach(e=>{e.styleId===this._styleId&&t++})}),t}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class R{constructor(t,e){this._graphicsInfo=t,this._graphics=e}forEach(t,e){if(void 0===this._graphicsInfo.hhists)return;const s=Object.keys(this._graphicsInfo.hhists);for(const i of s)t.call(e,(0,_.ensureDefined)(this.get(i)),i,this)}get(t){if(void 0!==this._graphicsInfo.hhists)return new L(this._graphics,t)}has(t){return void 0!==this._graphicsInfo.hhists&&t in this._graphicsInfo.hhists}get size(){return void 0===this._graphicsInfo.hhists?0:Object.keys(this._graphicsInfo.hhists).length}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class k{constructor(t,e,s){this._graphicsInfo=t,this._roughStudyGraphics=e,this._detailedStudyGraphics=s}horizlines(){return new T(this._roughStudyGraphics.horizlines(),this._detailedStudyGraphics.map(t=>t.horizlines()))}vertlines(){return this._roughStudyGraphics.vertlines()}lines(){return this._roughStudyGraphics.lines()}hlines(){return this._roughStudyGraphics.hlines()}textmarks(){return this._roughStudyGraphics.textmarks()}shapemarks(){return this._roughStudyGraphics.shapemarks()}backgrounds(){return this._roughStudyGraphics.backgrounds()}polygons(){return this._roughStudyGraphics.polygons()}
trendchannels(){return this._roughStudyGraphics.trendchannels()}hhists(){return new R(this._graphicsInfo,this)}hhistsByTimePointIndex(){return new V(this._roughStudyGraphics.hhistsByTimePointIndex(),this._detailedStudyGraphics.map(t=>t.hhistsByTimePointIndex()))}dwglabels(){return this._roughStudyGraphics.dwglabels()}dwglines(){return this._roughStudyGraphics.dwglines()}dwgboxes(){return this._roughStudyGraphics.dwgboxes()}dwgtables(){return this._roughStudyGraphics.dwgtables()}dwgtablecells(){return this._roughStudyGraphics.dwgtablecells()}dwglinefills(){return this._roughStudyGraphics.dwglinefills()}}const M="tv-volumebyprice",A=(0,b.studyIdString)("VbPSessionsRough",M),E=(0,b.studyIdString)("VbPSessionsDetailed",M),F=(0,b.studyIdString)("VbPSessionsDetailedAlerts",M),N=Number.MAX_SAFE_INTEGER,O=(0,g.t)("study package is not available");class H extends m{constructor(t,e,s,i){super(t,e,s,i),this._isPackageAvailable=B(),this._alertsStudyMetaInfo=null,this._roughDataSource=null,this._detailedDataSource=null,this._detailedDataBuffer=new S.CircularBuffer(7),this._loadedGraphics=null,this._loadedPlots=null,this._mergedGraphics=(0,C.emptyStudyGraphics)(),this._mergedPlots=this._emptyPlotList(),this._isPackageAvailable||this._setStatus({type:x.StudyStatusType.Error,errorDescription:{error:O}})}destroy(){null!==this._detailedDataSource&&(this._detailedDataSource.dataUpdated().unsubscribe(this,this._onRoughOrDetailedDataUpdated),this._detailedDataSource.dataCleared().unsubscribe(this,this._onRoughOrDetailedDataCleared),this._detailedDataSource.studyStatusChanged().unsubscribe(this,this._onStudyStatusChanged),this._detailedDataSource.destroy(),this._detailedDataSource=null),null!==this._roughDataSource&&(this._roughDataSource.dataUpdated().unsubscribe(this,this._onRoughOrDetailedDataUpdated),this._roughDataSource.dataCleared().unsubscribe(this,this._onRoughOrDetailedDataCleared),this._roughDataSource.studyStatusChanged().unsubscribe(this,this._onStudyStatusChanged),this._roughDataSource.destroy(),this._roughDataSource=null)}data(){return this._loadedPlots||this._mergedPlots}graphics(){return this._loadedGraphics||this._mergedGraphics}clearData(){null!==this._roughDataSource&&this._roughDataSource.clearData(),null!==this._detailedDataSource&&this._detailedDataSource.clearData()}restoreData(t){this._invalidateLastNonEmptyPlotRowCache(),this._loadedPlots=this._emptyPlotList(),this._loadedPlots.restoreState(t),void 0!==t.graphics&&(this._loadedGraphics=(0,C.loadStudyGraphics)(t.graphics)),this._postProcessGraphics()}isFailed(){return!this._isPackageAvailable||null!==this._roughDataSource&&this._roughDataSource.studyStatus().type===x.StudyStatusType.Error||null!==this._detailedDataSource&&this._detailedDataSource.studyStatus().type===x.StudyStatusType.Error}isLoading(){return null!==this._roughDataSource&&this._roughDataSource.studyStatus().type===x.StudyStatusType.Loading||null!==this._detailedDataSource&&this._detailedDataSource.studyStatus().type===x.StudyStatusType.Loading}isStarted(){
return null!==this._roughDataSource&&this._roughDataSource.isStarted()||null!==this._detailedDataSource&&this._detailedDataSource.isStarted()}sourceId(){throw new Error("Invalid operation")}idForAlert(){return super._collectDepsForAlert().idForAlert}hasStateForAlert(){return super.hasStateForAlert()&&null!==this._alertsStudyMetaInfo}canHaveChildren(){return!1}isChildStudy(){return!1}hasChildren(){return!1}getAllChildren(){return[]}processHibernate(){this.isVisible()?(null===this._roughDataSource||this._roughDataSource.isStarted()||(this._roughDataSource.start(),this._onHibernationStateChange.fire(!1)),null===this._detailedDataSource||this._detailedDataSource.isStarted()||this._detailedDataSource.start()):(null!==this._roughDataSource&&this._roughDataSource.isStarted()&&(this._roughDataSource.stop(),this._onHibernationStateChange.fire(!0)),null!==this._detailedDataSource&&this._detailedDataSource.isStarted()&&this._detailedDataSource.stop())}_stopStudyOnServer(){var t,e;this._chartApi&&this._chartApi.isConnected().value()&&((null===(t=this._roughDataSource)||void 0===t?void 0:t.isStarted())&&this._roughDataSource.stop(),(null===(e=this._detailedDataSource)||void 0===e?void 0:e.isStarted())&&this._detailedDataSource.stop())}async _startAfterSymbolsResolved(t,e){if(this.isStarted()&&!this.isRestarting())return;if(this._restarting=!1,this._isPackageAvailable=B(),!this._isPackageAvailable)return void this._setStatus({type:x.StudyStatusType.Error,errorDescription:{error:O}});if(!this._allInputsAreValid())return;this._inputs=this.inputs();const s=this.model().studyMetaInfoRepository();if(null===this._roughDataSource){const t=await s.findById({type:"java",studyId:A});this._roughDataSource=new P.StudyDataSource(this.model().chartApi(),this.model().mainSeries().seriesSource(),"vbpsessionsrough_",t),this._roughDataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._roughDataSource.dataCleared().subscribe(this,this._onRoughOrDetailedDataCleared),this._roughDataSource.dataUpdated().subscribe(this,this._onRoughOrDetailedDataUpdated)}else this._roughDataSource.stop();if(this._roughDataSource.setInputs(z(this._roughDataSource.metaInfo().inputs,this._inputs)),this.processHibernate(),null===this._detailedDataSource){const t=await s.findById({type:"java",studyId:E});this._detailedDataSource=new P.StudyDataSource(this.model().chartApi(),this.model().mainSeries().seriesSource(),"vbpsessionsdetailed_",t),this._detailedDataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._detailedDataSource.dataCleared().subscribe(this,this._onRoughOrDetailedDataCleared),this._detailedDataSource.dataUpdated().subscribe(this,this._onRoughOrDetailedDataUpdated)}else this._detailedDataSource.stop();this._detailedDataSource.setInputs(W(this._inputs)),this.processHibernate(),this._createStudyGraphics(),this._subscribeToSessionId(),this._setStatus(this._statusValueFromDataSources()),this.onStart.fire(),null===this._alertsStudyMetaInfo&&(this._alertsStudyMetaInfo=await s.findById({type:"java",studyId:F}))}
_changeInputsImpl(t,e){if(null!==this._roughDataSource){if((0,w.areStudyInputsEqual)(this._roughDataSource.metaInfo().inputs,e,t)){if(null!==this._detailedDataSource){const e=W(t),s=(0,w.rangeDependentStudyInputsToTimeRange)(e);if(this._moreDetailedDataRequiredForTimeRange(s)){if(this._detailedDataSource.isActive()){const t=this._detailedDataSource.stopAndStealData();if(t.plots.size()>0||!(0,C.isStudyGraphicsEmpty)(t.graphics)){const e=(0,_.ensureNotNull)(this._detailedDataSource.inputs());t.plots=this._extractEffectiveDetailedPlotValues(t.plots,e),this._detailedDataBuffer.enqueue({lod:$(e),value:t})}}this._detailedDataSource.setInputs(e),this._detailedDataSource.start()}}}else this._roughDataSource.setInputs(z(this._roughDataSource.metaInfo().inputs,t)),this._detailedDataBuffer.clear(),null!==this._detailedDataSource&&this._detailedDataSource.setInputs(W(t));null!==this._detailedDataSource&&this._createStudyGraphics()}}_collectDepsForAlert(){const t=super._collectDepsForAlert();if(null===this._alertsStudyMetaInfo)throw new Error("Alerts study metainfo is not ready yet. Have you checked the alert availability using hasStateForAlert()?");return{...t,studyDependencies:t.studyDependencies.map(t=>{const e=t.study===U(this.metaInfo());return{id:t.id,inputs:e?(s=t.inputs,{...s,subscribeRealtime:!0}):t.inputs,study:e&&null!==this._alertsStudyMetaInfo?U(this._alertsStudyMetaInfo):t.study};var s})}}isHibernated(){return!(this.isVisible()||null!==this._roughDataSource&&this._roughDataSource.isStarted()||null!==this._detailedDataSource&&this._detailedDataSource.isStarted())}_statusValueFromDataSources(){const t={type:x.StudyStatusType.Undefined};if(null===this._roughDataSource||null===this._detailedDataSource)return t;const e=this._roughDataSource.studyStatus(),s=this._detailedDataSource.studyStatus();if(e.type===x.StudyStatusType.Error)return e;if(s.type===x.StudyStatusType.Error)return s;if(e.type===x.StudyStatusType.Loading||s.type===x.StudyStatusType.Loading){const t=e.type===x.StudyStatusType.Loading?e.startTime:1/0,i=s.type===x.StudyStatusType.Loading?s.startTime:1/0;return{type:x.StudyStatusType.Loading,startTime:Math.min(t,i)}}return e.type===x.StudyStatusType.Completed?{type:x.StudyStatusType.Completed}:t}_emptyPlotList(){return new f.PlotList((0,I.studyPlotFunctionMap)(this.metaInfo()),I.studyEmptyPlotValuePredicate)}_createStudyPlots(){const t=(0,_.ensureNotNull)(this._roughDataSource),e=(0,_.ensureNotNull)(this._detailedDataSource);this._mergedPlots.clear();const s=[];s.push({lod:N,value:t.plots()}),this._detailedDataBuffer.forEach(t=>{s.push({lod:t.lod,value:t.value.plots})});const i=(0,_.ensureNotNull)(e.inputs());s.push({lod:$(i),value:this._extractEffectiveDetailedPlotValues(e.plots(),i)}),s.sort((t,e)=>e.lod-t.lod);for(const t of s)t.value.each((t,e)=>{for(const t of e)if(void 0===t)return!1;return this._mergedPlots.add(t,e),!1});this._invalidateLastNonEmptyPlotRowCache()}_createStudyGraphics(){const t=(0,_.ensureNotNull)(this._roughDataSource),e=(0,_.ensureNotNull)(this._detailedDataSource),s=[]
;this._detailedDataBuffer.forEach(t=>{s.push({lod:t.lod,value:t.value.graphics})}),void 0!==this._inputs&&s.push({lod:$(this._inputs),value:e.graphics()}),s.sort((t,e)=>t.lod-e.lod);const i=s.map(t=>t.value);this._mergedGraphics=new k(this.metaInfo().graphics,t.graphics(),i)}_extractEffectiveDetailedPlotValues(t,e){const s=(0,w.rangeDependentStudyInputsToTimeRange)(e),i=this.model().timeScale().timePointToIndex(s.from),r=this.model().timeScale().timePointToIndex(s.to);return t.size()>0?t.range(i||(0,_.ensureNotNull)(t.firstIndex()),r||(0,_.ensureNotNull)(t.lastIndex())):this._emptyPlotList()}_moreDetailedDataRequiredForTimeRange(t){const{from:e,to:s}=t;let i=!1;return(0,_.ensureNotNull)(this._roughDataSource).graphics().hhistsByTimePointIndex().forEach((t,r)=>{if(i)return;const o=this.model().timeScale().indexToTimePoint(r);if(null===o||o<e||s<o)return;const a=s-e;let n=!1;this._detailedDataBuffer.forEach(t=>{if(t.lod<=a){t.value.graphics.hhistsByTimePointIndex().has(r)&&(n=!0)}}),n||(i=!0)}),i}_onStudyStatusChanged(){this._setStatus(this._statusValueFromDataSources()),(0,_.ensureDefined)(this._statusView).update()}_onRoughOrDetailedDataCleared(){null!==this._roughDataSource&&null!==this._detailedDataSource&&(this._invalidateLastNonEmptyPlotRowCache(),this._detailedDataBuffer.clear(),this._createStudyPlots(),this._createStudyGraphics(),this.updateAllViews(),this.model().updateSource(this))}_onRoughOrDetailedDataUpdated(t){null!==this._roughDataSource&&null!==this._detailedDataSource&&(t.length>0&&this._createStudyPlots(),this.updateAllViews(),this.model().updateSource(this))}}function B(){return void 0!==window.pro&&window.pro.hasPackage(M)}function z(t,e){const s={};for(const i of t)s[i.id]=e[i.id];return s}function W(t){const e=t.last_visible_bar_time-t.first_visible_bar_time;return{...t,first_visible_bar_time:t.first_visible_bar_time-e,last_visible_bar_time:t.last_visible_bar_time+e}}function $(t){const{from:e,to:s}=(0,w.rangeDependentStudyInputsToTimeRange)(t);return s-e}function U(t){return`${t.id}-${t.version}`}var Y=s(19111),G=s(2359),q=s(82294),j=s(26026),X=s(28128),Q=s(47627);const Z=s(11688).enabled("hide_main_series_symbol_from_indicator_legend");class J extends o.Study{constructor(t,e,s,i){super(t,e,s,i),this.properties().styles.vol_ma.visible.listeners().subscribe(this,()=>this.invalidateTitleCache())}base(){return 1}destroy(){this.properties().styles.vol_ma.visible.listeners().unsubscribeAll(this),super.destroy()}_titleInputs(){const t={symbolsForDisplay:!0,skipHiddenInputs:!0,fakeInputsForDisplay:!0,asObject:!1,skipOptionalEmptySymbolInputs:Z};return this.properties().styles.vol_ma.visible.value()?this.inputs(t):this.inputs({...t,skippedInputs:["length"]})}}function K(t,e="shift",s){return{studyConstructor:t,colorRotationMode:e,colorRotationComparator:s}}const tt={study_PivotPointsStandard:K(G.study_PivotPointsStandard),study_Overlay:K(q.study_Overlay,"loop"),study_Compare:K(j.StudyCompare,"loop"),study_Volume:K(J),study_VbPVisible:K(class extends m{}),
study_ScriptWithDataOffset:K(X.study_ScriptWithDataOffset)};{tt.study_Earnings=K(n.study_ESD$TV_EARNINGS),tt.study_Splits=K(n.study_ESD$TV_SPLITS),tt.study_Dividends=K(n.study_ESD$TV_DIVIDENDS);const t=(t,e)=>at(e);tt["study_Internal$STD;Fund_"]=K(l.Fundamental,"loop",t),tt.study_ElliottWave=K(h.study_ElliottWave),tt.study_LinearRegression=K(c),tt.study_PivotPointsHighLow=K(p.study_PivotPointsHighLow),tt.study_VbPSessions=K(v),tt.study_VbPSessionsRoughDetailed=K(H),tt.study_ZigZag=K(Y.study_ZigZag),TradingView.StudyStrategy=K(a.StudyStrategy).studyConstructor}for(const t in tt)tt.hasOwnProperty(t)&&(TradingView[t]=tt[t].studyConstructor);function et(t){return t instanceof o.Study}function st(t){return t instanceof a.StudyStrategy}function it(t){return t instanceof Q.StudyStub}function rt(t){return t instanceof l.Fundamental}function ot(t){return t instanceof n.ESDStudyBase}function at(t){return"study_Internal$STD;Fund_"===nt(t)}function nt(t){const e="study_"+(t.classId||t.shortId);return e.startsWith("study_Internal$STD;Fund_")?"study_Internal$STD;Fund_":e}function lt(t,e,s,i,n){if(r().isScriptStrategy(i))return new a.StudyStrategy(t,e,s,i);const l=nt(i),h=new(l in tt?tt[l].studyConstructor:o.Study)(t,e,s,i);return void 0!==n&&h.setId(n),h}function ht(t){const e=nt(t);return e in tt?tt[e].colorRotationMode:void 0===t.pine||r().isStandardPine(t.id)?1!==t.plots.length?"shift":"loop":null}function ut(t,e){return t.id===e.id&&(i=e,((s=t).pine?s.pine.version:void 0)===(i.pine?i.pine.version:void 0));var s,i}function dt(t){const e=nt(t);if(e in tt){const t=tt[e].colorRotationComparator;if(void 0!==t)return t}return ut}},47627:(t,e,s)=>{"use strict";s.d(e,{StudyStub:()=>y});var i=s(34840),r=s(2899),o=s(89765),a=s(97639),n=s.n(a),l=s(32567),h=s.n(l),u=s(20937);class d extends u.StudyStatusProviderBase{text(){return this._source.isActualInterval()?`${this._source.title()} ${this.sourceStatusText()}`:this._source.title()}}var c=s(6096);class p{getItems(){return[]}getValues(t){return[]}}const _=new(n());class y extends r.PriceDataSource{constructor(t,e,s){super(t),this._priceStep=.01,this._status={type:c.StudyStatusType.Undefined},this._statusChanged=new(n()),this._formatter=new o.PriceFormatter(100),this._origState=e,this._title=s;this._properties=new(h())({visible:!0}),this._statusView=new i.StudyStatusView(this)}properties(){return this._properties}statusView(){return this._statusView}legendView(){return null}state(t){return this._origState}setStatus(t){this._status=t,this._statusChanged.fire()}formatter(){return this._formatter}name(){return this._title}title(){return this._title}titleInParts(){return[this._title]}isFailed(){return this._status.type===c.StudyStatusType.Error}isLoading(){return this._status.type===c.StudyStatusType.Loading}setFailed(t){this.setStatus({type:c.StudyStatusType.Error,errorDescription:{error:t}}),this._model.updateSource(this)}isSymbolInvalid(){return!1}isActualInterval(){return!0}onIsActualIntervalChange(){return _}start(){}status(){return this._status}onStatusChanged(){
return this._statusChanged}firstValue(){return null}currency(){return null}sessionId(){return this._model.mainSeries().sessionId()}sessionIdChanged(){return this._model.mainSeries().sessionIdChanged()}unit(){return null}symbolSource(){return this._model.mainSeries()}valuesProvider(){return new p}statusProvider(t){return new d(this,this._model.properties().childs().scalesProperties.childs().textColor)}}},26026:(t,e,s)=>{"use strict";s.d(e,{StudyCompare:()=>H});var i=s(88537),r=s(41139),o=s(38627),a=s(48874),n=s(49473),l=s(32567),h=s.n(l),u=s(11688),d=s(26281),c=s(98424),p=s(43615);const _=u.enabled("force_exchange_as_title");class y extends c.PriceAxisView{constructor(t,e){super(),this._studyCompare=t,this._data=e}_updateRendererData(t,e,s){t.visible=!1,e.visible=!1;const i=this._studyCompare.priceScale(),r=this._studyCompare.lastValueData(this._data.plotIndex,!1);if(r.noData||null===i||i.isEmpty())return;s.background=r.color,s.textColor=this.generateTextColor(r.color),s.coordinate=r.coordinate,s.floatCoordinate=r.floatCoordinate;const o=this._studyCompare.model().properties().childs().scalesProperties.childs();o.showSeriesLastValue.value()&&(t.text=(0,p.getCurrentModePriceText)(i,r),o.seriesLastValueMode.value()!==d.PriceAxisLastValueMode.LastPriceAndPercentageValue?t.secondLine="":t.secondLine=(0,p.getOppositeModePriceText)(i,r),t.visible=!0),e.text="",o.showSymbolLabels.value()&&(e.text=this._paneText(),e.visible=e.text.length>0)}_paneText(){let t="";const e=this._studyCompare.symbolInfo();return _?t=(0,n.displayedSymbolExchange)(e):this._studyCompare.model().properties().childs().scalesProperties.childs().showSymbolLabels.value()&&(t=(0,n.displayedSymbolName)(e)),t}}var m=s(87236),v=s(49633),S=s(29084),g=s(8170),f=s(38456),b=s(70617),w=s(33485);class x extends w.StudyValuesProvider{constructor(t,e){super(t,e),this._emptyValues[0].title=t.guiPlotName("")}_hideValues(){return!1}}const P=f.CheckMobile.any();class I extends v.StudyDataWindowView{constructor(t,e){super(t,e),this._studyCompare=t}_hideValues(){return!1}_createValuesProvider(t,e){return new x(t,e)}_currentIndex(){const t=this._model.crossHairSource().lockedIndex;let e;return P&&(null===this._model.crossHairSource().pane&&void 0===t||(0,S.isLineToolName)(g.tool.value())||null!==this._model.lineBeingEdited())?e=this._study.data().lastIndex():(e=this._model.crossHairSource().appliedIndex(),(0,b.isNumber)(e)||(e=this._study.data().lastIndex())),e}}var C=s(36643);class D extends I{constructor(t,e){super(t,e),this._additional=null,this._showSeriesOHLC=e.properties().childs().paneProperties.childs().legendProperties.childs().showSeriesOHLC,this._showSeriesOHLC.subscribe(this,this.update)}areValuesVisible(){return this._showSeriesOHLC.value()}destroy(){this._showSeriesOHLC.unsubscribeAll(this)}additional(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional}_updateImpl(){{const t=(0,C.getDataVendorString)(this._studyCompare.symbolInfo());this._additional=t?(0,m.t)("Data Provided by")+" "+t:null}super._updateImpl()}}
var T=s(34840),V=s(51620);class L extends V.StudyStatusProvider{getSplitTitle(){return this._source.titleInParts(!0,void 0,!1,!1)}text(){return this._source.isActualInterval()?this._source.isFailed()?`${this._source.title(!0,void 0,!1,!1)}: ${this.sourceStatusText()}`:`${this._source.title(!0,void 0,!1,!1)} ${this.sourceStatusText()}`:this._source.title(!0,void 0,!1,!1)}}var R=s(6342),k=s(62325),M=s.n(k);const A=u.enabled("study_overlay_compare_legend_option"),E=u.enabled("force_exchange_as_title"),F=u.enabled("uppercase_instrument_names"),N=!u.enabled("hide_study_compare_legend_item"),O=u.enabled("hide_unresolved_symbols_in_legend");class H extends a.Study{constructor(t,e,s,i){super(t,function(t){return t.hasChild("currencyId")||t.addChild("currencyId",new(h())(null)),t.hasChild("unitId")||t.addChild("unitId",new(h())(null)),t.addExclusion("currencyId"),t.addExclusion("unitId"),t}(e),s,i),this._realignToolsLastParams=null,this.properties().childs().minTick.subscribe(null,()=>this._recreatePriceFormattingDependencies()),this.properties().childs().minTick.subscribe(null,()=>this._model.fullUpdate()),this.properties().childs().currencyId.subscribe(this,this._onCurrencyChanged),this.properties().childs().unitId.subscribe(this,this._onUnitChanged),this.properties().merge({skipHistogramBaseOnAutoScale:!0}),this._symbolResolvingActive=new(M())(!1),this._symbolHibernated=new(M())(!1),t.mainSeries().onIntervalChanged().subscribe(this,()=>t.realignLineTools(this))}destroy(){this._model.mainSeries().onIntervalChanged().unsubscribeAll(this),super.destroy()}properties(){return super.properties()}createPriceAxisView(t){return new y(this,{plotIndex:"compare"})}setSymbolParams(t){this._setSymbolCurrencyUnitInternal(t)}symbol(){return this._properties.inputs.symbol.value()}setSymbol(t){this.setSymbolParams({symbol:t})}symbolInfo(){if(!this._resolvedSymbols)return null;const t=this._properties.inputs.symbol.value();if(!t)return null;let e;return e=this._model.isSnapshot()?this._resolvedSymbols.___snapshot||null:this._resolvedSymbols[this._getSymbolForResolve(t)]||null,this._model.isSnapshot()&&null===e&&(e=(0,r.getObsoleteIdeaSymbolInfo)(this._resolvedSymbols,t,this.currency()),null!==e&&(this._resolvedSymbols.___snapshot=e)),e}symbolResolved(){return this.symbolsResolved()}symbolResolvingActive(){return this._symbolResolvingActive}symbolHibernated(){return this._symbolHibernated}isVisible(){const t=super.isVisible();return this._symbolHibernated.setValue(!t),t}symbolSameAsCurrent(t){return(0,R.symbolSameAsCurrent)(t,this.symbol(),this.symbolInfo())}currency(){return this._properties.currencyId.value()||null}setCurrency(t){this.setSymbolParams({currency:t})}isConvertedToOtherCurrency(){return(0,n.isConvertedToOtherCurrency)(this.symbolInfo())}unit(){return this._properties.unitId.value()||null}setUnit(t){this.setSymbolParams({unit:t})}isConvertedToOtherUnit(){return(0,n.isConvertedToOtherUnit)(this.symbolInfo(),this._model.unitConversionEnabled())}style(){return 2}setStyle(t){}interval(){return this._model.mainSeries().interval()}
setInterval(t){}symbolSource(){return this}state(t,e){const s=super.state(t,e);return this._model.unitConversionEnabled()||delete s.state.unitId,t&&((0,i.ensureDefined)(s.data).symbols={___snapshot:this.symbolInfo()||void 0}),s}symbolTitle(t,e){return this.title(!0,{},!1,t)}titleInParts(t,e,s,i){const r=this._titleInParts(t,e,s,i).join(", ");return[F?r.toUpperCase():r]}tags(){const t=this.symbol();return t?[t]:[]}statusView(){return N?super.statusView():null}guiPlotName(t){return this.properties().childs().inputs.childs().symbol.value()}canOverrideMinTick(){return!0}canBeHiddenByGlobalFlag(){return!1}valuesProvider(){return new x(this,this.model())}statusProvider(t){return new L(this,this._model.properties().childs().scalesProperties.childs().textColor)}_createViews(){this._legendView||(this._legendView=new D(this,this._model)),this._dataWindowView||(this._dataWindowView=new I(this,this._model)),this._statusView||(this._statusView=new T.StudyStatusView(this)),super._createViews()}_showLastValueOnPriceScale(){return this._model.properties().childs().scalesProperties.childs().showSeriesLastValue.value()}_onCurrencyChanged(){"alwaysOff"!==(0,o.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this.isStarted()&&this._tryChangeInputs(),this._currencyChanged.fire()}_onUnitChanged(){"alwaysOff"!==(0,o.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this._model.unitConversionEnabled()&&this.isStarted()&&this._tryChangeInputs(),this._unitChanged.fire()}_getSymbolObject(t){const e=super._getSymbolObject(t),s=this.currency();null!==s&&(e["currency-id"]=s);const i=this.unit();return this._model.unitConversionEnabled()&&null!==i&&(e["unit-id"]=i),e}_getSymbolForApi(t){return(0,n.symbolForApi)(this._resolvedSymbolsByInput[t]||null,t)}_onSymbolResolvingStart(){super._onSymbolResolvingStart(),this._symbolResolvingActive.setValue(!0)}_onSymbolError(){super._onSymbolError(),this._symbolResolvingActive.setValue(!1)}_onSymbolResolved(t,e,s){super._onSymbolResolved(t,e,s),this._recreatePriceFormattingDependencies();const i=e===this.symbol()?(0,n.extractSymbolNameFromSymbolInfo)(s,this.symbol()):null,r=(0,n.symbolCurrency)(s),o=(0,n.symbolUnit)(s,this._model.unitConversionEnabled());this._setSymbolCurrencyUnitInternal({symbol:null!=i?i:void 0,currency:r,unit:o},s),this._symbolResolvingActive.setValue(!1)}_changeInputsImpl(t,e){super._changeInputsImpl(t,e),this._realignLineToolsIfParamsChanged()}_createStudyOnServer(){super._createStudyOnServer(),this._realignLineToolsIfParamsChanged()}_tryCreateFormatter(){const t=this.symbolInfo();return(0,n.createSeriesFormatter)(t,this.properties().childs().minTick.value())}_titleInParts(t,e,s,i){const r=this.properties().childs().inputs.childs().symbol.value(),o=this.symbolInfo(),a=o&&o.exchange&&0!==o.exchange.length;let n;if(E&&a&&o)n=o.exchange;else if(o){if(n=o.name,A)switch(this._model.mainSeries().symbolTextSourceProxyProperty().value()){case"description":n=o.description;break;case"ticker-and-description":n=`${o.name}, ${o.description}`
}else if(a&&!i)return[n,[o.exchange]]}else n=O?"":r;return[n]}_setSymbolCurrencyUnitInternal(t,e){const{symbol:s,currency:i,unit:r}=t,o=this.properties().childs(),a=o.inputs.childs().symbol.value(),l=o.currencyId.value(),h=o.unitId.value();if(void 0!==s&&s!==a&&o.inputs.childs().symbol.setValueSilently(s),void 0!==i&&i!==l&&o.currencyId.setValueSilently(i),void 0!==r&&r!==h&&o.unitId.setValueSilently(r),e)this._resolvedSymbolsByInput[this.symbol()]=e,this._resolvedSymbols[this._getSymbolForResolve(this.symbol())]=e,this._realignToolsLastParams=null;else{const t=this.symbolInfo();null!==t&&(o.currencyId.setValueSilently((0,n.symbolCurrency)(t)),o.unitId.setValueSilently((0,n.symbolUnit)(t,this._model.unitConversionEnabled())))}o.inputs.childs().symbol.value()!==a&&o.inputs.childs().symbol.listeners().fire(o.inputs.childs().symbol),o.currencyId.value()!==l&&o.currencyId.listeners().fire(o.currencyId),o.unitId.value()!==h&&o.unitId.listeners().fire(o.unitId),this._realignLineToolsIfParamsChanged()}_realignLineToolsIfParamsChanged(){const t=this.symbol(),e=this.interval(),s=this.currency(),i=this.unit();null!==this._realignToolsLastParams&&this._realignToolsLastParams.symbol===t&&this._realignToolsLastParams.interval===e&&this._realignToolsLastParams.currency===s&&this._realignToolsLastParams.unit===i||(this._model.realignLineTools(this),this._realignToolsLastParams={symbol:t,interval:e,currency:s,unit:i})}}},71062:(t,e,s)=>{"use strict";s.d(e,{StudyOverlayBase:()=>st});var i=s(88537),r=s(41139),o=s(38456),a=s(11905),n=s(48874),l=s(38627),h=s(3653),u=s(49473),d=s(32567),c=s.n(d),p=s(15693),_=s(11688),y=s(56074),m=s(6342),v=(s(80372),s(64019)),S=s(52280),g=s(70617),f=s(59270),b=s(62325),w=s.n(b),x=s(34840),P=s(56776),I=s(98424),C=s(26281),D=s(43615);const T=_.enabled("force_exchange_as_title");class V extends I.PriceAxisView{constructor(t){super(),this._source=t}_updateRendererData(t,e,s){t.visible=!1,e.visible=!1;const i=this._source.lastValueData("close",!1);if(i.noData)return;const r=this._source.model(),o=this._source.priceScale();if(null===o)return;if(!r.isPriceScaleVisible(o))return;s.background=i.color,s.textColor=this.generateTextColor(i.color),s.coordinate=i.coordinate,s.floatCoordinate=i.floatCoordinate;const a=this._source.model().properties().childs().scalesProperties.childs();a.showSeriesLastValue.value()&&(t.text=(0,D.getCurrentModePriceText)(o,i),a.seriesLastValueMode.value()!==C.PriceAxisLastValueMode.LastPriceAndPercentageValue?t.secondLine="":t.secondLine=(0,D.getOppositeModePriceText)(o,i),t.visible=!0),e.text="",a.showSymbolLabels.value()&&(e.text=this._paneText(),e.visible=e.text.length>0)}_paneText(){let t="";const e=this._source.symbolInfo();return T?t=(0,u.displayedSymbolExchange)(e):this._source.model().properties().childs().scalesProperties.childs().showSymbolLabels.value()&&(t=(0,u.displayedSymbolName)(e)),t}}var L=s(67850);class R extends L.PriceLineAxisView{constructor(t){super(),this._study=t}_value(){return this._study.lastValueData("",!0)}_priceLineColor(t){return t}_lineWidth(){return 1}
_isVisible(){const t=this._study.model().properties().childs().scalesProperties.childs().showSeriesLastValue.value();return this._study.properties().childs().showPriceLine.value()&&t}}var k=s(45185),M=s(37689);class A{constructor(t){this._lineRenderer=new M.HorizontalLineRenderer,this._visible=!1,this._source=t}update(){if(this._visible=!1,!this._source.properties().childs().showPriceLine.value())return;const t=this._source.lastValueData("",!0);t.noData||(this._visible=!0,this._lineRenderer.setData({y:t.coordinate,color:t.color,linewidth:1,linestyle:k.LINESTYLE_DOTTED,visible:this._visible}))}renderer(){return this._visible?this._lineRenderer:null}}var E=s(93751),F=s(34906),N=s(29084),O=s(8170),H=s(56525);const B=o.CheckMobile.any();class z extends F.DataWindowView{constructor(t,e){super(),this._invalidated=!0,this._study=t,this._model=e,this._valueProvider=this._createValuesProvider(t,e),this._items=this._valueProvider.getItems().map(t=>new F.DataWindowItem(t.title,"")),this.update()}items(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items}update(){this._invalidated=!0}study(){return this._study}_updateImpl(){this._header=this._study.title();let t;this._showLastPriceAndChangeOnly()?t=this._study.data().lastIndex():(t=this._model.crossHairSource().appliedIndex(),(0,E.isNumber)(t)||(t=this._study.data().lastIndex()));const e=this._valueProvider.getValues(t);for(let t=0;t<e.length;++t){const s=e[t],i=this._items[t];i.setValue(s.value),i.setVisible(s.visible),i.setColor(s.color)}}_showLastPriceAndChangeOnly(){return B&&(null===this._model.crossHairSource().pane||(0,N.isLineToolName)(O.tool.value())||null!==this._model.lineBeingEdited())}_createValuesProvider(t,e){return new H.StudyLegendValuesProvider(t,e)}}var W=s(87236),$=s(5075),U=s(14729),Y=s(36643);class G extends z{constructor(t,e){super(t,e),this._additional=null,this._studyOverlay=t,this._backgroundColorSpawn=e.backgroundTopColor().spawn(),this._backgroundColorSpawn.subscribe(this.update.bind(this));const s=e.properties().childs().paneProperties.childs().legendProperties.childs();this._visibilityProperty=(0,U.combineProperty)((t,e)=>t||e,s.showBarChange,s.showSeriesOHLC),this._visibilityProperty.subscribe(this,this.update)}areValuesVisible(){return this._visibilityProperty.value()}additional(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional}destroy(){this._backgroundColorSpawn.destroy(),this._visibilityProperty.destroy()}_updateImpl(){super._updateImpl();{const t=(0,Y.getDataVendorString)(this._studyOverlay.symbolInfo());this._additional=t?(0,W.t)("Data Provided by")+" "+t:null}}_createValuesProvider(t,e){return new $.OverlayLegendValuesProvider(t,e)}}var q=s(13648),j=s(74715);const X=o.CheckMobile.any()&&!0,Q=_.enabled("uppercase_instrument_names"),Z=_.enabled("study_overlay_compare_legend_option"),J=(_.enabled("secondary_series_extend_time_scale"),_.enabled("hide_unresolved_symbols_in_legend")),K=!_.enabled("hide_study_overlay_legend_item"),tt=(0,a.getLogger)("Chart.StudyOverlay")
;function et(t,e){return null==t[e]}class st extends n.Study{constructor(t,e,s,i){super(t,function(t){return t.hasChild("currencyId")||t.addChild("currencyId",new(c())(null)),t.hasChild("unitId")||t.addChild("unitId",new(c())(null)),t.addExclusion("currencyId"),t.addExclusion("unitId"),t}(e),s,i),this._quotesProvider=new y.QuotesProvider,this._seriesSource=null,this._symbolResolvingActive=new(w())(!1),this._symbolHibernated=new(w())(!1),this._styleToRecover=null,this._realignToolsLastParams=null,this.m_data=new S.PlotList((0,h.seriesPlotFunctionMap)(),et),X&&this._quotesProvider.quotesUpdate().subscribe(this,this._onQuotesUpdate);const r=this.properties().childs();r.currencyId.subscribe(this,this._onCurrencyChanged),r.unitId.subscribe(this,this._onUnitChanged),r.allowExtendTimeScale.subscribe(this,this._onAllowExtendTimeScaleChanged),this._onAllowExtendTimeScaleChanged(),this._model.mainSeries().properties().childs().dividendsAdjustment.subscribe(this,()=>{this._tryChangeInputs()}),r.style.subscribe(this,this._onChartStyleChanged),r.lineStyle.childs().priceSource.subscribe(this,this._updateBarFunction),r.areaStyle.childs().priceSource.subscribe(this,this._updateBarFunction),r.baselineStyle.childs().priceSource.subscribe(this,this._updateBarFunction),this._updateBarFunction(),this._formatter=null,t.mainSeries().onIntervalChanged().subscribe(this,()=>t.realignLineTools(this))}destroy(){this._model.mainSeries().properties().childs().dividendsAdjustment.unsubscribeAll(this),this._model.mainSeries().onIntervalChanged().unsubscribeAll(this),super.destroy()}setSymbolParams(t){this._setSymbolParamsInternal(t)}symbol(){return this.properties().childs().inputs.childs().symbol.value()}setSymbol(t){this.setSymbolParams({symbol:t})}symbolInfo(){if(!this._resolvedSymbols)return null;const t=this._properties.inputs.symbol.value();if(!t)return null;let e;return e=this._model.isSnapshot()?this._resolvedSymbols.___snapshot||null:this._resolvedSymbols[this._getSymbolForResolve(t)]||null,this._model.isSnapshot()&&null===e&&(e=(0,r.getObsoleteIdeaSymbolInfo)(this._resolvedSymbols,t,this.currency()),null!==e&&(this._resolvedSymbols.___snapshot=e)),e}data(){return null===this._seriesSource?super.data():this._seriesSource.data().bars()}symbolResolved(){return this.symbolsResolved()}symbolResolvingActive(){return this._symbolResolvingActive}symbolHibernated(){return this._symbolHibernated}isVisible(){const t=super.isVisible();return this._symbolHibernated.setValue(!t),t}symbolSameAsCurrent(t){return(0,m.symbolSameAsCurrent)(t,this.symbol(),this.symbolInfo())}priceSource(){switch(this._properties.style.value()){case 2:return this._properties.lineStyle.priceSource.value();case 3:return this._properties.areaStyle.priceSource.value();case 10:return this._properties.baselineStyle.priceSource.value()}return null}barFunction(){return this._barFunction}quotes(){return this._quotesProvider.quotes()}currency(){return this._properties.currencyId.value()||null}setCurrency(t){this.setSymbolParams({currency:t})}isConvertedToOtherCurrency(){return(0,
u.isConvertedToOtherCurrency)(this.symbolInfo())}unit(){return this._properties.unitId.value()||null}setUnit(t){this.setSymbolParams({unit:t})}isConvertedToOtherUnit(){return(0,u.isConvertedToOtherUnit)(this.symbolInfo(),this._model.unitConversionEnabled())}style(){return this.properties().childs().style.value()}setStyle(t){this.setSymbolParams({style:t})}interval(){return this._model.mainSeries().interval()}setInterval(t){}symbolSource(){return this}state(t,e){const s=super.state(t,e);return this._model.unitConversionEnabled()||delete s.state.unitId,t&&((0,i.ensureDefined)(s.data).symbols={___snapshot:this.symbolInfo()||void 0}),s}symbolTitle(t,e){return this.title(!0,{},!1,t)}title(t,e,s,i){const r=this._titleInParts(t,e,s,i).join(", ");return Q?r.toUpperCase():r}titleInParts(t,e,s,i){const r=this._titleInParts(t,e,s,i).join(", ");return[Q?r.toUpperCase():r]}isStarted(){return null===this._seriesSource?super.isStarted():this._seriesSource.isStarted()}sourceId(){return null===this._seriesSource?super.sourceId():(0,i.ensureNotNull)(this._seriesSource.instanceId())}moveData(t){null===this._seriesSource?super.moveData(t):this._seriesSource.moveData(t)}firstValue(){const t=this._model.timeScale().visibleBarsStrictRange();if(null===t)return null;const e=t.firstBar();if(0===this.data().size())return this._ownFirstValue;const s=this.data().search(e,S.PlotRowSearchMode.NearestRight,1);return this._ownFirstValue=null!==s?this._barFunction(s.value):null,this._ownFirstValue}lastValueData(t,e,s){const i={noData:!0},r=this.priceScale();if(this._model.timeScale().isEmpty()||null===r||r.isEmpty()||this.data().isEmpty())return i;const o=this._model.timeScale().visibleBarsStrictRange();if(null===o)return i;const a=this.properties().childs();if(!a.visible.value())return i;const n=this.nearestIndex(o.lastBar(),S.PlotRowSearchMode.NearestLeft,1);if(void 0===n)return i;const l=this.firstValue();if(null===l)return i;const h=this._lastNonEmptyPlotRow(4),u=null!==h&&o.contains(h.index),d=null!==h?h.value:null,c=e||u?d:this.data().valueAt(n);if(null===c)return i;const p=this._barFunction(c);if(!(0,g.isNumber)(p))return i;const _=r.priceToCoordinate(p,l);let y;switch(a.style.value()){case 0:y=c[1]<=c[4]?a.barStyle.childs().upColor.value():a.barStyle.childs().downColor.value();break;case 1:case 9:y=c[1]<=c[4]?a.candleStyle.childs().upColor.value():a.candleStyle.childs().downColor.value();break;case 2:y=a.lineStyle.childs().color.value();break;case 3:y=a.areaStyle.childs().color1.value();break;case 10:{const t=a.baselineStyle.childs();y=_<Math.round(r.height()*(Math.abs(100-t.baseLevelPercentage.value())/100))?t.topLineColor.value():t.bottomLineColor.value();break}default:throw new Error("Not supported overlay style")}const m={...r.getFormattedValues(p,l,!0),noData:!1,floatCoordinate:_,coordinate:_,color:y};return s&&(m.price=p),m}priceRange(t,e){if(!(0,g.isInteger)(t))return tt.logDebug("priceRange: incorrect startBar"),null;if(!(0,g.isInteger)(e))return tt.logDebug("priceRange: incorrect endBar"),null;if(0===this.data().size())return null
;const s=this.priceSource();let i;i=null!==s?this.data().minMaxOnRangeCached(t,e,[{name:s,offset:0}]):this.data().minMaxOnRangeCached(t,e,[{name:"low",offset:0},{name:"high",offset:0}]);const r=null!==i?new f.PriceRange(i.min,i.max):null;return this._postProcessPriceRange(r)}bars(){return this.data()}open(t){return(0,i.ensureNotNull)(this.bars().valueAt(t))[1]}high(t){return(0,i.ensureNotNull)(this.bars().valueAt(t))[2]}low(t){return(0,i.ensureNotNull)(this.bars().valueAt(t))[3]}close(t){return(0,i.ensureNotNull)(this.bars().valueAt(t))[4]}hl2(t){return(this.high(t)+this.low(t))/2}hlc3(t){return(this.high(t)+this.low(t)+this.close(t))/3}ohlc4(t){return(this.open(t)+this.high(t)+this.low(t)+this.close(t))/4}canBeHiddenByGlobalFlag(){return!1}start(t,e){var s;this._formatter=null,super.start(t,e),null===(s=this.priceScale())||void 0===s||s.updateFormatter(),X&&this._setQuotesSymbol(this.symbol())}stop(t){super.stop(t),this._quotesProvider.setQuotesSessionSymbol(null)}formatter(){return this._formatter||this._recreateFormatter(),(0,i.ensureNotNull)(this._formatter)}statusView(){return K?super.statusView():null}moveItem(t,e,s){if(10===this.style()&&0===e){const e=(0,i.ensureNotNull)(this.priceScale()),s=this.properties().childs().baselineStyle,r=e.height(),o=100-t.y/r*100,a=o<0?0:Math.round(10*o)/10;s.childs().baseLevelPercentage.setValue(Math.max(Math.min(a,100),0))}}_tryCreateFormatter(){return(0,u.createSeriesFormatter)(this.symbolInfo(),this.properties().childs().minTick.value())}_onCurrencyChanged(){"alwaysOff"!==(0,l.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this.isStarted()&&this._tryChangeInputs(),this._currencyChanged.fire()}_onUnitChanged(){"alwaysOff"!==(0,l.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this._model.unitConversionEnabled()&&this.isStarted()&&this._tryChangeInputs(),this._unitChanged.fire()}_getSymbolObject(t){const e=super._getSymbolObject(t),s=this.currency();null!==s&&(e["currency-id"]=s);const i=this.unit();return this._model.unitConversionEnabled()&&null!==i&&(e["unit-id"]=i),e.adjustment=this._model.mainSeries().properties().childs().dividendsAdjustment.value()?"dividends":"splits",e}_getSymbolForApi(t){return(0,u.symbolForApi)(this._resolvedSymbolsByInput[t]||null,t)}_onSymbolResolvingStart(){super._onSymbolResolvingStart(),this._symbolResolvingActive.setValue(!0)}_onSymbolError(){super._onSymbolError(),this._symbolResolvingActive.setValue(!1)}_onSymbolResolved(t,e,s){super._onSymbolResolved(t,e,s),this._recreatePriceFormattingDependencies();const i=e===this.symbol()?(0,u.extractSymbolNameFromSymbolInfo)(s,this.symbol()):null,r=(0,u.symbolCurrency)(s),o=(0,u.symbolUnit)(s,this._model.unitConversionEnabled());if(this._setSymbolParamsInternal({symbol:null!=i?i:void 0,currency:r,unit:o},s),X){const t=this.getSymbolString(this._getSymbolForApi(this.symbol()));this._setQuotesSymbol(t)}this._checkStyle(),this._symbolResolvingActive.setValue(!1)}_changeInputsImpl(t,e){super._changeInputsImpl(t,e),this._realignLineToolsIfParamsChanged()}
_setQuotesSymbol(t){const e=this.symbolInfo(),s=(0,u.extractSymbolNameFromSymbolInfo)(e,t),i=s&&this.getSymbolString(s);this._quotesProvider.setQuotesSessionSymbol(i)}_createViews(){this._priceAxisViews=[];const t=new V(this);this._priceAxisViewsBase=[t];const e=new R(this);this._priceLinesAxisViews=[e],this._paneViews=[],this._labelPaneViews=[];let s=null,r=null;switch(this._properties.style.value()){case 0:r=new j.SeriesBarsPaneView(this,this._model);break;case 1:r=new j.SeriesCandlesPaneView(this,this._model);break;case 9:r=new j.SeriesHollowCandlesPaneView(this,this._model);break;case 2:r=new j.SeriesLinePaneView(this,this._model);break;case 3:r=new j.SeriesAreaPaneView(this,this._model);break;case 10:{r=new j.SeriesBaselinePaneView(this,this._model);const t=this._properties.childs().baselineStyle.childs();s=new P.SeriesWaterlinePaneView({paneHeight:()=>(0,i.ensureNotNull)(this.priceScale()).height(),color:()=>t.baselineColor.value(),baseLevelPercentage:()=>t.baseLevelPercentage.value()});break}}r&&this._paneViews.push(r),null!==s&&this._paneViews.push(s),this._paneViews.push(new A(this)),this._dataWindowView||(this._dataWindowView=new z(this,this._model)),this._legendView||(this._legendView=new G(this,this._model)),this._statusView||(this._statusView=new x.StudyStatusView(this)),this._priceAxisViews=[...this._priceAxisViewsBase],this._labelPaneViews.push(new q.PanePriceAxisView(t,this,this._model))}_createStudyOnServer(){null===this._seriesSource?super._createStudyOnServer():this._modifyStudyOnServer((0,i.ensureDefined)(this._inputs)),this._realignLineToolsIfParamsChanged()}_modifyStudyOnServer(t){null===this._seriesSource?super._modifyStudyOnServer(t):(this._seriesSource.modifySeries((0,p.decodeExtendedSymbol)(t.symbol),(0,v.getServerInterval)(this._series.properties().childs().interval.value())),this._seriesSource.isStarted()||this._seriesSource.start())}_stopStudyOnServer(){null===this._seriesSource?super._stopStudyOnServer():this._seriesSource.stop()}_titleInParts(t,e,s,i){const r=this.properties().childs().inputs.childs().symbol.value(),o=this.symbolInfo();let a;if(o){if(a=o.name,Z){const t=this._model.mainSeries().symbolTextSourceProxyProperty().value();"description"===t?a=o.description:"ticker-and-description"===t&&(a=`${o.name}, ${o.description}`)}if(!i&&o.exchange&&0!==o.exchange.length)return[a,[o.exchange]]}else a=J?"":r;return[a]}_onAllowExtendTimeScaleChanged(){const t=this.isStarted();if(t&&this.stop(!0),null!==this._seriesSource){const t=this._seriesSource.dataEvents();t.seriesError().unsubscribeAll(this),t.loading().unsubscribeAll(this),t.completed().unsubscribeAll(this),t.dataUpdated().unsubscribeAll(this),this._seriesSource.destroy()}this._seriesSource=null,t&&this.start(!0)}_convertSeriesErrorToStudy(t){return{error:t.error,ctx:t.ctx,solution_id:t.solution_id}}_setSymbolParamsInternal(t,e){const{symbol:s,currency:i,unit:r,style:o}=t,a=this.properties().childs(),n=a.inputs.childs().symbol.value(),l=a.currencyId.value(),h=a.unitId.value(),d=a.style.value()
;if(void 0!==s&&s!==n&&a.inputs.childs().symbol.setValueSilently(s),void 0!==i&&i!==l&&a.currencyId.setValueSilently(i),void 0!==r&&r!==h&&a.unitId.setValueSilently(r),void 0!==o&&a.style.setValueSilently(o),e)this._resolvedSymbolsByInput[this.symbol()]=e,this._resolvedSymbols[this._getSymbolForResolve(this.symbol())]=e,this._realignToolsLastParams=null;else{const t=this.symbolInfo();null!==t&&(a.currencyId.setValueSilently((0,u.symbolCurrency)(t)),a.unitId.setValueSilently((0,u.symbolUnit)(t,this._model.unitConversionEnabled())))}a.inputs.childs().symbol.value()!==n&&a.inputs.childs().symbol.listeners().fire(a.inputs.childs().symbol),a.currencyId.value()!==l&&a.currencyId.listeners().fire(a.currencyId),a.unitId.value()!==h&&a.unitId.listeners().fire(a.unitId),a.style.value()!==d&&a.style.listeners().fire(a.style),this._checkStyle(),this._realignLineToolsIfParamsChanged()}_updateBarFunction(){var t;const e=null!==(t=this.priceSource())&&void 0!==t?t:"close";this._barFunction=(0,h.barFunction)(e)}_onChartStyleChanged(){var t;this._updateBarFunction(),(null===(t=this._styleToRecover)||void 0===t?void 0:t.originalStyle)!==this.style()&&(this._styleToRecover=null)}_checkStyle(){const t=this.style();(0,u.isCloseBasedSymbol)(this.symbolInfo())?(0,u.isSingleValueBasedStyle)(t)||(this.setStyle(2),this._styleToRecover={correctedStyle:this.style(),originalStyle:t}):null!==this._styleToRecover&&(this.setStyle(this._styleToRecover.originalStyle),this._styleToRecover=null)}_realignLineToolsIfParamsChanged(){const t=this.symbol(),e=this.interval(),s=this.currency(),i=this.unit();null!==this._realignToolsLastParams&&this._realignToolsLastParams.symbol===t&&this._realignToolsLastParams.interval===e&&this._realignToolsLastParams.currency===s&&this._realignToolsLastParams.unit===i||(this._model.realignLineTools(this),this._realignToolsLastParams={symbol:t,interval:e,currency:s,unit:i})}}},49156:(t,e,s)=>{"use strict";s.d(e,{StudyStrategy:()=>M});var i=s(88537),r=s(62325),o=s.n(r),a=s(48874),n=s(11688),l=s(91055),h=s(86441),u=s(24377),d=s(18718),c=s(59081),p=s(24112),_=s(66915);function y(t,e,s){return s?Math.sign(t)*(Math.round(Math.abs(t))+e):Math.round(t)+e}class m{constructor(t,e){this._data=t,this._textWidths=e}draw(t,e){const s=e.pixelRatio;void 0!==this._textWidths.rendererParams&&(0,c.areEqualPaneRenderParams)(this._textWidths.rendererParams,e)||(this._textWidths.rendererParams=e,this._textWidths.width.clear());const i=this._data;t.lineJoin="miter",t.miterLimit=Math.round(2*s),t.strokeStyle=i.bgColor,t.lineWidth=Math.max(2,(0,_.ceiledEven)(2*s));for(const e of i.items){t.beginPath();const r="lower"===e.pos;t.save();const o=Math.round(i.orderArrow.vMargin*s);t.translate(0,r?o:-o),this._drawOrderArrow(t,e.orderPoint,i.orderArrow,i.exitLineWidth,r,s),t.restore(),t.save(),this._drawPriceArrow(t,e.pricePoint,i.priceArrow,!r,s),t.restore(),t.closePath(),t.stroke(),t.fillStyle=i.exitLineWidth?i.exitColor:"buy"===e.type?i.buyColor:i.sellColor,t.fill()}const r=i.text;r.visible&&(0,p.drawScaled)(t,s,()=>{t.font=r.fontSize+"px "+r.font,
t.textAlign="center",t.textBaseline="top",t.fillStyle=i.labelColor,t.strokeStyle=i.bgColor,t.lineWidth=Math.min(2,Math.floor(2*s));for(const e of i.items){const s="lower"===e.pos;t.save();const o=s?1:-1,a=i.orderArrow;t.translate(0,(a.height+a.vMargin+i.exitLineWidth)*o);const n=s?r.vMargin:-r.fontSize-r.vMargin,l=o*(r.fontSize+r.lineSpacing);if(e.label&&(t.translate(0,n),t.strokeText(e.label,Math.ceil(e.orderPoint.x),e.orderPoint.y),t.fillText(e.label,Math.ceil(e.orderPoint.x),e.orderPoint.y),this._textWidths.width.has(e.label)||this._textWidths.width.set(e.label,t.measureText(e.label).width)),e.qty){const s=Boolean(e.label)?l:n;t.translate(0,s),t.strokeText(e.qty,Math.ceil(e.orderPoint.x),e.orderPoint.y),t.fillText(e.qty,Math.ceil(e.orderPoint.x),e.orderPoint.y),this._textWidths.width.has(e.qty)||this._textWidths.width.set(e.qty,t.measureText(e.qty).width)}t.restore()}})}hitTest(t){const e=this._testOrderArrows(t),s=!e&&this._data.text&&this._testText(t);return e||s?new d.HitTestResult(d.HitTestResult.REGULAR):null}_drawOrderArrow(t,e,s,i,r,o){let a,n;r?(t.rotate(Math.PI),a=-e.x,n=-e.y):(a=e.x,n=e.y),n-=s.height+i;const l=Math.max(1,Math.floor(o)),h=l%2?.5:0,u=r?"floor":"ceil";a=y(a*o,h,r),n=Math.round((Math[u](n)+.5)*o),t.translate(a,n);const d=(0,_.ceiledEven)(s.width*o)/2+h,c=(0,_.ceiledEven)(s.tailWidth*o)/2+h,p=Math.round(s.tailHeight*o);if(t.moveTo(-c,0),t.lineTo(c,0),t.lineTo(c,p),t.lineTo(d,p),t.lineTo(0,Math.round(s.height*o)),i){const e=Math.floor(l/2);t.lineTo(d+e,Math.round(s.height*o)),t.lineTo(d+e,Math.round((s.height+i)*o)),t.lineTo(-d-e,Math.round((s.height+i)*o)),t.lineTo(-d-e,Math.round(s.height*o)),t.lineTo(0,Math.round(s.height*o))}t.lineTo(-d,p),t.lineTo(-c,p),t.lineTo(-c,0),t.lineTo(c,0)}_drawPriceArrow(t,e,s,i,r){let o,a;i?(t.rotate(Math.PI),o=-e.x,a=-e.y):(o=e.x,a=e.y);const n=Math.max(1,Math.floor(r)),l=n%2?.5:0;o=y(o*r,l,i)-n,a=y(a*r,l,i);const h=(0,_.ceiledEven)(2*s.width*r)/2,u=-(Math.round(s.width*r)+l);t.translate(o,a),t.moveTo(0,0),t.lineTo(u,-h),t.lineTo(u,h),t.lineTo(0,0),t.lineTo(u,-h)}_testOrderArrows(t){const e=this._data,s=e.orderArrow.width/2;for(const i of e.items){const r=i.orderPoint;if(t.x<r.x-s||t.x>r.x+s)continue;const o="lower"===i.pos;let a=e.orderArrow.height+e.exitLineWidth;o||(a=-a);const n=r.y+(o?e.orderArrow.vMargin:-e.orderArrow.vMargin),l=Math.min(n,n+a),h=Math.max(n,n+a);if(!(t.y<l||t.y>h))return!0}return!1}_testText(t){const e=this._data,s=e.text;if(!s.visible)return!1;for(const i of e.items){const r=i.orderPoint,o="lower"===i.pos;let a=e.orderArrow.vMargin+e.orderArrow.height+e.exitLineWidth;o||(a=-a);const n=r.y+a,l=(i.label?1:0)+(i.qty?1:0);let h=s.vMargin+s.fontSize*l+s.lineSpacing*Math.max(0,l-1);o||(h=-h);const u=Math.min(n,n+h),d=Math.max(n,n+h);if(t.y<u||t.y>d)continue;const c=i.label&&i.qty?o&&t.y<n+s.fontSize||!o&&t.y>n-s.fontSize?i.label:i.qty:i.label||i.qty,p=this._textWidths.width.get(c);if(!(void 0===p||t.x<r.x-p/2||t.x>r.x+p/2))return!0}return!1}}var v=s(88427),S=s(52280),g=s(17611);const f={BuyColor:l.colorsPalette["color-tv-blue-500"],
SellColor:"#FF1744",ExitColor:"#D500F9",LabelDarkColor:"#B2B5BE",LabelLightColor:l.colorsPalette["color-mirage-1"]};function b(t){return!1===t.e?"exit":t.b?"entryBuy":"entrySell"}function w(t){return t.b?"buy":"sell"}function x(t,e){return e?!t.b:t.b}function P(t,e){return x(t,e)?"lower":"upper"}function I(t,e,s){let i=t[e].get(s);return void 0===i&&(i=0,t[e].set(s,i)),i}function C(t,e,s,r){const o=(0,i.ensureDefined)(t[e].get(s));t[e].set(s,o+r)}function D(t,e){return e&&(t.c||t.id||"Untitled")||""}function T(t,e){return e&&(t.b?"+":"-")+t.q||""}function V(t,e,s){return(0,i.ensureNotNull)(t.b?s.low(e):s.high(e))}function L(t,e){return("exit"===b(t)?2:0)+e.vMargin+e.height}class R{constructor(t,e,s){this._invalidated=!0,this._textWidths={width:new Map},this._study=t,this._series=e,this._model=s,this._orderArrow={vMargin:11,width:10,height:15,tailWidth:2,tailHeight:10},this._priceArrow={width:5},this._text={vMargin:7,font:v.CHART_FONT_FAMILY,fontSize:12,lineSpacing:2,visible:!0},this._items={entryBuy:[],entrySell:[],exit:[]},this._study.properties().strategy.orders.subscribe(this,this.update)}update(){this._invalidated=!0}clearItems(){this._items.entryBuy=[],this._items.entrySell=[],this._items.exit=[]}renderer(t,e){const s=this._study.properties();if(!s.visible.value()||!s.strategy.orders.visible.value())return null;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items.entryBuy.length||this._items.entrySell.length||this._items.exit.length){const t=new g.CompositeRenderer;return this._items.entryBuy.length&&t.append(this._strategyOrdersRenderer(this._items.entryBuy,!1)),this._items.entrySell.length&&t.append(this._strategyOrdersRenderer(this._items.entrySell,!1)),this._items.exit.length&&t.append(this._strategyOrdersRenderer(this._items.exit,!0)),t}return null}_strategyOrdersRenderer(t,e){const s=this._model.backgroundColor().value(),i="black"===(0,u.rgbToBlackWhiteString)((0,u.parseRgb)(s),150);return new m({items:t,buyColor:f.BuyColor,sellColor:f.SellColor,exitColor:f.ExitColor,labelColor:i?f.LabelDarkColor:f.LabelLightColor,bgColor:s,orderArrow:this._orderArrow,exitLineWidth:e?2:0,priceArrow:this._priceArrow,text:this._text},this._textWidths)}_updateImpl(){this.clearItems();const t=this._study.ordersData();if(!t||!t.length)return;const e=this._model.timeScale(),s=this._series.priceScale(),r=e.visibleBarsStrictRange();if(e.isEmpty()||s.isEmpty()||null===r)return;const o=this._study.barsIndexes(),a=this._series.nearestIndex(r.firstBar(),S.PlotRowSearchMode.NearestRight),n=this._series.nearestIndex(r.lastBar(),S.PlotRowSearchMode.NearestLeft);if(void 0===a||void 0===n)return;const[l,u]=function(t,e,s,i){const r=[],o=[];for(let a=0;a<t.length;++a){const n=i[a];n<e||n>s||(r.push(t[a]),o.push(n))}return[r,o]}(t,a,n,o),[d,c]=this._labelAndQtyVisibility(l.length),p=d||c,_=this._textHeight(d,c),y=(0,i.ensureNotNull)(this._series.firstValue()),m=s.isInverted(),v={upper:new Map,lower:new Map};for(let t=0;t<l.length;t++){const i=l[t],r=x(i,m),o=u[t],a=e.indexToCoordinate(o),n=V(i,o,this._series)
;let p=s.priceToCoordinate(n,y);const S=P(i,m),g=I(v,S,o);p+=r?g:-g;C(v,S,o,L(i,this._orderArrow)+_);const f=s.priceToCoordinate(i.p,y),R=b(i);this._items[R].push({orderPoint:new h.Point(a,p),pricePoint:new h.Point(a,f),label:D(i,d),qty:T(i,c),pos:S,type:w(i)})}this._text.visible=p}_labelAndQtyVisibility(t){const e=this._model.timeScale();if(e.barSpacing()<10&&this._orderArrow.width*t*2>e.width())return[!1,!1];const s=this._study.properties();return[s.strategy.orders.showLabels.value(),s.strategy.orders.showQty.value()]}_textHeight(t,e){return t||e?t&&e?2*this._text.fontSize+this._text.vMargin+this._text.lineSpacing:this._text.fontSize+this._text.vMargin:0}}const k=["strategy_props"];class M extends a.Study{constructor(t,e,s,i){super(t,e,s,i),this.watchedData=new(o()),this._barsIndexes=[],this._srcBarsIndexes=[],this._reportDataBuffer=null,this._reportData=null,this._activeState=!1,e.childs().visible.subscribe(this,this._processChangeVisibility),this._processChangeVisibility()}destroy(){this.model().removeStrategySource(this,0),super.destroy()}hasStateForAlert(){return(0,n.enabled)("alerts")}inputsForAlertState(){const t=this.inputs();return(0,i.ensureNotNull)(this._metaInfo).inputs.forEach(e=>{const s=t[e.id];s&&e.internalID&&(s.internalID=e.internalID)}),t}onData(t){t.method&&"data_update"!==t.method&&this.watchedData.setValue({method:t.method}),super.onData(t)}reportData(){return this._reportData}ordersData(){var t,e;return null!==(e=null===(t=this._reportData)||void 0===t?void 0:t.filledOrders)&&void 0!==e?e:null}barsIndexes(){return this._barsIndexes}clearData(){super.clearData(),this._reportDataBuffer=null,this._reportData=null,this._strategyOrdersPaneView&&this._strategyOrdersPaneView.clearItems()}strategyOrdersPaneView(){return this.isSourceHidden()?null:this._strategyOrdersPaneView}restoreData(t){super.restoreData(t);const e=t;this.model().addStrategySource(this,0),e.reportData&&e.barsIndexes&&(this._reportData=e.reportData,this._barsIndexes=e.barsIndexes,this.watchedData.setValue({method:"data_update",nonSeriesData:{indexes_replace:!1,data:{report:this._reportData}}})),e.activeState&&(this._activeState=!0)}activeState(){return this._activeState}updateAllViews(){super.updateAllViews(),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.update()}state(t,e){const s=super.state(t,e);return t&&this._reportData&&this._barsIndexes&&(s.data||(s.data={}),s.data.reportData=this._reportData,s.data.barsIndexes=this._barsIndexes,s.data.activeState=this.model().activeStrategySource().value()===this),s}isHibernationAllowed(){return!1}_onDataUpdated(t,e,s){var r,o;let a=e&&!e.indexes_replace&&e.data&&e.data.report;a?(e&&!e.indexes_replace&&e.isUpdate&&this._reportDataBuffer&&(a={...this._reportDataBuffer,...a}),this._reportData={...this._reportDataBuffer,...a},this._reportDataBuffer=this._reportData,this.watchedData.setValue({method:"data_update",nonSeriesData:(0,i.ensureNotNull)(e)})):this.watchedData.setValue({method:"data_update",nonSeriesData:{indexes_replace:!1,data:{report:this._reportDataBuffer}}})
;const n=!(!e||!e.indexes_replace);("nochange"!==s&&s.length>0||(null!==(o=null===(r=this._reportData)||void 0===r?void 0:r.filledOrders.length)&&void 0!==o?o:0)!==this._barsIndexes.length)&&(a||n)&&this._collateBarsIndexes(Array.isArray(s)?s:this._srcBarsIndexes),super._onDataUpdated(t,e,s)}_createViews(){super._createViews(),this._strategyOrdersPaneView=new R(this,this._series,this._model)}_titleInputs(t,e){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,asObject:!1,skippedGroups:k,noExchanges:t,skipColorInputs:!0,skipTimeInputs:!0})}_getTelemetryObjectName(){return"strategy"}_getTelemetryAdditionalData(){return{symbol:this.series().actualSymbol(),resolution:this.series().interval()}}_collateBarsIndexes(t){var e;this._srcBarsIndexes=t;const s=null===(e=this._reportData)||void 0===e?void 0:e.filledOrders;if(s&&s.length){this._barsIndexes.length=0;for(let e=0;e<s.length;e++)this._barsIndexes[e]=t[s[e].tm]}}_processChangeVisibility(){this.properties().childs().visible.value()?this.model().addStrategySource(this,0):this.model().removeStrategySource(this,0)}}},85584:(t,e,s)=>{"use strict";var i=s(88537).ensureNotNull,r=s(86441).Point,o=s(15653).TextRenderer,a=s(59251).NonSeriesStudy,n=s(21555).TrendLineRenderer,l=s(18718).HitTestResult,h=s(17611).CompositeRenderer,u=s(21386),d=s(63985).LineEnd,c=s(88427).CHART_FONT_FAMILY;class p{constructor(t,e){this._model=t,this._source=e,this._waves=[],this._highlights=[],this._retracements=[],this._invalidated=!0}update(){this._invalidated=!0}updateImpl(){if(this._waves=[],this._highlights=[],this._retracements=[],this._source.customData()&&this._source.properties().visible.value()){var t=this._source.customData().waves,e=this._source._indexes,s=this._model.timeScale(),o=this._source.priceScale(),a=this._model.mainSeries(),n=a.firstBar();if(o&&!o.isEmpty()&&!s.isEmpty()&&n&&t){for(var l=s.visibleBarsStrictRange(),h=l.lastBar(),u=l.firstBar(),d=["m0StartIndex","startIndex","endIndex","m2EndIndex","m3EndIndex"],c=a.firstValue(),_=0;_<t.length;_++)if(t[_]){for(var y=[],m=0;m<5;m++){var v=e[t[_][d[m]]];if(!isFinite(v))break;y.push(v)}if(0!==y.length&&!(y[0]>h||y[y.length-1]<u)){var S=+t[_].size;if(isFinite(S)){var g="level"+S,f=this._source.properties()[g];if(f.visible.value()){var b=parseInt(t[_].direction,10),w=[];w.dir=b,w.prices=[],w.orig_prices=[];for(var x=0;x<y.length;x++){if(void 0!==y[x]){var P={};if((R=y[x])<(n=i(a.bars().first())).index)continue;if(P.x=s.indexToCoordinate(R),null===(L=a.bars().valueAt(R))){w.push(void 0),w.prices.push(void 0),w.orig_prices.push(void 0),b=-b;continue}var I,C=1===b?L[TradingView.HIGH_PLOT]:L[TradingView.LOW_PLOT];if(w.orig_prices.push(C),w.prices.push(C),P.y=o.priceToCoordinate(C,c),P.label=p._wave5Labels[S][x],P.align=-1===b?"top":"bottom",P.color=f.color.value(),delete P.backgroundColor,w.id="wave_"+_,this._source===this._model.hoveredSource())(I=this._model.lastHittestData())&&I.wave&&I.wave.id===w.id&&(P.color="#FFFFFF",P.backgroundColor=f.color.value());P.fontsize=p._fontSizes[S],
P._textCache={widths:[]},P.wave=w,w.push(P)}else w.push(void 0),w.prices.push(void 0);b=-b}w.inds=y,w.dir=b,w.color=f.color.value(),this._waves.push(w)}}}}if(this._source===this._model.hoveredSource())if(I=this._model.lastHittestData()){y=I.wave.inds,b=-I.wave.dir;var D=I.backgroundColor?I.backgroundColor:I.color,T=I.wave.orig_prices,V=null;for(x=0;x<y.length;x++){if(void 0!==y[x]){var L,R=y[x],k=s.indexToCoordinate(R);if(null===(L=a.bars().valueAt(R))){b=-b;continue}C=T[x];var M=o.priceToCoordinate(C,c),A=new r(k,M);V&&this._highlights.push({points:[V,A],color:D}),V=A}b=-b}if(void 0!==T[1]&&void 0!==T[2]){var E=T[1],F=T[2],N=T[3],O=T[0];this._retracements.push({y:o.priceToCoordinate(E,c),x:0,extendLeft:!0,extendRight:!0,color:D,text:"",style:CanvasEx.LINESTYLE_SOLID}),this._retracements.push({y:o.priceToCoordinate(E,c),x:0,extendLeft:!0,extendRight:!0,color:D,text:"",style:CanvasEx.LINESTYLE_SOLID});b=F-E;if(void 0!==T[0]){C=E+(H=(O-E)/b)*b,k=s.indexToCoordinate(y[0]);this._retracements.push({y:o.priceToCoordinate(C,c),x:k,extendLeft:!1,extendRight:!0,color:D,text:""+H.toFixed(3),style:CanvasEx.LINESTYLE_DASHED})}if(void 0!==N){var H;C=F-(H=(F-N)/b)*b,k=s.indexToCoordinate(y[3]);this._retracements.push({y:o.priceToCoordinate(C,c),x:k,extendLeft:!0,extendRight:!1,color:D,text:""+H.toFixed(3),style:CanvasEx.LINESTYLE_DASHED})}}}}}}renderer(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);for(var t=new h,e=this.CIRCLE_SIZE,s={},i=0;i<this._waves.length;i++)for(var a=this._waves[i],p=0;p<a.length;p++){var _=a[p];if(void 0!==_){var y,m;"top"===_.align?(y=_.y+4,s["top_"+_.x]?(y+=s["top_"+_.x]*e,s["top_"+_.x]=s["top_"+_.x]+1):s["top_"+_.x]=1,m=y+e):(y=_.y-e-4,s["bottom_"+_.x]?(y-=s["bottom_"+_.x]*e,s["bottom_"+_.x]=s["bottom_"+_.x]+1):s["bottom_"+_.x]=1,m=y+e);var v={};v.points=[new r(_.x,(y+m)/2)],v.text=_.label,v.color=_.color,v.backgroundColor=_.backgroundColor,v.font="Verdana",v.bold=!0,v.offsetX=0,v.offsetY=0,v.vertAlign="middle",v.horzAlign="center",v.fontsize=_.fontsize;var S=new l(l.REGULAR,_);t.append(new o(v,S))}}for(i=0;i<this._highlights.length;i++){var g=this._highlights[i],f={points:g.points,width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:u.generateColor(g.color,50),linewidth:3,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:d.Circle,rightend:d.Circle};(b=new n).setData(f),t.append(b)}for(i=0;i<this._retracements.length;i++){var b,w=this._retracements[i];f={points:[new r(w.x+1,w.y),new r(w.x,w.y)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:u.generateColor(w.color,50),linewidth:1,linestyle:w.style,extendleft:w.extendLeft,extendright:w.extendRight,leftend:d.Normal,rightend:d.Normal};(b=new n).setData(f),t.append(b);var x={points:[new r(w.x,w.y)],text:this._retracements[i].text,backgroundColor:"#606060",color:"#FFFFFF",vertAlign:"middle",horzAlign:"center",font:c,offsetX:w.extendRight?-50:50,offsetY:2,fontsize:12};t.append(new o(x))}return t}}p.prototype.CIRCLE_SIZE=16,
p._wave5Labels=[["i","ii","iii","iv","v"],["(i)","(ii)","(iii)","(iv)","(v)"],["((i))","((ii))","((iii))","((iv))","((v))"],["1","2","3","4","5"],["(1)","(2)","(3)","(4)","(5)"],["((1))","((2))","((3))","((4))","((5))"],["I","II","III","IV","V"],["(I)","(II)","(III)","(IV)","(V)"],["((I))","((II))","((III))","((IV))","((V))"]],p._wave3Labels=[["a","b","c"],["A","B","C"]],p._fontSizes=[10,10,10,11,11,11,12,12,12];e.study_ElliottWave=class extends a{margins(){return[.1,.1]}isVisible(){if(!this.properties().visible.value()||!this.isActualInterval())return!1;for(var t=0;t<=8;t++)if(this.properties()["level"+t].visible.value())return!0;return!1}_createViews(){super._createViews(),this._setPaneViews([new p(this.model(),this)])}}},71829:(t,e,s)=>{"use strict";var i=s(35357),r=s(48874).Study,o=s(34840).StudyStatusView,a=s(34906).DataWindowView,n=s(10637),l=n.DividendsPaneView,h=n.SplitsPaneView,u=n.EarningsPaneView,d=s(70617).isNumber,c=s(76745).INVALID_TIME_POINT_INDEX,p=s(34953).sortSourcesPreOrdered,_=p.Dividends,y=p.Splits,m=p.Earnings;class v extends r{destroy(){this._paneView.destroy(),super.destroy()}_createViews(){this._paneViews=[this._paneView],this._priceAxisViews=[],this._dataWindowView||(this._dataWindowView=new a),this._legendView=null,this._statusView||(this._statusView=new o(this,this._model.properties().scalesProperties.textColor))}onClickOutside(t){this._paneView.onClickOutside(t)}preferNoScale(){return!0}showInObjectTree(){return!1}isSavedInStudyTemplates(){return!1}isRemovedByStudyTemplates(){return!1}removeByRemoveAllStudies(){return!1}isDraggable(){return!1}copiable(){return!1}statusView(){return null}hasStateForAlert(){return!1}start(){super.start(),this._model.mainSeries().dataEvents().symbolResolved().subscribe(this,this._initPlotStash),this._initPlotStash()}stop(){super.stop(),this._model.mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._initPlotStash)}isSavedInChart(t){return t}isSpeciallyZOrderedSource(){return!0}isUserDeletable(){return!1}_initPlotStash(){this._plotStash={}}_updatePlotStash(t,e){if(!this._restartRequired&&this._plotStash){var s=t.value.slice(),i=s.shift(),r=String(i);e?this._plotStash[r]?String(this._plotStash[r])!==String(s)&&(this._restartRequired=!0):this._plotStash[r]=s:this._plotStash[r]&&(this._restartRequired=!0)}}transformData(t){for(var e,s,i=t.length-1;i>=0;--i)s=(e=t[i]).index!==c&&this.isValid(e.value),this._updatePlotStash(e,s),s||t.splice(i,1)}isValid(t){throw new Error("Not Implemented")}restoreData(t){this.transformData(t.data),t.end=t.data.length,super.restoreData(t)}canHaveChildren(){return!1}isIncludedInAutoScale(){return!1}isCurrencySource(){return!1}_showTooltip(t,e){var i=this._model,r=this._model.timeScale(),o=[r.onScroll(),r.barSpacingChanged(),i.mainSeries().onSymbolIntervalChanged()],a=this.onClickOutside.bind(this),n=this._paneView.clearLastClicked.bind(this._paneView);return Promise.all([s.e(2e3),s.e(53466),s.e(26955),s.e(87995),s.e(49039)]).then(s.bind(s,42738)).then((function({showLollipopTooltip:s}){s({items:e(),position:t,
customCloseSubscriptions:o,onClickOutside:a,onCustomClose:n,showScrollFades:!0})}))}isUnitSource(){return!1}}e.ESDStudyBase=v,e.study_ESD$TV_EARNINGS=class extends v{constructor(t,e,s,i){super(t,e,s,i),this._estimatePlotRow=null}_createViews(){this._paneView=new u(this._model,this,this._showTooltip.bind(this)),super._createViews()}zorder(){return m}isValid(t){var e=t[3],s=t[4];return d(e)&&d(s)}_restorePointset(t){return{index:t.index,value:[t.tickmark,void 0,t.estimate,d(t.period)?t.period:i(t.period).unix(),d(t.date)?t.date:i(t.date).unix()]}}restoreData(t){super.restoreData(t);var e=null;if(t.estimate)e=this._restorePointset(t.estimate);else if(t.pointSets&&null==t.pointSetsVersion){if(null!==(i=this._getSymbol())){var s=i.split(":")[1].toUpperCase();t.pointSets[i]?e=this._restorePointset(t.pointSets[i]):t.pointSets[s]&&(e=this._restorePointset(t.pointSets[s]))}}else if(t.pointSets&&"1"===t.pointSetsVersion){var i;if(null!==(i=this._getSymbol())){s=i.split(":")[1].toUpperCase();t.pointSets[i]?e=t.pointSets[i].estimate:t.pointSets[s]&&(e=t.pointSets[s].estimate)}}else null!=t.estimatePlotRow&&"2"===t.pointSetsVersion&&(e=t.estimatePlotRow);this._estimatePlotRow=e}getEstimate(){return this._estimatePlotRow}_getSymbol(){var t=this._series.symbolInfo();return t?t.base_name[0].toLowerCase():null}},e.study_ESD$TV_SPLITS=class extends v{_createViews(){this._paneView=new h(this._model,this,this._showTooltip.bind(this)),super._createViews()}zorder(){return y}isValid(t){var e=t[3];return d(e)}},e.study_ESD$TV_DIVIDENDS=class extends v{_createViews(){this._paneView=new l(this._model,this,this._showTooltip.bind(this)),super._createViews()}zorder(){return _}isValid(t){var e=t[2];return d(e)}}},82294:(t,e,s)=>{"use strict";var i=s(48874).Study,r=s(5075).OverlayLegendValuesProvider,o=s(9776).OverlayStatusProvider,a=s(89627).SeriesBarColorer,n=s(71062).StudyOverlayBase;e.study_Overlay=class extends n{constructor(t,e,s,i){super(t,e,s,i),this._paneView=null;var r=this;this.properties().minTick.listeners().subscribe(null,(function(){r._recreatePriceFormattingDependencies(),r.updateAllViews(),r._model.fullUpdate()}))}_showLastValueOnPriceScale(){return this._model.properties().scalesProperties.showSeriesLastValue.value()}barColorer(){return new a(this)}_tryChangeInputs(){i.prototype._tryChangeInputs.call(this),this.m_formatter=null,this.priceScale().updateFormatter()}_onQuotesUpdate(t,e){!this._legendView||void 0===e.values.change&&void 0===e.values.change_percent||(this._legendView.update(),this._model.updateSource(this))}destroy(){this._quotesProvider.quotesUpdate().unsubscribeAll(this),this._quotesProvider.destroy(),super.destroy()}tags(){var t=[],e=this.symbolInfo();return e?t.push(e.name):this._properties.inputs.symbol.value()&&t.push(this._properties.inputs.symbol.value()),t}async _getPropertyDefinitionsViewModelClass(){return(await Promise.all([s.e(73455),s.e(38493),s.e(60607)]).then(s.bind(s,49212))).StudyOverlayDefinitionsViewModel}defaultPlotIdForAlert(){return""}changeStyles(){this.data().each((function(t,e){
e[TradingView.STYLE_PLOT]=null})),i.prototype.changeStyles.call(this)}valuesProvider(){return new r(this,this.model())}statusProvider(t){return new o(this,this.model())}}},30276:(t,e,s)=>{"use strict";var i=s(59251).NonSeriesStudy,r=s(18718).HitTestResult,o=s(17611).CompositeRenderer,a=s(80047).ScaledPaneRenderer,n=s(88427);class l extends a{constructor(t,e){super(),this._data=t,this._textCache=e}_drawImpl(t){t.textBaseline="bottom",t.font=(this._data.bold?"bold ":"normal ")+this._data.fontsize+"px "+this._data.font;var e=Math.round(t.measureText(this._data.text).width+4);this._textCache.width=e,t.translate(this._data.x+.5,this._data.y),t.strokeStyle=this._data.borderColor,t.fillStyle=this._data.backColor,t.beginPath(),t.moveTo(0,0),1===this._data.type?(t.lineTo(5,-5),t.lineTo(e/2,-5),t.lineTo(e/2,-5-this._data.fontsize),t.lineTo(-e/2,-5-this._data.fontsize),t.lineTo(-e/2,-5),t.lineTo(-5,-5),t.lineTo(0,0)):(t.lineTo(5,5),t.lineTo(e/2,5),t.lineTo(e/2,5+this._data.fontsize),t.lineTo(-e/2,5+this._data.fontsize),t.lineTo(-e/2,5),t.lineTo(-5,5),t.lineTo(0,0)),t.fill(),t.stroke(),t.fillStyle=this._data.textColor,t.textAlign="center",t.textBaseline="middle",1===this._data.type?t.fillText(this._data.text,0,-5-this._data.fontsize/2):t.fillText(this._data.text,0,5+this._data.fontsize/2)}hitTest(t){var e=this._textCache.width,s=this._data.fontsize+15,i=this._data.x-e/2,o=this._data.y;return 1===this._data.type&&(o-=s),t.x>=i&&t.x<=i+e&&t.y>=o&&t.y<=o+s?new r(r.REGULAR):null}}class h{constructor(t,e){this._model=t,this._source=e,this._pivots=[],this._textCache={},this._invalidated=!0}update(){this._invalidated=!0}updateImpl(){if(this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()){var t=this._source.customData().pivots,e=this._source._indexes,s=this._model.timeScale(),i=this._source.priceScale(),r=this._model.mainSeries(),o=r.firstValue();if(i&&!i.isEmpty()&&!s.isEmpty()&&o)for(var a=s.visibleBarsStrictRange(),n=a.firstBar(),l=a.lastBar(),h=0;h<t.length;h++)if(t[h]){var u=e[t[h].index];if(!(u<n||u>l)){var d=t[h].type,c=r.bars().valueAt(u);if(null!==c){var p=1===d?c[TradingView.HIGH_PLOT]:c[TradingView.LOW_PLOT],_=Math.round(s.indexToCoordinate(u)),y=i.priceToCoordinate(p,o);1===d?y-=s.barSpacing()/6:y+=s.barSpacing()/6+1,y=Math.round(y),this._pivots.push({x:_,y,price:i.formatPrice(p,o),type:d})}}}}}_pixelMargins(){return this._source.properties().fontsize.value()+15}topPixelMargin(){return this._pixelMargins()}bottomPixelMargin(){return this._pixelMargins()}renderer(){if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),0!==this._pivots.length){for(var t=n.CHART_FONT_FAMILY,e=this._source.properties().fontsize.value(),s=this._source.properties().borderColor.value(),i=this._source.properties().backColor.value(),r=this._source.properties().textColor.value(),a=new o,h=0;h<this._pivots.length;h++){var u=this._pivots[h],d={x:u.x,y:u.y,type:u.type,text:u.price,font:t,fontsize:e,borderColor:s,backColor:i,textColor:r},c=h
;this._textCache[c]||(this._textCache[c]={}),a.append(new l(d,this._textCache[c]))}return a}}}e.study_PivotPointsHighLow=class extends i{isVisible(){return this.properties().visible.value()&&this.isActualInterval()}_createViews(){super._createViews(),this._setPaneViews([new h(this.model(),this)])}autoScaleInfo(t,e){return{range:this._series.priceRange(t,e),topPixelMargin:this._paneViews.length>0?this._paneViews[0].topPixelMargin():0,bottomPixelMargin:this._paneViews.length>0?this._paneViews[0].bottomPixelMargin():0}}}},28128:(t,e,s)=>{"use strict";var i=s(88537).assert,r=s(70617).clone,o=s(48874).Study,a=s(52280).PlotList,n=s(23083).studyPlotFunctionMap,l=s(23083).studyEmptyPlotValuePredicate;class h{constructor(t,e,s){this._strategyPlotIndex=t,this._targetPlotIndex=e,this._startIndex=s}rebuildData(t){var e=this._targetPlotIndex+1,s=this._strategyPlotIndex+1,i=null,r=null;t.range(this._startIndex||t.firstIndex(),t.lastIndex()).each((function(o,a){var n=a[e],l=a[s]?Math.round(a[s]):null;if(a[e]=null,a[s]=null,!l||l>0)return!1;var h=o+l,u={pointIndex:h,value:n};if(r){if(r.pointIndex!==u.pointIndex){h>=0&&(t.valueAt(h)[e]=n);var d=!1;i&&(d=i.value<=r.value&&r.value<=n||i.value>=r.value&&r.value>=n),d?r.pointIndex>=0&&(t.valueAt(r.pointIndex)[e]=null):i=r,r=u}}else r=u;return!1}))}}e.study_ScriptWithDataOffset=class extends o{constructor(t,e,s,i){super(t,e,s,i),this._underlyingData=new a(n(i),l)}clearData(){super.clearData(),this._underlyingData.clear()}_mergeData(t){this._invalidateLastNonEmptyPlotRowCache();var e=this._underlyingData.firstIndex();this._underlyingData.merge(t),e!==this._underlyingData.firstIndex()&&(this.m_data=new a(n(this._metaInfo),l));var s=this.m_data.lastIndex();this._underlyingData.range(s,this._underlyingData.lastIndex()).each(function(t,e){return this.m_data.add(t,r(e)),!1}.bind(this)),this._plotsForStrategyProcessing().forEach((function(t){new h(t.strategyIndex,t.targetIndex,s).rebuildData(this.m_data)}),this)}_plotsForStrategyProcessing(){var t=[];return this._metaInfo.plots.forEach((function(e,s){if("dataoffset"===e.type){var r=this._metaInfo.plots.findIndex((function(t){return t.id===e.target}));i(r>=0,"target plot not found for strategy plot "+e.id);var o={strategyIndex:s,targetIndex:r};t.push(o)}}),this),t}}},19111:(t,e,s)=>{"use strict";var i=s(86441).Point,r=s(59251).NonSeriesStudy,o=s(21555).TrendLineRenderer,a=s(18718).HitTestResult,n=s(17611).CompositeRenderer,l=s(63985).LineEnd;class h{constructor(t,e){this._model=t,this._source=e,this._pivots=[],this._textCache={},this._invalidated=!0}update(){this._invalidated=!0}updateImpl(){if(this._pivots=[],this._source.customData()&&this._source.customData().zigzag&&this._source.properties().visible.value()){var t=this._source.customData().zigzag,e=this._source._indexes,s=this._model.timeScale(),i=this._source.priceScale(),r=this._model.mainSeries(),o=r.firstValue();if(i&&!i.isEmpty()&&!s.isEmpty()&&o)for(var a=0;a<t.length;a++)if(t[a]){var n=e[t[a].index],l=t[a].type,h=r.bars().valueAt(n);if(null!==h){
var u=1===l?h[TradingView.HIGH_PLOT]:h[TradingView.LOW_PLOT],d=Math.round(s.indexToCoordinate(n)),c=i.priceToCoordinate(u,o);this._pivots.push({x:d,y:c})}}}}renderer(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);for(var t=new n,e=this._source.properties().color.value(),s=this._source.properties().linewidth.value(),r=1;r<this._pivots.length;r++){var h=this._pivots[r],u=this._pivots[r-1],d={points:[new i(u.x,u.y),new i(h.x,h.y)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e,linewidth:s,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:l.Normal,rightend:l.Normal},c=new o;c.setData(d),c.setHitTest(new a(a.REGULAR)),t.append(c)}return t}}e.study_ZigZag=class extends r{isVisible(){return this.properties().visible.value()&&this.isActualInterval()}_createViews(){super._createViews(),this._setPaneViews([new h(this.model(),this)])}}},40615:(t,e,s)=>{"use strict";s.d(e,{showFinancialsDialog:()=>a});var i=s(10685);let r;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=t=>{this._setVisibility(t)}}show(t){this._load(t).then(t=>t.show())}hide(){var t;null===(t=this._dialog)||void 0===t||t.hide()}static getInstance(){return r||(r=new o),r}_load(t){return Promise.all([s.e(69129),s.e(82888),s.e(25113),s.e(34956),s.e(15998),s.e(77962),s.e(72485),s.e(85617),s.e(78268),s.e(10510),s.e(26149),s.e(71577),s.e(68147),s.e(32356),s.e(39020),s.e(4800),s.e(92435),s.e(87995),s.e(24377),s.e(97974),s.e(39100),s.e(96134),s.e(76381),s.e(24878)]).then(s.bind(s,41267)).then(e=>{var s,i;return null===(s=this._dialog)||void 0===s||s.hide(),null===(i=this._dialog)||void 0===i||i.visible().unsubscribe(this._subscribe),this._dialog=new e.FinancialsDialogRenderer(t),this._dialog.visible().subscribe(this._subscribe),this._dialog})}}function a(t){o.getInstance().show(t)}},59925:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" width="25" height="25"><circle fill="none" stroke="currentColor" stroke-width="1.5" cx="12.5" cy="12.5" r="11.75"/><path fill="currentColor" d="M11.16 18H8.78V7.28c1.52-.06 2.47-.08 2.86-.08a5 5 0 0 1 3.72 1.37 4.9 4.9 0 0 1 1.37 3.64c0 3.86-1.85 5.79-5.57 5.79zm-.48-9.06v7.32c.31.03.64.05 1 .05a2.7 2.7 0 0 0 2.26-1.05c.54-.7.82-1.67.82-2.93 0-2.3-1.07-3.44-3.2-3.44-.21 0-.5.02-.88.05z"/></svg>'},75327:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><rect width="21.5" height="21.5" fill="none" stroke="currentColor" stroke-width="1.5" rx="1.25" x=".75" y=".75"/><path fill="currentColor" d="M10.23 7.96v2.51h3.55v1.62h-3.55v3.22h4.87V17H8.33V6.27h6.85v1.7h-4.95z"/></svg>'},13219:t=>{
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 25" width="24" height="25"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M10.85 23.72c.4.25.9.25 1.3 0l9.5-5.82c.37-.22.6-.63.6-1.06V2c0-.69-.56-1.25-1.25-1.25H2C1.31.75.75 1.31.75 2v14.84c0 .43.23.84.6 1.06l9.5 5.82z"/><path fill="currentColor" d="M10.23 7.96v2.51h3.55v1.62h-3.55v3.22h4.87V17H8.33V6.27h6.85v1.7h-4.95z"/></svg>'},72680:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 25" width="24" height="25"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M10.87 1.23c.39-.22.87-.22 1.26 0l9.5 5.52c.38.23.62.64.62 1.08V23c0 .69-.56 1.25-1.25 1.25H2c-.69 0-1.25-.56-1.25-1.25V7.83c0-.44.24-.85.62-1.08l9.5-5.52z"/><path fill="currentColor" d="M10.23 9.96v2.51h3.55v1.62h-3.55v3.22h4.87V19H8.33V8.27h6.85v1.7h-4.95z"/></svg>'},20477:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" width="25" height="25"><circle fill="none" stroke="currentColor" stroke-width="1.5" cx="12.5" cy="12.5" r="11.75"/><path fill="currentColor" d="M9.25 17.4l.7-1.7c.75.53 1.5.8 2.22.8 1.12 0 1.68-.4 1.68-1.18 0-.37-.13-.72-.4-1.05-.26-.33-.8-.7-1.63-1.11a8.18 8.18 0 0 1-1.66-1.02 2.82 2.82 0 0 1-.89-2.17c0-.83.3-1.52.9-2.06.62-.55 1.4-.82 2.35-.82 1.24 0 2.15.23 2.73.7l-.57 1.63a3.58 3.58 0 0 0-2.12-.71c-.44 0-.78.11-1.03.35a1.2 1.2 0 0 0-.36.9c0 .61.69 1.25 2.05 1.92.72.35 1.23.67 1.55.97.32.3.56.64.73 1.03.16.4.24.83.24 1.31 0 .87-.34 1.59-1.03 2.15a4.2 4.2 0 0 1-2.75.84c-1 0-1.9-.26-2.71-.77z"/></svg>'},26091:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},9598:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);