(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[4611],{89405:t=>{t.exports={"common-tooltip":"common-tooltip-3cIbUUfe","common-tooltip--hidden":"common-tooltip--hidden-3cIbUUfe","common-tooltip--horizontal":"common-tooltip--horizontal-3cIbUUfe","common-tooltip--farther":"common-tooltip--farther-3cIbUUfe","common-tooltip--vertical":"common-tooltip--vertical-3cIbUUfe","common-tooltip-farther":"common-tooltip-farther-3cIbUUfe","common-tooltip--direction_normal":"common-tooltip--direction_normal-3cIbUUfe","common-tooltip__body":"common-tooltip__body-3cIbUUfe","common-tooltip__button-container":"common-tooltip__button-container-3cIbUUfe","common-tooltip__body--no-buttons":"common-tooltip__body--no-buttons-3cIbUUfe","common-tooltip__button":"common-tooltip__button-3cIbUUfe","common-tooltip--direction_reversed":"common-tooltip--direction_reversed-3cIbUUfe","common-tooltip__ear-holder":"common-tooltip__ear-holder-3cIbUUfe","common-tooltip__ear-holder--below":"common-tooltip__ear-holder--below-3cIbUUfe","common-tooltip__ear-holder--above":"common-tooltip__ear-holder--above-3cIbUUfe","common-tooltip__ear-holder--before":"common-tooltip__ear-holder--before-3cIbUUfe","common-tooltip__ear-holder--after":"common-tooltip__ear-holder--after-3cIbUUfe","common-tooltip__body--with-hotkey":"common-tooltip__body--with-hotkey-3cIbUUfe","common-tooltip__body--width_wide":"common-tooltip__body--width_wide-3cIbUUfe","common-tooltip__body--width_narrow":"common-tooltip__body--width_narrow-3cIbUUfe","common-tooltip__body--no-padding":"common-tooltip__body--no-padding-3cIbUUfe","common-tooltip__hotkey-block":"common-tooltip__hotkey-block-3cIbUUfe","common-tooltip__hotkey-block--divider":"common-tooltip__hotkey-block--divider-3cIbUUfe","common-tooltip__hotkey-text":"common-tooltip__hotkey-text-3cIbUUfe","common-tooltip__hotkey-button":"common-tooltip__hotkey-button-3cIbUUfe","common-tooltip__plus-sign":"common-tooltip__plus-sign-3cIbUUfe"}},99994:(t,e,o)=>{"use strict";o.d(e,{getTooltipData:()=>i,setTooltipData:()=>r});const n=new WeakMap;function i(t,e){const o=n.get(t);return o instanceof Function?o(e):o&&o[e]}function r(t,e,o){if(o instanceof Function)return void n.set(t,o);const i=n.get(t),r=void 0===i||i instanceof Function?{}:i;r[e]=o,n.set(t,r)}},4286:(t,e,o)=>{"use strict";o.d(e,{hotKeySerialize:()=>i,hotKeyDeserialize:()=>r});var n=o(94755);function i(t){return(0,n.clean)(JSON.stringify(t))}function r(t){return JSON.parse((0,n.clean)(t,!0))}},9103:(t,e,o)=>{"use strict";o.r(e),o.d(e,{hide:()=>z,show:()=>$,showOnElement:()=>W,tooltipClickHandler:()=>j,updateTooltipText:()=>F});var n=o(78785);let i=0,r=0,s=0;function a(){clearTimeout(i),clearTimeout(r),clearTimeout(s)}function l(t,e){i=setTimeout(t,e)}const c="tooltip-root-element";let d;function u(){const t=document.getElementById(c);t?d=t:(d=document.createElement("div"),d.id=c,document.body.appendChild(d))}function m(){d&&(d.innerHTML="")}"interactive"===document.readyState?u():document.addEventListener("DOMContentLoaded",u);var p=o(88537);const h={default:"",
white:"theme-white","round-shadow":"theme-round-shadow"},f=Object.keys(h);var _=o(99994),g=o(4286),y=o(98969),b=o(43498),v=(o(97116),o(60502)),w=o(66915),E=o(38456),L=o(89405);function T(t){const e=t.hasAttribute("data-tooltip")?t.getAttribute("data-tooltip"):t.getAttribute("title");return e&&((0,_.setTooltipData)(t,"text",e),t.removeAttribute("title")),(0,_.getTooltipData)(t,"text")||""}function k(t){const e=x.cloneNode(!0),o=A(e),{content:n}=t;switch(n.type){case"element":o.innerHTML="",o.appendChild(n.data);break;case"html":o.innerHTML=n.data;break;case"text":if(t.hotkey){const t=O.cloneNode(!0);t.innerText=n.data,o.appendChild(t)}else o.innerText=n.data}if(t.hotkey){const e="none"!==n.type,i=N.cloneNode(!0),r=(0,g.hotKeyDeserialize)(t.hotkey),s=r.keys.map(t=>`<span class="${L["common-tooltip__hotkey-button"]}">${t}</span>`);i.innerHTML=function(t,e){return t.replace(/{\d}|{hotkey_\d}/gi,t=>{const o=Number(t.match(/\d/));return e[o]})}(r.text,s).replace(/\s\+\s/g,`<span class="${L["common-tooltip__plus-sign"]}">+</span>`),o.classList.add(L["common-tooltip__body--with-hotkey"]),e&&i.classList.add(L["common-tooltip__hotkey-block--divider"]),o.appendChild(i)}return e.addEventListener("contextmenu",v.preventDefault),e}function S(t,e){const o=e.rect;if(!o)return;!function(t,e){const o=f.includes(e)?h[e]:"";t.classList.remove(...f.map(t=>h[t]).filter(t=>!!t)),o&&!t.classList.contains(o)&&t.classList.add(o)}(t,e.colorTheme||"default"),e.addClass&&t.classList.add(e.addClass);const n=A(t),i=t.querySelector("."+L["common-tooltip__button-container"]);n.classList.toggle(L["common-tooltip__body--width_wide"],Boolean(e.wide)),n.classList.toggle(L["common-tooltip__body--no-padding"],Boolean(e.noPadding)),n.classList.toggle(L["common-tooltip__body--width_narrow"],Boolean(e.narrow)),n.classList.toggle(L["common-tooltip__body--no-buttons"],!0),n.style.left=D(0),n.style.width=D(n.clientWidth+(Boolean(e.noPadding)?0:2));const r=document.body.clientWidth,s=E.CheckMobile.iOS()||(0,E.supportTouch)()&&(0,E.isMac)()?window.innerHeight:document.body.clientHeight,a=e.vertical,l=e.extendMargin||a&&o.w<20||!a&&o.h<20;t.classList.toggle(L["common-tooltip--farther"],l),t.classList.toggle(L["common-tooltip--vertical"],a),t.classList.toggle(L["common-tooltip--horizontal"],!a);const c=function(t){return t.querySelector("."+L["common-tooltip__ear-holder"])}(t),d=t.offsetHeight;if(a){const a=10,l=s-10,u=12,m=a+u,p=l-u,h=(0,w.clamp)(o.y+o.h/2,m,p)-d/2,f=h+d;t.style.left=D(o.x+o.w),t.style.top=D(h),h<a?n.style.top=i.style.top=D(a-h):f>l&&(n.style.top=i.style.top=D(l-f));const{right:_}=(t.querySelector(":last-child")||n).getBoundingClientRect(),g=_+10>r;t.classList.toggle(L["common-tooltip--direction_reversed"],g),t.classList.toggle(L["common-tooltip--direction_normal"],!g);let y=g?"after":"before";(0,b.isRtl)()?(y=e.otr?"after":y,y=e.otl?"before":y):(y=e.otr?"before":y,y=e.otl?"after":y),c.classList.toggle(L["common-tooltip__ear-holder--before"],"before"===y),c.classList.toggle(L["common-tooltip__ear-holder--after"],"after"===y),
"after"===y&&(t.style.left="auto",t.style.right=D(r-o.x))}else{const a=o.x-(n.offsetWidth-o.w)/2,l=r-10-t.offsetWidth,u=Math.max(10,Math.min(a,l));t.style.left=D(u);const m=l<a;t.classList.toggle(L["common-tooltip--direction_reversed"],m),t.classList.toggle(L["common-tooltip--direction_normal"],!m);const p=function(t,e,o,n){if(t.above)return H(e,n)?"above":"below";if(t.below)return function(t,e,o){return o.y+o.h+e+10<t}(e,o,n)?"below":"above";return H(o,n)?"above":"below"}(e,s,d,o);"above"===p?t.style.bottom=D(s-o.y):t.style.top=D(o.y+o.h),c.classList.add("above"===p?L["common-tooltip__ear-holder--above"]:L["common-tooltip__ear-holder--below"]);const{left:h}=n.getBoundingClientRect();let f=Math.trunc(o.x+o.w/2-(h+n.clientWidth/2));t.style.left=D(u+f),t.style.width=D(n.clientWidth+i.clientWidth),f=m?Math.max(0,f):Math.min(0,f),i.style.left=D(-f),n.style.left=D(-f)}}function U(t){t.classList.toggle(L["common-tooltip--hidden"],!0)}function D(t){return Math.floor(t)+"px"}const M=`\n\t<div id="common-tooltip-wrapper" class="${L["common-tooltip"]}">\n\t\t<div class="${L["common-tooltip__ear-holder"]}" >\n\t\t\t<div class="${L["common-tooltip__body"]} js-tooltip-body"></div>\n\t\t</div>\n\t\t<div class="${L["common-tooltip__button-container"]}"></div>\n\t</div>\n`,C=`\n\t<div class="${L["common-tooltip__hotkey-block"]}"></div>\n`,I=`\n\t<div class="${L["common-tooltip__hotkey-text"]}"></div>\n`,x=(0,y.parseHtmlElement)(M),N=(0,y.parseHtmlElement)(C),O=(0,y.parseHtmlElement)(I);function A(t){return t.querySelector("."+L["common-tooltip__body"])}function H(t,e){return 10+t<e.y}var R=o(98835);let P=!1,K=null,B=null;n.mobiletouch||document.addEventListener("mouseover",(function(t){var e;if(null===(e=t.sourceCapabilities)||void 0===e?void 0:e.firesTouchEvents)return;const o=t.target,n=t.currentTarget,i=function(t,e,o){const n=[];for(;t&&t!==e;)t.classList&&t.classList.contains(o)&&n.push(t),t=t.parentElement||(i=t.parentNode)&&(i.nodeType===Node.ELEMENT_NODE?i:null);var i;return n}(o,n,"apply-common-tooltip");for(const e of i){if("buttons"in t){if(1&t.buttons)continue}else if(1===t.which)continue;const o=()=>W(e);if(o()){const t=t=>{t.target instanceof Element&&t.target.contains(e)&&n(null,!0)},n=(i,r=!1)=>{e.removeEventListener("common-tooltip-update",o),e.removeEventListener("mouseleave",n),e.removeEventListener("mousedown",n),document.removeEventListener("scroll",t,{capture:!0}),B&&(B.destroy(),B=null),z(r)};e.addEventListener("common-tooltip-update",o),e.addEventListener("mouseleave",n),e.addEventListener("mousedown",n),document.addEventListener("scroll",t,{capture:!0}),null===B&&(B=(0,R.createGroup)({desc:"Tooltip"}),B.add({desc:"Hide",hotkey:27,handler:n}));break}}}),!0);const V=new MutationObserver(()=>{if(K&&K.options.target){let t;t="isConnected"in K.options.target?K.options.target.isConnected:document.body.contains(K.options.target),t||z()}}),W=(t,e={})=>{const{content:o,...n}=X(e),i=function(t){const e=T(t),o=t.getBoundingClientRect(),n={h:o.height,w:o.width,x:o.left,y:o.top
},i=t.getAttribute("data-color-theme")||"",r=t.classList.contains("common-tooltip-html"),s=parseInt(t.getAttribute("data-tooltip-delay")||""),a=parseInt(t.getAttribute("data-tooltip-debounce")||"");let l={type:"none"};return e&&(l={type:r?"html":"text",data:e}),{above:t.classList.contains("common-tooltip-above"),below:t.classList.contains("common-tooltip-below"),otl:t.classList.contains("common-tooltip-otl"),otr:t.classList.contains("common-tooltip-otr"),vertical:t.classList.contains("common-tooltip-vertical"),hotkey:t.getAttribute("data-tooltip-hotkey"),narrow:t.classList.contains("common-tooltip-narrow"),wide:t.classList.contains("common-tooltip-wide"),colorTheme:i,tooltipDelay:s,tooltipDebounce:a,rect:n,content:l,target:t}}(t),r=Object.assign(i,n);return"none"!==o.type&&(r.content=o),!("none"===r.content.type&&!r.hotkey)&&(r.target=t,$(r),!0)},$=t=>{const e=X(t),o=k(e);var n;if(K={options:e,element:o},n=o,m(),d&&d.appendChild(n),a(),!P)return U(o),void l(()=>J(o),function(t){return"number"!=typeof t.tooltipDelay||isNaN(t.tooltipDelay)?500:t.tooltipDelay}(e));const{tooltipDebounce:i}=t;"number"!=typeof i||isNaN(i)?J(o):l(()=>J(o),i)},F=t=>T(t);function j(t){n.mobiletouch&&(W(t.currentTarget,{tooltipDelay:0}),document.addEventListener("scroll",q),document.addEventListener("touchstart",q))}function q(){document.removeEventListener("scroll",q),document.removeEventListener("touchstart",q),z()}function G(){m(),P=!1,K=null}const z=t=>{if(a(),V.disconnect(),!K)return;if(!t&&!P)return;const{element:e,options:o}=K,n=()=>{e.removeEventListener("mouseleave",n),U(e),t?G():s=setTimeout(()=>{G()},250)};var i,l;o.tooltipHideDelay?(i=()=>{e.querySelector(":hover")?e.addEventListener("mouseleave",n):n()},l=o.tooltipHideDelay,r=setTimeout(i,l)):n()};function J(t){const{options:e}=(0,p.ensureNotNull)(K);if(S(t,e),function(t){t.classList.toggle(L["common-tooltip--hidden"],!1)}(t),V.observe(document,{childList:!0,subtree:!0}),P=!0,e.forceHideOnMove){const t=()=>{document.removeEventListener("mousemove",t),z()};document.addEventListener("mousemove",t)}}function X(t){if(function(t){return"content"in t}(t))return t;const{inner:e,html:o,text:n,...i}=t;let r={type:"none"};return e&&(r={type:"element",data:e}),n&&(r={type:o?"html":"text",data:n}),{content:r,...i}}},50532:(t,e,o)=>{"use strict";var n=o(9103);function i(t,e="x"){let o=!1;return"x"!==e&&"both"!==e||(o=o||t.offsetWidth<t.scrollWidth),"y"!==e&&"both"!==e||(o=o||t.offsetHeight<t.scrollHeight),o}(0,o(77748).whenDocumentReady)(()=>{document.addEventListener("mouseenter",t=>{const e=t.target;if(e instanceof HTMLElement&&e.matches(".apply-overflow-tooltip")){let t="x";if(e.matches(".apply-overflow-tooltip--direction_both")?t="both":e.matches(".apply-overflow-tooltip--direction_y")&&(t="y"),e.matches(".apply-overflow-tooltip--check-children")){let o=!1;const n=e.children;for(let e=0;e<n.length;e++){const r=n[e];if(r instanceof HTMLElement&&i(r,t)){o=!0;break}}if(!o)return}else if(!i(e,t))return;let o=""
;o=e.matches&&e.matches(".apply-overflow-tooltip--allow-text")?e.textContent||"":Array.from(e.childNodes).reduce((t,e)=>(e.nodeType===Node.TEXT_NODE&&t.push(e.textContent||""),t),[]).join("").trim(),(0,n.showOnElement)(e,{text:o});const r=()=>{(0,n.hide)(),["mouseleave","mousedown"].forEach(t=>e.removeEventListener(t,r))};["mouseleave","mousedown"].forEach(t=>e.addEventListener(t,r))}},!0)})},66915:(t,e,o)=>{"use strict";function n(t,e){return t<=e}function i(t,e){return t>=e}function r(t,e,o){return Math.min(Math.max(t,e),o)}function s(t){return t<0?-1:t>0?1:0}function a(t){if(t<0)return!1;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}function l(t,e,o){return e-t<=o}function c(t,e,o){return Math.abs(t-e)<o}function d(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function u(t,e){return t<e?-1:t>e?1:0}function m(t,e=u){if(t.length<1)throw Error("array is empty");let o=t[0];for(let n=0;n<t.length;++n)e(t[n],o)<0&&(o=t[n]);return o}function p(t,e=u){if(t.length<1)throw Error("array is empty");let o=t[0];for(let n=0;n<t.length;++n)e(t[n],o)>0&&(o=t[n]);return o}function h(t){const e=Math.ceil(t);return e%2!=0?e-1:e}function f(t){return t>0?Math.floor(t):Math.ceil(t)}o.r(e),o.d(e,{lessThan:()=>n,greaterThan:()=>i,clamp:()=>r,sign:()=>s,isBaseDecimal:()=>a,greaterOrEqual:()=>l,equal:()=>c,log10:()=>d,defComparator:()=>u,min:()=>m,max:()=>p,ceiledEven:()=>h,toInt:()=>f})},94755:(t,e,o)=>{t=o.nmd(t),TradingView.cleanButAmpersand=function(t,e){var o=e?["&amp;"]:["&"];return TradingView.clean(t,e,o)},TradingView.strip_tags=function(t){return t&&t.replace?t.replace(/(<([^>]+)>)/gi,""):t},TradingView.encodeSpread=function(t){return encodeURIComponent(t)},TradingView.clean=function(t,e,o){var n=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]],i=t;if(!t||!t.replace)return i;for(var r=0;r<n.length;r++){var s=n[r][0],a=n[r][1];o&&o.indexOf&&-1!==o.indexOf(e?a:s)||(i=e?i.replace(new RegExp(a,"g"),s):i.replace(new RegExp(s,"g"),a))}return i},t&&t.exports&&(t.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand,stripTags:TradingView.strip_tags})},98969:(t,e,o)=>{"use strict";o.d(e,{parseHtml:()=>i,parseHtmlElement:()=>r});const n=new WeakMap;function i(t,e){let o,i;return o=null==e?document.documentElement:9===e.nodeType?e.documentElement:e,n&&(i=n.get(o)),i||(i=o.ownerDocument.createRange(),i.selectNodeContents(o),n&&n.set(o,i)),i.createContextualFragment(t)}function r(t,e){const o=i(t,e),n=o.firstElementChild;return null!==n&&o.removeChild(n),n}},60502:(t,e,o)=>{"use strict";function n(t){t.preventDefault()}o.d(e,{preventDefault:()=>n,preventDefaultForContextMenu:()=>r});const i=["input:not([type])",'input[type="text"]','input[type="email"]','input[type="password"]','input[type="search"]','input[type="number"]','input[type="url"]',"textarea","a[href]",'*[contenteditable="true"]',"[data-allow-context-menu]"];function r(t){const e=t.target;e&&!e.closest(i.join(", "))&&t.preventDefault()}},77809:(t,e,o)=>{"use strict";function n(t){return t.reduce((function(t,e,o){
return~t.indexOf(e)||t.push(e),t}),[])}o.r(e),o.d(e,{uniq:()=>n})},77748:(t,e,o)=>{"use strict";function n(t,e=!1){"loading"!==document.readyState?e?setTimeout(()=>t(),1):t():document.addEventListener("DOMContentLoaded",()=>t())}o.d(e,{whenDocumentReady:()=>n,whenDocumentReadyPromise:()=>i});const i=new Promise(t=>{n(t)})},98835:(t,e,o)=>{"use strict";o.r(e),o.d(e,{Modifiers:()=>n.Modifiers,createGroup:()=>m,pressedKeys:()=>u,registerWindow:()=>p,unregisterWindow:()=>h});var n=o(70316),i=o(15312),r=o(62325),s=o.n(r);var a=o(45848);class l{constructor(t,e){this._group=t,this.hotkey=e.hotkey,this.handler=e.handler,this.desc=e.desc,this.element=e.element||null,e.isDisabled?"function"==typeof e.isDisabled?this.isDisabled=e.isDisabled:this.isDisabled=()=>!0:this.isDisabled=()=>!1}destroy(){this._group&&(this._group.remove(this),this._group=null)}}class c{constructor(t,e){this._actions=[],this._manager=t,this.modal=!(!e||!e.modal),e&&(this.desc=e.desc),e&&e.isDisabled?"function"==typeof e.isDisabled?this.isDisabled=e.isDisabled:this.isDisabled=()=>!0:this.isDisabled=()=>!1,this._manager.registerGroup(this)}add(t){const e=new l(this,t);return this._actions.push(e),e}remove(t){for(let e=this._actions.length;e-- >0;)this._actions[e]===t&&this._actions.splice(e,1)}handleHotkey(t,e){for(let o=this._actions.length;o-- >0;){const i=this._actions[o];if(i.hotkey===t&&((!i.element||e.target&&i.element.contains(e.target))&&!i.isDisabled()))return i.handler(e),e.preventDefault(),(0,a.trackEvent)("Keyboard Shortcuts",(0,n.humanReadableHash)(t)),!0}return!1}promote(){this._manager.promoteGroup(this)}destroy(){this._actions.length=0,this._manager.unregisterGroup(this)}}const d=new class{constructor(){this._groups=[],this._pressedKeys=new(s())(0),this._keyDownListener=t=>{if(t.defaultPrevented)return;const e=(0,n.hashFromEvent)(t);if(this._pressedKeys.setValue(e),!(0,i.isNativeUIInteraction)(e,t.target))for(let o=this._groups.length;o-- >0;){const n=this._groups[o];if(!n.isDisabled()){if(n.handleHotkey(e,t))return;if(n.modal)return}}},this._keyUpListener=t=>{const e=(0,n.hashFromEvent)(t);this._pressedKeys.setValue(e)},this._blurEvent=()=>{this._pressedKeys.setValue(0)},this._mouseEvent=t=>{const e=(0,n.modifiersFromEvent)(t),o=255&this._pressedKeys.value();this._pressedKeys.setValue(e|o)}}listen(t){t.addEventListener("keydown",this._keyDownListener),t.addEventListener("keyup",this._keyUpListener),t.addEventListener("blur",this._blurEvent),t.addEventListener("mousemove",this._mouseEvent)}unlisten(t){t.removeEventListener("keydown",this._keyDownListener),t.removeEventListener("keyup",this._keyUpListener),t.removeEventListener("blur",this._blurEvent),t.removeEventListener("mousemove",this._mouseEvent)}registerGroup(t){this._groups.push(t)}unregisterGroup(t){for(let e=this._groups.length;e--;)this._groups[e]===t&&this._groups.splice(e,1)}promoteGroup(t){let e=this._groups.length-1;for(let o=this._groups.length;o--;){if(this._groups[o]===t)return void(o!==e&&(this._groups.splice(o,1),this._groups.splice(e,0,t)));this._groups[o].modal&&(e=o-1)
}}pressedKeys(){return this._pressedKeys}},u=d.pressedKeys();function m(t){return new c(d,t)}function p(t){d.listen(t)}function h(t){d.unlisten(t)}p(window)},70316:(t,e,o)=>{"use strict";o.r(e),o.d(e,{isMacKeyboard:()=>i,Modifiers:()=>r,modifiersFromEvent:()=>s,hashFromEvent:()=>a,hashShiftPlusEnter:()=>l,humanReadableModifiers:()=>c,humanReadableHash:()=>u});var n=o(38456);const i=(0,n.isMac)()||n.CheckMobile.iOS();var r;function s(t){let e=0;return t.shiftKey&&(e+=1024),t.altKey&&(e+=512),t.ctrlKey&&(e+=256),t.metaKey&&(e+=2048),e}function a(t){return s(t)|t.keyCode}!function(t){t[t.None=0]="None",t[t.Alt=512]="Alt",t[t.Shift=1024]="Shift",t[t.Mod=i?2048:256]="Mod",t[t.Control=256]="Control",t[t.Meta=2048]="Meta"}(r||(r={}));const l=1037;function c(t,e=!i){let o="";return 256&t&&(o+=i?"^":"Ctrl",e&&(o+=" + ")),512&t&&(o+=i?"⌥":"Alt",e&&(o+=" + ")),1024&t&&(o+=i?"⇧":"Shift",e&&(o+=" + ")),2048&t&&(o+=i?"⌘":"Win",e&&(o+=" + ")),o}const d={9:"⇥",13:"↵",27:"Esc",8:i?"⌫":"Backspace",32:"Space",35:"End",36:"Home",37:"←",38:"↑",39:"→",40:"↓",45:"Ins",46:"Del",188:",",191:"/"};for(let t=1;t<=16;t++)d[t+111]="F"+t;function u(t){let e=c(t);const o=255&t;return e+=o in d?d[o]:String.fromCharCode(o),e}},15312:(t,e,o)=>{"use strict";o.d(e,{isTextEditingField:()=>i,isNativeUIInteraction:()=>r});var n=o(70316);function i(t){if("INPUT"===t.tagName){const e=t.type;return"text"===e||"email"===e||"number"===e||"password"===e||"search"===e||"tel"===e||"url"===e}return"TEXTAREA"===t.tagName||t.isContentEditable}function r(t,e){if(!e)return!1;const o=255&t;if(27===o||o>>>4==7)return!1;switch(t^o){case n.Modifiers.Alt:return(38===o||40===o)&&"SELECT"===e.tagName||i(e);case n.Modifiers.Alt+n.Modifiers.Shift:return i(e);case n.Modifiers.Mod:if(67===o||!n.isMacKeyboard&&45===o){const t=e.ownerDocument&&e.ownerDocument.getSelection();if(t&&!t.isCollapsed)return!0}return i(e);case n.Modifiers.Mod+n.Modifiers.Shift:return o>=33&&o<=40&&i(e);case n.Modifiers.Shift:case 0:return!!(9!==o||e.ownerDocument&&e!==e.ownerDocument.body&&e!==e.ownerDocument.documentElement)&&((13===o||32===o||!function(t){if("BUTTON"===t.tagName)return!0;if("INPUT"===t.tagName){const e=t.type;if("submit"===e||"button"===e||"reset"===e||"checkbox"===e||"radio"===e)return!0}return!1}(e))&&("form"in e||e.isContentEditable))}return!1}},75203:(t,e,o)=>{"use strict";o.d(e,{telemetry:()=>u});var n=o(97639),i=o.n(n),r=o(86674),s=o(38456),a=o(14802);o(59863);const l=(0,o(11905).getLogger)("Common.Telemetry"),c={default:15e3,site:3e5},d=["before_websocket_connection_time_frame","websocket_connection_time_frame","first_series_full_time_frame","page_full_load_time_frame","page_load_time_frame"];const u=new class{constructor(){this.reportSent=new(i()),this.timeCounters={series:{marks:[]},study:{},pine:{}},this._timeoutIds={},this._commonAdditionalData={cluster:null,userId:"0"},this._reportStash={}}setSessionInfo(t){const e=this._parseCluster(t);null!==e&&(this._commonAdditionalData.cluster=e)}sendReport(t,e,o){var n;if(!this._isAbleToSendReport(e))return
;const i=this._getSubserviceType(t),r=this._getHost(t,i);if(null!==r){if(o=void 0===o?{count:1}:o,this._addReportToStash(o,e,r),!this._timeoutIds[t]){const e=null!==(n=c[t])&&void 0!==n?n:c.default;this._timeoutIds[t]=setTimeout(this._sendTelemetryToService.bind(this,t,r),e)}}else l.logError(`Unable to get host for counter: ${e}, metric type: ${t}, serivce type: ${i}`)}sendChartReport(t,e,o=!0){this._sendServiceSpecifiedReport("charts",t,e,o)}sendLineToolsStorageReport(t,e,o=!0){this._sendServiceSpecifiedReport("line_tools_storage",t,e,o)}_sendServiceSpecifiedReport(t,e,o,n=!0){this._updateUserInfo(),o=void 0===o?{count:1}:o,n&&(o=this._appendCommonAdditionalInfo(o,["cluster","userId"])),this.sendReport(t,e,o)}_updateUserInfo(){const t="user"in window&&"id"in window.user?window.user.id:"0";this._commonAdditionalData.userId=String(t)}_isAbleToSendReport(t){const e=window.TELEMETRY_HOSTS,o=d.includes(t),n=Boolean(window.TradingView.onChartPage||(0,s.onWidget)());return e&&(!o||n)}_sendTelemetryToService(t,e){if(this._reportStash.hasOwnProperty(e)){const t=this._cropParams(this._reportStash[e]),o=this._renameAllParams(t),n={event:"report_stash",params:this._cleanAllParams(o)};l.logDebug(`Report to host: ${e}; stash: ${JSON.stringify(this._reportStash[e])}`),this.reportSent.fire(this._reportStash[e]),delete this._reportStash[e],(0,r.fetch)(e+"/report",{method:"POST",body:JSON.stringify(n)})}this._timeoutIds[t]=null}_getHost(t,e){const o=window.TELEMETRY_HOSTS,n=o[t]&&o[t][e];return Boolean(n)?n:null}_getSubserviceType(t){if(!["charts","site"].includes(t))return"all";let e="free";const o=window.user.is_pro;return"charts"===t&&(0,a.isOnMobileAppPage)("old")?e=o?"ios_pro":"ios_free":"charts"===t&&(0,a.isOnMobileAppPage)("new")?e=o?"android_pro":"android_free":(0,s.onWidget)()?e="widget":o&&(e="pro"),e}_parseCluster(t){let e;try{e=JSON.parse(t).session_id}catch(t){return l.logError("Could not parse cluster id (session id)"),null}const o=/(.*@)(.*)/gi.exec(e);return null!==o&&o.length>=3?o[2]:null}_appendCommonAdditionalInfo(t,e){return e.forEach(e=>{e in this._commonAdditionalData&&(t.additional=t.additional||{},t.additional[e]=this._commonAdditionalData[e])}),t}_cropParams(t){var e;for(const o in t)t.hasOwnProperty(o)&&t[o].length>1e3&&(t.too_much_metrics_frame=null!==(e=t.too_much_metrics_frame)&&void 0!==e?e:[],t.too_much_metrics_frame.push({value:t[o].length,additional:{event:o}}),delete t[o]);return t}_renameAllParams(t){const e={};for(const o in t)t.hasOwnProperty(o)&&(e[o]=[],t[o].forEach(t=>{e[o].push(this._renameEntryParams(t))}));return e}_renameEntryParams(t){const e={count:"c",value:"v",text:"t",additional:"a"};return Object.keys(t).reduce((o,n)=>(o[e[n]]=t[n],o),{})}_cleanAllParams(t){const e={};for(const o in t)if(t.hasOwnProperty(o)){e[o]=[];const n={c:0};t[o].forEach(t=>{const i=this._cleanEntryParams(t),r=Object.keys(i).length;1===r&&void 0!==i.c?n.c+=i.c:r>0&&e[o].push(i)}),n.c>0&&e[o].push(n),0===e[o].length&&delete e[o]}return e}_cleanEntryParams(t){
const e=Object.keys(t).reduce((e,o)=>"c"!==o&&"t"!==o||t[o]?(e[o]=t[o],e):e,{});return"c"in e||"v"in e||"t"in e?e:{}}_addReportToStash(t,e,o){o in this._reportStash||(this._reportStash[o]={}),e in this._reportStash[o]||(this._reportStash[o][e]=[]),Object.keys(t).length>0&&this._reportStash[o][e].push(t)}}},45848:(t,e,o)=>{"use strict";o.d(e,{trackEvent:()=>l});var n=o(51954),i=o(11688);const r=(0,o(11905).getLogger)("Common.TrackEvent"),s=[/Study_(Drawing)_(.*)/,/(Study)_(.*)@tv-basicstudies/,/(Study)_(.*)/,/(Chart Style) (.*)/];let a=!1;const l=(t,e,o)=>{if(a)return;if(i.enabled("charting_library_base"))return void((t,e,o)=>{e=e||t||o||"";let i="";for(let t=0;t<s.length;t++){const o=e.match(s[t]);if(o&&3===o.length){e=o[1],i=o[2];break}}(0,n.emit)(e.toLowerCase().replace(" ","_"),{category:t,label:o,value:i})})(t,e,o);let l=(t?t+":":"")+e;o&&(l+=" "+o),r.logNormal(l),i.enabled("widget")||!window._UNIT_TESTS&&window.gtag&&window.gtag("event",e,{event_category:t,event_label:o})};"undefined"!=typeof window&&(window.TradingView=window.TradingView||{},window.TradingView.trackEvent=l)}}]);