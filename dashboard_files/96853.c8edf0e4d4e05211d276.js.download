"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[96853],{66437:(t,e,r)=>{var n=r(11688),i=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}],o=function(){var t=[{pattern:"(",ctor:s},{pattern:")",ctor:a},{pattern:"+",ctor:l},{pattern:"-",ctor:p},{pattern:"*",ctor:d},{pattern:"/",ctor:c},{pattern:"^",ctor:f},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:.&]))|\.\d+/,ctor:y},{pattern:/\./,ctor:_},{pattern:n.enabled("charting_library_base")?/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF^][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!:.&]*|'.+?'/:/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:.&]*|'.+?'/,ctor:v},{pattern:/'[^']*/,ctor:S},{pattern:/[\0-\x20\s]+/,ctor:o}];function e(t,e){var r=function(){};return r.prototype=e.prototype,t.prototype=new r,t}function r(){}function o(t){this.value=t}function s(){}function a(){}function u(){}function l(){}function p(){}function d(){}function c(){}function f(){}r.prototype.toString=function(){return this.value},e(o,r),e(s,r),s.prototype.value="(",e(a,r),a.prototype.value=")",e(u,r),e(l,u),l.prototype.value="+",l.prototype.precedence=0,l.prototype.commutative=!0,e(p,u),p.prototype.value="-",p.prototype.precedence=0,p.prototype.commutative=!1,e(d,u),d.prototype.value="*",d.prototype.precedence=1,d.prototype.commutative=!0,e(c,u),c.prototype.value="/",c.prototype.precedence=1,c.prototype.commutative=!1,e(f,u),f.prototype.value="^",f.prototype.precedence=2,f.prototype.commutative=!1;var h=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,g=/[+\-/*]/;function v(t){this.value=t}function y(t){this.value=t}function m(t){this.value=t}function S(){v.apply(this,arguments)}function _(){y.apply(this,arguments)}e(v,r),v.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var t=g.test(this._ticker)?"'":"";return t+(this._exchange?this._exchange+":":"")+this._ticker+t}return this.value},v.prototype.parse=function(){var t=h.exec(this.value);t[1]&&(this._exchange=t[1]),this._ticker=t[2]},v.prototype.parseAsFutures=function(){this.hasOwnProperty("_ticker")||this.parse();for(var t=function(t){return i.some((function(e){return e.t===t}))},e=2;e>=1;--e){var r=this._ticker.slice(0,e);if(t(r)){this._root=r,this._contract=this._ticker.slice(e);break}}},v.prototype.exchange=function(t){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._exchange;null==t?delete this._exchange:this._exchange=t+""},v.prototype.ticker=function(t){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._ticker;null==t?delete this._ticker:this._ticker=t+"",delete this._root,delete this._contract},v.prototype.root=function(t){if(this.hasOwnProperty("_root")||this.parseAsFutures(),
!(arguments.length>0))return this._root;null==t?delete this._root:(this._root=t+"",this._root&&(this._ticker=this._root+(this._contract||"")))},v.prototype.contract=function(t){if(this.hasOwnProperty("_contract")||this.parseAsFutures(),!(arguments.length>0))return this._root;null==t?delete this._contract:(this._contract=t+"",this._root&&(this._ticker=this._root+this._contract))},e(y,r),y.prototype.toString=function(){return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},y.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},m.prototype.toString=function(){return this.value},e(S,v),S.prototype.isIncomplete=!0,S.prototype.incompleteSuggest=function(){if("'"!==this.value)return String("'")},e(_,y),_.prototype.isIncomplete=!0;var I=new RegExp(t.map((function(t){return"("+("string"==typeof t.pattern?t.pattern.replace(/[\^$()[\]{}*+?|\\]/g,"\\$&"):t.pattern.source)+")"})).concat(".").join("|"),"g");function b(e,r){var n,i=[];t:for(;n=I.exec(e);){for(var s=t.length;s--;)if(n[s+1]){if(t[s].ctor){var a=new t[s].ctor(n[s+1]);a._offset=n.index,i.push(a)}continue t}var u=new m(n[0]);u._offset=n.index,i.push(u)}if(r&&r.recover){var l;for(s=i.length;s--;){var p=i[s];if(p instanceof y||p instanceof v){if(void 0!==l){var d=new v(""),c=i.splice(s,l-s+1,d);d.value=c.map((function(t){return t.value})).join("")}l=s}else p instanceof o||(l=void 0)}}return i}function T(t){for(var e=[],r=0;r<t.length;r++)t[r]instanceof o||e.push(t[r]);return e}function P(t){t=T(t);for(var e,r=[],n=[],i=0;i<t.length;i++){var o=t[i];if(o instanceof u)n.length&&n[n.length-1].minPrecedence>o.precedence&&(n[n.length-1].minPrecedence=o.precedence);else if(o instanceof s)n.push(e={minPrecedence:1/0,openBraceIndex:i});else if(o instanceof a){var l=t[(e=n.pop()).openBraceIndex-1],p=t[i+1];p instanceof u&&!(p.precedence<=e.minPrecedence)||!(!(l instanceof u)||l.precedence<e.minPrecedence||l.precedence===e.minPrecedence&&l.commutative)||(r.unshift(e.openBraceIndex),r.push(i),n.length&&n[n.length-1].minPrecedence>e.minPrecedence&&(n[n.length-1].minPrecedence=e.minPrecedence))}}for(i=r.length;i--;)t.splice(r[i],1);return t}function w(t){if("string"!=typeof t)throw new TypeError("expression must be a string");return(t=b(t)).filter((function(t){return t instanceof v})).map((function(t){return t.exchange()})).filter((function(t){return t}))}function V(t){return 1!==(t=w(t)).length?null:t[0]}function O(t,e){return(t=w(t)).some((function(t){return e.includes((t||"").toUpperCase())}))}function x(t){return t.join("")}return{tokenize:b,validate:function(t){if(n.enabled("charting_library_base"))return{currentState:"var"};for(var e="init",r={warnings:[],errors:[],isEmpty:!0},i=[],l=0;l<t.length;l++){if(!((d=t[l])instanceof o)){if(delete r.isEmpty,d.isIncomplete){var p={status:"incomplete",reason:"incomplete_token",offset:d._offset,token:d};if(d.incompleteSuggest&&(p.recover={append:d.incompleteSuggest()}),r.warnings.push(p),l!==t.length-1){p.status="error";continue}}
if(d instanceof v||d instanceof y){if("var"===e){r.errors.push({status:"error",reason:"unexpected_token",offset:d._offset,token:d});continue}e="var"}else if(d instanceof u){if("var"!==e){r.errors.push({status:"error",reason:"unexpected_token",offset:d._offset,token:d});continue}e="operator"}else if(d instanceof s){if("var"===e){r.errors.push({status:"error",reason:"unexpected_token",offset:d._offset,token:d});continue}i.push(d),e="init"}else if(d instanceof a){if("var"!==e){r.errors.push({status:"error",reason:"unexpected_token",offset:d._offset,token:d});continue}i.pop()||r.errors.push({status:"error",reason:"unbalanced_brace",offset:d._offset,token:d,recover:{prepend:new s}}),e="var"}else d instanceof m&&r.errors.push({status:"error",reason:"unparsed_entity",offset:d._offset,token:d})}}for(r.braceBalance=i.length,"var"!==e&&r.warnings.push({status:"incomplete"});i.length;){var d;p={status:"incomplete",reason:"unbalanced_brace",offset:(d=i.pop())._offset,token:d};"var"===e&&(p.recover={append:new a}),r.warnings.push(p)}return r.currentState=e,0===r.warnings.length&&delete r.warnings,0===r.errors.length&&delete r.errors,r},factorOutBraces:P,normalizeTokens:function(t){for(var e=0;e<t.length;e++)t[e].parse&&t[e].parse();return t},flip:function(t){var e=function(t){for(var e,r=0,n=0,i=0;i<t.length;i++){var l=t[i];if(!(l instanceof o))switch(r){case 0:if(!(l instanceof y&&1==+l.value))return!1;r=1;break;case 1:if(!(1===r&&l instanceof c))return!1;r=2,e=i+1;break;case 2:if(l instanceof s)r=3,n=1;else if(l instanceof u)return!1;break;case 3:l instanceof s?n++:l instanceof a&&--n<=0&&(r=2)}}return t.slice(e)}(t);return P(e||[new y("1"),new c,new s].concat(t).concat(new a))},hasBatsSymbols:function(t){return O(t,["BATS"])},hasEodSymbols:function(t){return(t=V(t))&&-1!==t.toUpperCase().indexOf("_EOD")},hasChxjpySymbols:function(t){return O(t,["CHXJPY"])},hasFreeDelaySymbols:function(t){return O(t,pro.getProductsByType(pro.PRODUCT_TYPES.exchange).map((function(t){return t.exchange.toUpperCase()+"_DLY"})))},getExchange:V,getExchanges:w,isExchange:function(t,e){return!!(t=V(t))&&t.substring(0,e.length)===e},SymbolToken:v,IncompleteSymbolToken:S,NumberToken:y,BinaryOperatorToken:u,OpenBraceToken:s,CloseBraceToken:a,ticker:function(t){return new v(t).ticker()},shortName:function(t){if("string"!=typeof t)throw new TypeError("expression must be a string");var e=P(T(b(t)));return e.forEach((function(t){t instanceof v&&t.exchange(null)})),x(e)},normalize:function(t){if("string"!=typeof t)throw new TypeError("expression must be a string");return x(P(T(b(t))))}}}();t.exports=o},13652:(t,e,r)=>{r.d(e,{Version:()=>i});var n=r(88537);class i{constructor(t,e){this._major=t,this._minor=e}major(){return this._major}minor(){return this._minor}isZero(){return 0===this._major&&0===this._minor}toString(){return this._major+"."+this._minor}compareTo(t){return this._major<t._major?-1:this._major>t._major?1:this._minor<t._minor?-1:this._minor>t._minor?1:0}isLess(t){return this.compareTo(t)<0}isLessOrEqual(t){return this.compareTo(t)<=0}isEqual(t){
return 0===this.compareTo(t)}isGreater(t){return this.compareTo(t)>0}isGreaterOrEqual(t){return this.compareTo(t)>=0}static parse(t){if(t instanceof i)return new i(t.major(),t.minor());if("number"==typeof t)return(0,n.assert)(Math.floor(t)===t,"Version should not be a float number"),new i(t,0);if("string"==typeof t){const e=t.split(".");if(1===e.length){const r=parseInt(e[0],10);return(0,n.assert)(!isNaN(r),"Bad version string: "+t),new i(r,0)}if(2===e.length){const r=parseInt(e[0],10);(0,n.assert)(!isNaN(r),"Bad version string: "+t);const o=parseInt(e[1],10);return(0,n.assert)(!isNaN(o),"Bad version string: "+t),new i(r,o)}throw new Error("Bad version string (one dot expected): "+t)}throw new Error("Bad version: "+t)}}i.ZERO=new i(0,0)},62145:(t,e,r)=>{r.d(e,{FormattersSerializer:()=>l});var n=r(89765),i=r(91419),o=r(65513),s=r(76263),a=r(88537);const u={price:n.PriceFormatter,volume:i.VolumeFormatter,percentage:o.PercentageFormatter,quoteSessionPrice:s.QuoteSessionPriceFormatter};var l;!function(t){t.serialize=function(t){const e=(0,a.ensureDefined)(u[t.type]);return{type:t.type,state:e.serialize(t)}},t.deserialize=function(t){return(0,a.ensureDefined)(u[t.type]).deserialize(t.state)}}(l||(l={}))},76263:(t,e,r)=>{r.d(e,{QuoteSessionPriceFormatter:()=>i});var n=r(89765);class i{constructor(t){this.type="quoteSessionPrice",this.reset(t)}state(){return this._priceFormatter.state()}reset(t){this._priceFormatter=t||new n.PriceFormatter(100,1,!1)}update(t,e){const r=null!=e.pricescale||null!=e.minmov||null!=e.fractional||null!=e.minmove2,i=null!=t.pricescale&&null!=t.minmov&&null!=t.fractional&&null!=t.minmove2;r&&i&&(this._priceFormatter=new n.PriceFormatter(t.pricescale,t.minmov,t.fractional||!1,t.minmove2))}format(t,e,r){return this._priceFormatter.format(t,e,r)}hasForexAdditionalPrecision(){return this._priceFormatter.hasForexAdditionalPrecision()}static serialize(t){return t.state()}static deserialize(t){const e=new n.PriceFormatter(t.priceScale,t.minMove,t.fractional,t.minMove2);return new i(e)}}},69411:(t,e,r)=>{r.d(e,{patchSourceState:()=>i});var n=r(87236);function i(t){const e={palettes:{},inputs:[{defval:2,id:"upper diviation",max:500,min:-500,name:(0,n.t)("Upper Deviation"),type:"integer"},{defval:-2,id:"lower diviation",max:500,min:-500,name:(0,n.t)("Lower Deviation"),type:"integer"},{defval:!0,id:"use upper diviation",name:(0,n.t)("Use Upper Deviation"),type:"bool"},{defval:!0,id:"use lower diviation",name:(0,n.t)("Use Lower Deviation"),type:"bool"},{defval:0,id:"first bar time",max:253370764800,min:0,name:(0,n.t)("First bar time"),type:"time"},{defval:0,id:"last bar time",max:253370764800,min:0,name:(0,n.t)("Last bar time"),type:"time"},{defval:"close",id:"source",name:(0,n.t)("Source"),options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"}],plots:[],graphics:{},defaults:{inputs:{"first bar time":0,"last bar time":0,"lower diviation":-2,source:"close","upper diviation":2,"use lower diviation":!0,"use upper diviation":!0}},_metainfoVersion:6,description:"Regression Trend",
id:"RegressionTrend@tv-basicstudies",is_price_study:!0,shortDescription:"Reg Trend",shortId:"RegressionTrend",version:"2",fullId:"RegressionTrend@tv-basicstudies-2",name:"RegressionTrend@tv-basicstudies"};return t.metaInfo||(t.metaInfo=e),t}},44265:(t,e,r)=>{var n=r(81640);function i(t){var e=JSON.stringify(t);return e=e.replace(/'/g,"\\'")}t.exports={formatCallstudyArg:i,prepareCallStudyArgs:function(t,e){var r={};if(e.isTVScript){var o=e.defaults.inputs.text;r.text=n.patchILTemplate(o,e,t)}else for(var s=Object.keys(t),a=s.length-1;a>=0;a--){var u=s[a],l=t[u]?t[u].id:null;l&&t[l]&&(r[l]=t[l])}return i(r)}}},2105:(t,e,r)=>{r.d(e,{generateSplitTitleForGui:()=>a,generateTitleForGui:()=>u});var n=r(88537),i=r(87236),o=r(73547);function s(t,e){return(Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toString()||""}function a(t){const e="QUANDL"===(t=t||{}).exchange,r={title:"",description:"",interval:"",exchange:"",provider:"",chartStyle:"",sessionDescription:""};let a="";if(t.description&&e)if(2===t.description.split("/").length)a=t.description.split("/")[1];else{t.description.split("'").filter(t=>t.length).forEach(t=>{let e=[];e=t&&("/"===t[0]||/\d+\/\(?/.test(t))?[t]:t.split("/").filter(t=>t.length),a+=e[2===e.length?1:0]})}else a=t.description?t.description:t.symbol;if(t.ticker?(r.title=t.ticker,r.description=l(a)):r.title=l(a),t.interval&&(r.interval=(0,o.translatedIntervalString)(t.interval)),e&&t.description){const e=/[\w_]+\/[\w_]+/.exec(t.description);e&&e[0]?r.provider=l(e[0].split("/")[0]):r.provider=l(t.description.split("/")[0])}return t.exchange&&(r.exchange=l(t.exchange)),r.chartStyle=l(function(t){const e=t.inputs;switch(t.style){case 4:const r=e.style+("ATR"===e.style?`(${e.atrLength})`:""),o=(0,n.ensureDefined)(t.boxSize||e.boxSize);return`${(0,i.t)("Renko")} [${r}, ${s(o,4)}]`;case 7:return`${(0,i.t)("Line Break")} [${e.lb}]`;case 5:const a=e.style+("ATR"===e.style?`(${e.atrLength})`:""),u=t.reversalAmount||e.reversalAmount,l=void 0!==u?", "+s(u,8):"";return`${(0,i.t)("Kagi")} [${a}${l}]`;case 6:const p=`${e.style}${"ATR"===e.style?"("+e.atrLength+")":""}`,d=t.boxSize||e.boxSize;return`${(0,i.t)("PnF")} [${p}, ${s((0,n.ensureDefined)(d),8)}, ${e.reversalAmount}]`}return 11===t.style?(0,i.t)("Range"):8===t.style?(0,i.t)("Heikin Ashi"):""}(t)),t.branding&&!a.toUpperCase().includes("TradingView".toUpperCase())&&(r.branding="TradingView"),t.sessionDescription&&(r.sessionDescription=l(t.sessionDescription)),r}function u(t){const e=a(t);return(t.ticker?e.description:e.title)+(e.interval?", "+e.interval:"")+function(t,e=", "){return(t.provider?`${e}${t.provider}`:"")+(t.exchange?`${e}${t.exchange}`:"")+(t.chartStyle?`${e}${t.chartStyle}`:"")+(t.branding?`${e}${t.branding}`:"")+(t.sessionDescription?`${e}${t.sessionDescription}`:"")}(e)}function l(t){return t.replace(/'/g,"")}},57118:(t,e,r)=>{r.d(e,{migrateMetaInfoAndPropState:()=>u});var n=r(88537),i=r(70028),o=r.n(i),s=r(70617);const a=[new class{targetMetaInfoVersion(){return 47}migrateMetaInfo(t){const e=t,r=t;if(r._metainfoVersion=47,
!e.defaults||void 0===e.defaults.precision)return void(r.format={type:"inherit"});const n=e.defaults&&e.defaults.precision,i=(0,s.isNumber)(n)?n:parseInt(n);0===i?r.format={type:"volume"}:isFinite(i)?r.format={type:"price",precision:i}:r.format={type:"inherit"},delete e.defaults.precision}migratePropState(t){}},new class{targetMetaInfoVersion(){return 50}migrateMetaInfo(t){const e=t,r=t;if(r._metainfoVersion=50,void 0===e.defaults||void 0===e.defaults.ohlcPlots||void 0===e.ohlcPlots)return;const i=e.ohlcPlots,o=e.defaults.ohlcPlots,s=(0,n.ensureDefined)((0,n.ensureDefined)(r.defaults).ohlcPlots);for(const t of Object.keys(o)){const e=o[t];if("ohlc_candles"===e.plottype){let r=!1;const n=i[t];void 0!==n&&(r=!!n.drawBorder,delete n.drawBorder),s[t]={borderColor:"#000000",drawBorder:r,...e}}}}migratePropState(t){}}];function u(t,e){const r=o().versionOf(t),i=t;void 0===i._serverMetaInfoVersion&&(i._serverMetaInfoVersion=r),a.forEach(i=>{r<0||r>=i.targetMetaInfoVersion()||(i.migrateMetaInfo(t),void 0!==e&&i.migratePropState(e),(0,n.assert)(t._metainfoVersion===i.targetMetaInfoVersion()))})}a.sort((function(t,e){return t.targetMetaInfoVersion()-e.targetMetaInfoVersion()}))},44276:(t,e,r)=>{function n(t,e){return`${t}@${e}`}function i(t){return t.replace(/(@[^-]+-[^-]+).*$/,"$1")}r.d(e,{studyIdString:()=>n,extractStudyId:()=>i})},49692:(t,e,r)=>{r.r(e),r.d(e,{collectDepsForAlert:()=>y,dependenciesForAlerts:()=>m,idForAlert:()=>g,patchChildIdInInputs:()=>h,plotsForAlert:()=>v});var n=r(88537),i=r(11905),o=r(90557);var s=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},a=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in t)e.call(t,n)&&r.push(n);return r},u=r(44276),l=r(70028),p=r.n(l),d=r(18458),c=r(70617);const f=(0,i.getLogger)("Chart.Study");function h(t,e,r){void 0!==e&&void 0!==r&&r.forEach(r=>{const n=t[r];if("string"==typeof n){const i=n.split("$")[1];t[r]=e+(void 0===i?"":"$"+i)}else if((0,c.isObject)(n)&&"source"===n.t){const t=n.v.split("$")[1];n.v=e+(void 0===t?"":"$"+t)}else f.logError("Cannot patch source input, its type is not source: "+JSON.stringify(n))})}function g(t,e,r){return(0,o.hash)(t+function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var r=e.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var n,i="boolean"==typeof e.cycles&&e.cycles,o=e.replacer||function(t,e){return e},u=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},o={key:r,value:t[r]};return n(i,o)}}),l=[];return function t(e,n,p,d){var c=r?"\n"+new Array(d+1).join(r):"",f=r?": ":":";if(p&&p.toJSON&&"function"==typeof p.toJSON&&(p=p.toJSON()),void 0!==(p=o.call(e,n,p))){if("object"!=typeof p||null===p)return JSON.stringify(p);if(s(p)){for(var h=[],g=0;g<p.length;g++){var v=t(p,g,p[g],d+1)||JSON.stringify(null);h.push(c+r+v)}return"["+h.join(",")+c+"]"}if(-1!==l.indexOf(p)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(p);var y=a(p).sort(u&&u(p));for(h=[],
g=0;g<y.length;g++){var m=t(p,n=y[g],p[n],d+1);if(m){var S=JSON.stringify(n)+f+m;h.push(c+r+S)}}return l.splice(l.indexOf(p),1),"{"+h.join(",")+c+"}"}}({"":t},"",t,0)}(e)+(null!=r?r:"")).toString()}function v(t,e,r){const i=[d.isLinePlot,d.isShapesPlot,d.isCharsPlot,d.isArrowsPlot,d.isOhlcPlot,d.isAlertConditionPlot];return t.plots.map((t,e)=>({...t,pinePlotIndex:e})).filter(t=>!(void 0!==r&&!r.includes(t.id))&&i.some(e=>e(t))).map(r=>{const i={id:r.id,type:r.type,pinePlotIndex:r.pinePlotIndex,offset:e(r.id)};if(t.styles&&void 0!==t.styles[r.id]){const e=(0,n.ensureDefined)((0,n.ensureDefined)(t.styles)[r.id]);i.title=e.title||"",i.text=e.text||""}return(0,d.isOhlcPlot)(r)&&r.target&&t.ohlcPlots&&t.ohlcPlots[r.target]&&(i.ohlcTitle=(0,n.ensureDefined)((0,n.ensureDefined)(t.ohlcPlots)[r.target]).title),i})}function y(t,e){const r=[];let i,o;for(let n=t.length-1;n>=0;n--){const s=t[n],a=(0,u.extractStudyId)(s.metaInfo().id),l=p().getStudyIdWithLatestVersion(s.metaInfo());o=s.inputsForAlertState();h(o,i,s.metaInfo().inputs.filter(t=>"source"===t.type).map(t=>t.id));const d=Object.assign({},o);s.metaInfo().isTVScript&&delete d.text;const c=g(a,d,e);r.push({id:c,study:l,inputs:o}),i=c}return{idForAlert:(0,n.ensureDefined)(i),inputsForAlert:(0,n.ensureDefined)(o),studyDependencies:r.reverse()}}function m(t,e){return t.map(t=>{const r=t.inputs(),n=t.metaInfo();let i=p().cutDollarHash(n.fullId);if("tv-scripting"===n.productId){const t=e.findByIdSync({type:"java",studyId:"Script@tv-scripting"});null!==t&&(i=t.fullId)}const o={id:t.sourceId(),study:i,inputs:r,scriptIdPart:void 0,scriptVersion:void 0};return n.pine?{...o,scriptIdPart:n.scriptIdPart,scriptVersion:n.pine.version}:o})}},94930:(t,e,r)=>{r.d(e,{applyOverridesToStudyDefaults:()=>l});var n=r(88537),i=r(18458);const o=(0,r(11905).getLogger)("Chart.Model.StudyPropertiesOverrider");var s,a;function u(t,e,r,n){const i=r.split(".");if(0===i.length||0===i[0].length)return;const u=function(t){const e=t.split(":");return{name:e[0],type:2===e.length?e[1]:null}}(i[0]),l=u.name,p=u.type,d=null!==p,c=!d||"band"===p,f=!d||"area"===p,h=!d||"input"===p,g=!d||"plot"===p?a.getPlotIdByTitle(t,l):null,v=c?a.getBandIndexByName(t,l):null,y=f?a.getFilledAreaIdByTitle(t,l):null,m=h?a.getInputByName(t,l):null,S=e.hasOwnProperty(l);if((null!==g?1:0)+(null!==v?1:0)+(null!==y?1:0)+(null!==m?1:0)+(S?1:0)>1)return void o.logWarn(`Study '${t.description}' has ambiguous identifier '${l}'`);const _=i[1];if(null!==g){if(1===i.length)return void o.logWarn(`Path of sub-property of '${l}' plot for study '${t.description}' must be not empty`);const r=i.slice(1);s.applyPlotProperty(t,e,g,r,n)}else if(null!==m)s.applyInputValue(e,m,n);else if(null!==v){if(void 0===_)return void o.logWarn(`Property name of '${l}' band for study '${t.description}' must be set`);s.applyBandProperty(e,v,_,n)}else if(null!==y){if(void 0===_)return void o.logWarn(`Property name of '${l}' area for study '${t.description}' must be set`);s.applyFilledAreaProperty(e,y,_,n)
}else S?s.setRootProperty(e,i,n):o.logWarn(`Study '${t.description}' has no plot or input '${l}'`)}function l(t,e,r){for(const n in t){if(!t.hasOwnProperty(n))continue;const i=n.indexOf(".");if(-1===i)continue;const s=n.substring(0,i),l=a.getMetaInfoByDescription(e,s);if(null===l){o.logWarn("There is no such study "+s);continue}const p=r(l);null!==p?u(l,p,n.substring(i+1),t[n]):o.logWarn("Cannot apply overrides for study "+s)}}!function(t){const e={line:i.LineStudyPlotStyle.Line,histogram:i.LineStudyPlotStyle.Histogram,cross:i.LineStudyPlotStyle.Cross,area:i.LineStudyPlotStyle.Area,columns:i.LineStudyPlotStyle.Columns,circles:i.LineStudyPlotStyle.Circles,line_with_breaks:i.LineStudyPlotStyle.LineWithBreaks,area_with_breaks:i.LineStudyPlotStyle.AreaWithBreaks};t.applyPlotProperty=function(t,r,s,a,u){if(void 0===r.styles)return void o.logWarn("Study does not have styles");const l=a[0];if("color"===l){return void function(t,e,r,i,s){if(void 0!==t.styles)if(null===e&&!isNaN(i)&&i>0)o.logWarn("Study plot does not have color #"+i);else{if(0===i||isNaN(i)){(0,n.ensureDefined)(t.styles[r]).color=String(s),i=0}null!==e&&((0,n.ensureDefined)(e.colors[i]).color=String(s))}else o.logWarn("Study does not have styles")}(r,function(t,e,r){if(void 0===t.plots)return null;for(const n of t.plots){if(!(0,i.isColorerPlot)(n)||void 0===e.palettes)continue;const t=e.palettes[n.palette];if(n.target===r&&void 0!==t)return t}return null}(t,r,s),s,a.length>1?parseInt(a[1]):NaN,u)}const p=r.styles[s];if(void 0!==p&&p.hasOwnProperty(l)){if("plottype"===l){const t=e[String(u)];if(void 0===t)return void o.logWarn("Unsupported plot type for plot: "+u);u=t}p[l]=u}else o.logWarn(`Study plot does not have property '${l}'`)},t.applyBandProperty=function(t,r,n,i){if(void 0===t.bands)return void o.logWarn("Study does not have bands");const s=t.bands[r];if(void 0!==s&&s.hasOwnProperty(n)){if("plottype"===n){const t=e[String(i)];if(void 0===t)return void o.logWarn("Unsupported plot type for band: "+i);i=t}s[n]=i}else o.logWarn(`Study band does not have property '${n}'`)},t.applyFilledAreaProperty=function(t,e,r,n){if(void 0===t.filledAreasStyle)return void o.logWarn("Study does not have areas");const i=t.filledAreasStyle[e];void 0!==i&&i.hasOwnProperty(r)?i[r]=n:o.logWarn(`Study area does not have property '${r}'`)},t.applyInputValue=function(t,e,r){void 0!==t.inputs&&t.inputs.hasOwnProperty(e)?t.inputs[e]=r:o.logWarn(`Study does not have input '${e}'`)},t.setRootProperty=function(t,e,r){if(0===e.length)return;let n=t;for(const t of e.slice(0,-1)){if(null==n||!n.hasOwnProperty(t))break;n=n[t]}const i=e[e.length-1];null!=n&&n.hasOwnProperty(i)?n[i]=r:o.logWarn("Study does not have property "+e.join("."))}}(s||(s={})),function(t){t.getInputByName=function(t,e){if(void 0===t.inputs)return null;e=e.toLowerCase();for(const r of t.inputs)if(r.name.toLowerCase()===e)return r.id;return null},t.getPlotIdByTitle=function(t,e){if(void 0===t.styles)return null;e=e.toLowerCase();for(const r in t.styles){const n=t.styles[r]
;if((void 0!==n&&void 0!==n.title?n.title:r).toLowerCase()===e)return r}return null},t.getFilledAreaIdByTitle=function(t,e){if(void 0===t.filledAreas)return null;e=e.toLowerCase();for(const r of t.filledAreas)if(r.title.toLowerCase()===e)return r.id;return null},t.getBandIndexByName=function(t,e){if(void 0===t.bands)return null;e=e.toLowerCase();for(let r=0;r<t.bands.length;++r)if(t.bands[r].name.toLowerCase()===e)return r;return null},t.getMetaInfoByDescription=function(t,e){e=e.toLowerCase();for(const r of t)if(r.description.toLowerCase()===e||r.shortDescription.toLowerCase()===e)return r;return null}}(a||(a={}))},70112:(t,e,r)=>{var n=r(13652).Version,i=r(11905).getLogger("Chart.StudyMigration");function o(t){this._studyId=t,this._maxToVers=n.ZERO,this._maxFromVers=n.ZERO,this._migrs=[]}o.prototype.addMigration=function(t,e,r){var i=n.parse(t),o=n.parse(e);i.isGreater(this._maxFromVers)&&(this._maxFromVers=i),o.isGreater(this._maxToVers)&&(this._maxToVers=o),this._migrs.push({fromVers:i,toVers:o,rules:r})},o.prototype.updateInputs=function(t,e,r){if(!r)return r;for(var n=TradingView.clone(r),o=t;o.isLess(e);){var s=this._findMigration(o);if(null==s)break;if(i.logNormal("Migrating study inputs from "+s.fromVers+" to "+s.toVers+" version, studyId: "+this._studyId+", migration: "+JSON.stringify(s)+", inputs: "+JSON.stringify(r)),n=this._applyMigration(n,s),!o.isLess(s.toVers))throw new Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");o=s.toVers}return o>t&&i.logNormal("Study inputs migration is done, studyId: "+this._studyId+", inputs: "+JSON.stringify(n)),n},o.prototype._findMigration=function(t){for(var e=-1,r=this._maxFromVers,n=0;n<this._migrs.length;n++){var i=this._migrs[n];i.fromVers.isLess(t)||i.fromVers.isLessOrEqual(r)&&(r=i.fromVers,e=n)}return e<0?null:this._migrs[e]},o.prototype._applyMigration=function(t,e){for(var r=t,n=0;n<e.rules.length;n++){var i=e.rules[n];r=this._getApplyRuleFun(i.type)(r,i)}return r},o.prototype._getApplyRuleFun=function(t){if("inputRemoved"===t)return o._applyInputRemovedRule;if("inputChangedType"===t)return o._applyInputChangedTypeRule;if("inputChangedMinMax"===t)return o._applyInputChangedMinMaxRule;if("inputChangedOptions"===t)return o._applyInputChangedOptionsRule;throw new Error("Unknown migration rule type: "+t)},o._applyInputRemovedRule=function(t,e){if(!(e.inputId in t))return t;if("removeVal"!==e.action)throw new Error("Unexpected rule.action="+e.action+" in rule.type="+e.type);var r=t[e.inputId];return delete t[e.inputId],i.logNormal("Input "+e.inputId+"="+r+" removed"),t},o._applyInputChangedTypeRule=function(t,e){var r=t[e.inputId];if("resetToDefVal"===e.action)return t[e.inputId]=e.defVal,i.logNormal("Input "+e.inputId+"="+r+" reset to default value "+e.defVal),t;if("convertVal"===e.action){if(null==r)return t;if("float"===e.inputTypeFrom&&"integer"===e.inputType)return t[e.inputId]=Math.round(t[e.inputId]),i.logNormal("Input "+e.inputId+"="+r+" converted to value "+t[e.inputId]),t
;if("integer"===e.inputTypeFrom&&"float"===e.inputType)return t;if("text"===e.inputTypeFrom&&"source"===e.inputType)return o._isValidSource(r,e.options)||(t[e.inputId]=e.defVal),t;throw new Error("Cannot convertVal from "+e.inputTypeFrom+" to "+e.inputType)}throw new Error("Unknown action "+e.action+" for rule with type "+e.type)},o._isValidSource=function(t,e){return t.indexOf("$")>=0||e.indexOf(t)>=0},o._applyInputChangedMinMaxRule=function(t,e){if("adjustValIfNeeded"!==e.action)throw new Error("Unknown action "+e.action+" for rule with type "+e.type);var r=t[e.inputId];return r<e.minVal?t[e.inputId]=e.minVal:r>e.maxVal&&(t[e.inputId]=e.maxVal),i.logNormal("Input "+e.inputId+"="+r+" adjusted to value "+t[e.inputId]),t},o._applyInputChangedOptionsRule=function(t,e){if(!(["text"].indexOf(e.inputType)>=0&&"resetToDefValIfNeeded"===e.action))throw new Error("Unexpected rule.inputType="+e.inputType+" in rule.action="+e.action);var r=t[e.inputId];return e.options.indexOf(r)<0&&(t[e.inputId]=e.defVal,i.logNormal("Input "+e.inputId+"="+r+" reset to default value "+e.defVal)),t},t.exports=o},10498:(t,e,r)=>{var n=r(88537).assert,i=r(69411).patchSourceState,o=r(66156),s=r(13652).Version,a=r(11905).getLogger("Chart.Study.Versioning"),u=r(66974),l=r(70028),p=r(71417).extractPineId,d=r(57118).migrateMetaInfoAndPropState;function c(t,e){if(!t)throw new Error("No studies metainfo");var n=r(70112);if(this._studiesMetainfo=t,!e)throw new Error("No studies migrations");this._studiesMigrations=e,this._migrations={};for(var i=0;i<this._studiesMigrations.length;i++)for(var o=this._studiesMigrations[i],s=o.versFrom,u=o.versTo,l=0;l<o.studyMigrations.length;l++){var p=o.studyMigrations[l],d=p.studyId;if(0!==p.rules.length){var c=d in this._migrations?this._migrations[d]:new n(d);c.addMigration(s,u,p.rules),this._migrations[d]=c}else a.logError("Study Migration should have at least one convertion rule")}this._clientMigrations=[function(t,e){if(0===this._studiesMetainfo.length||!t.isTVScript||t.version>=22)return e;for(var r={},n=0,i=0;;){var o=e[i];if(void 0===o)break;var s=e[o.id];o.isFake&&(o.id="in_"+n++),r[i]=o,r[o.id]=s,i++}return r}]}c.prototype.updateMetaInfo=function(t){if(!t)return t;n(!t.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync");for(var e=null,r=this._studiesMetainfo,i=0;i<r.length;i++)if(r[i].id===t.id){e=r[i];break}return TradingView.clone(e)},c.prototype.updateMetaInfoAsync=function(t){if(!t)return{sync:!1,result:Promise.reject("No old metaInfo was given")};var e=new l(t),r=l.versionOf(t);if(t.isTVScript&&!t.pine&&r<l.VERSION_PINE_PROTECT_TV_4164){n(TradingView.isExistent(t.scriptIdPart),"scriptIdPart is missing, study "+JSON.stringify(t));var i=t.scriptIdPart;return{sync:!1,result:new Promise((function(r,n){o.processLegacy(i,t.TVScriptSourceCode).done((function(t){e.removeDefaults();var n=new l(t);n.createDefaults(),d(n),r(n)})).fail((function(t,e){n(t)}))}))}}
if(t.isTVScript&&t.pine)return(t._serverMetaInfoVersion||r)<l.CURRENT_METAINFO_FORMAT_VERSION?{sync:!1,result:new Promise((function(r,n){o.translateScriptAsync2(t.scriptIdPart,t.pine.version).done((function(t){e.removeDefaults();var n=new l(t);n.createDefaults(),d(n),r(n)})).fail((function(t,e){n(t)}))}))}:(e.createDefaults(),{sync:!0,result:e});for(var s=null,a=this._studiesMetainfo,u=0;u<a.length;u++)if(a[u].id===t.id){s=a[u];break}return{sync:!0,result:s?TradingView.clone(s):null}},c.prototype.lastVersionOfStudy=function(t){return this._studiesMetainfo.find((function(e){return e.id===t})).version},c.prototype.updateStudyInputs=function(t,e,r,n,i){var o=TradingView.clone(n);if(t in this._migrations){var u,l=s.parse(e);if("last"===r){var p=this.lastVersionOfStudy(t);u=s.parse(p)}else u=s.parse(r);o=this._migrations[t].updateInputs(l,u,o)}if(null==i)return o;for(var d in i)d in o||(o[d]=i[d]);for(var d in o)if(!(d in i)){var c=o[d];a.logWarn("Extra input detected, studyId="+t+", versionFrom="+e+", inputId="+d+", inputValue="+c+", removing it and continue..."),delete o[d]}return o},c.prototype.updateStudyState=function(t,e,r){if(null==t||null==e||null==r)return t;if(t=TradingView.clone(t),!(e.isTVScript||!!e.pine)&&e.version!==r.version){var n=r&&r.defaults.inputs,i=this.updateStudyInputs(e.id,e.version,r.version,t.inputs,n);t.inputs=i}for(var o=0;o<this._clientMigrations.length;++o){i=this._clientMigrations[o].call(this,e,t.inputs);Object.keys(i).length===Object.keys(t.inputs).length?t.inputs=i:a.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...")}var s=l.versionOf(e);if(e.isTVScript&&e.TVScriptSourceCode&&s>=12&&s<=26){var u={};for(o=0;o<e.plots.length;++o){var p=e.plots[o],d=r.plots[o];u[p.id]=d.id}var c=Object.keys(t.styles);for(o=0;o<c.length;++o){var f=c[o],h=t.styles[f];delete t.styles[f];var g=u[f];t.styles[g]=h}var v=Object.keys(t.plots);for(o=0;o<v.length;++o){var y=v[o];f=t.plots[y].id;t.plots[y].id=u[f]}}return t},c.prototype.patchPointsBasedStudyState=function(t){return c._fixInputsMaxValue(t.state,t.metaInfo),"LineToolRegressionTrend"===t.type&&(t=i(t)),t},c.prototype.patchPointsBasedStudyData=function(t,e){if(!u.isProd())return e;if(!t||!e)return e;var r=TradingView.clone(e);return"VbPFixed@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&c._patchOldVolumeProfiles(0,r),r},c.prototype.patchStudyData=function(t,e,r,n){if(!u.isProd())return{data:e,nsData:r,indexes:n};var i=TradingView.clone(e),o=TradingView.clone(r),s=TradingView.clone(n);"VbPVisible@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&c._patchOldVolumeProfiles(0,i.graphics),"VbPSessions@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&c._patchOldVolumeProfiles(0,i.graphics);var a=l.versionOf(t);if(t.isTVScript&&t.TVScriptSourceCode&&a>=12&&a<=26){var p=i.columns;i.columns=[];for(var d=0;d<p.length;++d){var f="plot_"+d;i.columns.push(f)}}return{data:i,nsData:o,indexes:s}},c._patchOldVolumeProfiles=function(t,e){var r=e.hhists[t].data,n=[];for(var i in r)n=n.concat(r[i]);e.hhists[0].data=n},
c._fixInputsOrder=function(t,e){for(var r=l.getOrderedInputIds(e),n=c.splitInputs(t.inputs),i=n.arr,o=n.obj,s=TradingView.merge({},o),a=0;a<r.length;++a){var u=r[a],p=c.findInputKeyById(i,u);if(null!==p){var d=i[p];s[a]=d}}t.inputs=s},c.INPUT_MAX_VALUE=1e12,c._verifyInputsMaxValue=function(t){var e=c.INPUT_MAX_VALUE;if(t.inputs)for(var r=0;r<t.inputs.length;r++){var n=t.inputs[r];"integer"===n.type&&(n.max&&n.max>e&&a.logWarn("Bad integer input max value in metaInfo id="+t.id+" title="+t.description))}},c._fixInputsMaxValue=function(t,e){if(!TradingView.isAbsent(e)){var r=c.INPUT_MAX_VALUE;if(e.inputs)for(var n=0;n<e.inputs.length;n++){"integer"===(a=e.inputs[n]).type&&(a.max&&a.max>r&&(a.max=r))}if(t&&t.inputs){var i=c.splitInputs(t.inputs),o=i.arr;for(var s in o){var a;"integer"===(a=o[s]).type&&(a.max&&a.max>r&&(a.max=r))}t.inputs=TradingView.merge(i.obj,i.arr)}}},c.prototype.patchPropsStateAndMetaInfo=function(t,e,r){"Script$BOOKER"!==e.productId||e.alerts||delete t.alerts,c._fixInputsOrder(t,e),c._fixInputsMaxValue(t,e);var n=c.splitInputs(t.inputs);t.inputs=n.obj;var i=l.versionOf(e);i<l.METAINFO_FORMAT_VERSION_SOS_V2&&e.isChildStudy&&(t.isChildStudy=e.isChildStudy);if(e.isTVScript&&e.version<60&&("Script$TV_EARNINGS@tv-scripting"!==e.id&&"Script$TV_DIVIDENDS@tv-scripting"!==e.id&&"Script$TV_SPLITS@tv-scripting"!==e.id||delete e.TVScriptSourceCode),"Volume"!==e.id&&"Volume@tv-basicstudies"!==e.id||0!==e.inputs.length||(e.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],e.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===e.id&&e.version&&e.version<=46&&void 0===t.styles.vol.transparency&&(t.styles.vol.transparency=t.transparency||87),"PivotPointsStandard@tv-basicstudies"===e.id&&(0===e.inputs.length?(t.inputs={kind:"Traditional",showHistoricalPivots:!0},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===e.inputs.length&&(t.inputs={kind:"Traditional"},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===t._hardCodedDefaultsVersion)){t._hardCodedDefaultsVersion=1;var o=t.color;delete t.color,t.levelsStyle={colors:{P:o,"S1/R1":o,"S2/R2":o,"S3/R3":o,"S4/R4":o,"S5/R5":o}}}"CMF"===e.shortId&&2===e.inputs.length&&(t.inputs={length:t.inputs["length fast"]},e.inputs=e.inputs.splice(0,1),e.inputs[0].id="length"),e.defaults&&void 0===e.defaults.precision&&i<l.VERSION_NEW_STUDY_PRECISION_FORMAT&&(-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(e.id)?e.defaults.precision=0:e.defaults.precision=4);if(e.version<60)for(var s=["TV_DIVIDENDS","TV_SPLITS","TV_EARNINGS"],a="Script".length,u=0;u<s.length;u++)e.id.startsWith("Script$"+s[u]+"@tv-scripting")&&(e.fullId="ESD"+e.fullId.substring(a),e.id="ESD"+e.id.substring(a),e.name="ESD"+e.name.substring(a),
e.shortId="ESD"+e.shortId.substring(a),e.productId="ESD"+e.productId.substring(a));var f={"ESD$TV_EARNINGS@tv-scripting":{fullId:"Earnings@tv-basicstudies-129!",id:"Earnings@tv-basicstudies",name:"Earnings@tv-basicstudies",shortId:"Earnings",productId:"tv-basicstudies"},"ESD$TV_SPLITS@tv-scripting":{fullId:"Splits@tv-basicstudies-129!",id:"Splits@tv-basicstudies",name:"Splits@tv-basicstudies",shortId:"Splits",productId:"tv-basicstudies"},"ESD$TV_DIVIDENDS@tv-scripting":{fullId:"Dividends@tv-basicstudies-129!",id:"Dividends@tv-basicstudies",name:"Dividends@tv-basicstudies",shortId:"Dividends",productId:"tv-basicstudies"}};if(e.id in f&&Object.assign(e,f[e.id]),i<l.VERSION_PINE_PROTECT_TV_4164){var h={"StrategyScript$STD;Consecutive%1Ups/Downs%1Strategy":{pineId:"STD;Consecutive%1Ups%1Downs%1Strategy",className:"StrategyScript"},Script$EDGR_NET_INCOME_FROM_CONTINUING_OPERATIONS_APPLICABLE_TO_COMMON_V2:{pineId:"Script$EDGR_NET_INCOME_FROM_CONTINUING_OPS_APPLICABLE_TO_COMMON_V2",className:"Script"}};if(e.shortId in h){var g=h[e.shortId].className+"$"+h[e.shortId].pineId,v={scriptIdPart:h[e.shortId].pineId,fullId:e.fullId.replace(e.shortId,g),id:e.id.replace(e.shortId,g),name:e.name.replace(e.shortId,g),shortId:g};TradingView.merge(e,v),TradingView.merge(t,v)}var y=p(e.fullId),m=y&&y.match(/^(USER)(_\d+)(;)(.*)$/);if(m){var S=m[0],_=m[1]+m[3]+m[2]+m[4];v={scriptIdPart:_,fullId:e.fullId.replace(S,_),id:e.id.replace(S,_),name:e.name.replace(S,_),shortId:e.shortId.replace(S,_)};TradingView.merge(e,v),TradingView.merge(t,v)}}if("MA"===e.id){var I=new l({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),b=new l({id:"MASimple",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),T=new l({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),P=new l({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}});switch(t.inputs.type){case"exp":e=I;break;case"simple":e=b;break;case"weighted":e=P;break;case"volume weighted":e=T}t.styles[e.plots[0].id]=t.styles.MovAvg,delete t.styles.MovAvg,delete t.inputs.type}return r.oldShowStudyLastValueProperty&&(t.oldShowLastValue=t.showLastValue),delete t.showLastValue,delete t.showStudyArguments,d(e,t),{propsState:t,metaInfo:e}},
c.mergeInputs=function(t,e){c.mergeInputsArrPart(t,e),c.mergeInputsObjPart(t,e)},c.mergeInputsArrPart=function(t,e){var r=c.splitInputs(e);for(var n in r.arr){var i=c.findInputKeyById(t,r.arr[n].id);i?TradingView.merge(t[i],r.arr[n]):c.appendInputInfoToArr(t,r.arr[n])}},c.mergeInputsObjPart=function(t,e){var r=c.splitInputs(e);TradingView.merge(t,r.obj)},c.appendInputInfoToArr=function(t,e){var r=-1;for(var n in t){var i=parseInt(n,10);isNumber(i)&&(i>r&&(r=i))}t[r+1]=e},c.splitInputs=function(t){var e={},r={};for(var n in t)isNumber(parseInt(n,10))?e[n]=t[n]:r[n]=t[n];return{arr:e,obj:r}},c.findInputKeyById=function(t,e){var r=null;for(var n in t)if(isNumber(parseInt(n,10))&&t[n].id===e){r=n;break}return r},c.getInputKeyById=function(t,e){var r=c.findInputKeyById(t,e);if(!r)throw new Error("Cannot find input with id: "+e);return r},t.exports=c},73547:(t,e,r)=>{r.d(e,{translatedIntervalString:()=>i});r(87236);var n=r(64019);function i(t){const e=(0,n.getTranslatedResolutionModel)(t,!0);return null===e?t:e.multiplier+(e.mayOmitShortKind?"":e.shortKind)}},70028:(t,e,r)=>{t=r.nmd(t);var n=r(32567),i=r(11905).getLogger("Chart.Study.MetaInfo"),o=r(94930).applyOverridesToStudyDefaults,s=r(20533).PineKind,a={};function u(t){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,t);var e=t.fullId||t.id;TradingView.merge(this,u.parseIdString(e))}u.VERSION_STUDY_ARG_SOURCE=41,u.METAINFO_FORMAT_VERSION_SOS_V2=42,u.VERSION_PINE_PROTECT_TV_4164=43,u.CURRENT_METAINFO_FORMAT_VERSION=52,u.VERSION_NEW_STUDY_PRECISION_FORMAT=46,u.CHILD_STUDY_ALLOWED_PLOT_TYPES=["line"],u.canPlotBeSourceOfChildStudy=function(t){return u.CHILD_STUDY_ALLOWED_PLOT_TYPES.includes(t)},u.CHILD_STUDY_EXCLUDE_IDS=["CorrelationCoefficient@tv-basicstudies","Correlation - Log@tv-basicstudies-1"],u.CHILD_STUDY_PARENT_EXCLUDE_IDS=[],u.FilledArea={},u.FilledArea.TYPE_PLOTS="plot_plot",u.FilledArea.TYPE_HLINES="hline_hline",u.versionOf=function(t){var e="_metainfoVersion"in t&&isNumber(t._metainfoVersion)?t._metainfoVersion:0;return e<0&&i.logError("Metainfo format version cannot be negative: "+e),e},u.parseIdString=function(t){var e={};if(-1===t.indexOf("@"))e.shortId=t,e.packageId="tv-basicstudies",e.id=t+"@"+e.packageId,e.version=1;else{var r=t.split("@");e.shortId=r[0];var n=r[1].split("-");if(3===n.length)e.packageId=n.slice(0,2).join("-"),e.id=e.shortId+"@"+e.packageId,e.version=n[2];else if(1===n.length&&"decisionbar"===n[0])e.packageId="les-"+n[0],e.id=e.shortId+"@"+e.packageId,e.version=1;else{if(1!==n.length)throw new Error("unexpected study id:"+t);e.packageId="tv-"+n[0],e.id=e.shortId+"@"+e.packageId,e.version=1}}if(e.fullId=e.id+"-"+e.version,"tv-scripting"===e.packageId){var i=e.shortId;if(0===i.indexOf("Script$")||0===i.indexOf("StrategyScript$")){var o=i.indexOf("_");e.productId=o>=0?i.substring(0,o):e.packageId}else e.productId=e.packageId}else e.productId=e.packageId;return e},u.getPackageName=function(t){return(/^[^@]+@([^-]+-[^-]+)/.exec(t||"")||[0,"tv-basicstudies"])[1]},
u.cutDollarHash=function(t){var e=t.indexOf("$"),r=t.indexOf("@");return-1===e?t:t.substring(0,e)+(r>=0?t.substring(r):"")},u.hasUserIdSuffix=function(t){return/^USER;[\d\w]+;\d+$/.test(t)},u.isStandardPine=function(t){return/^(Strategy)?Script\$STD;.*@tv-scripting$/.test(t)},u.getSourceIdByInputs=function(t,e){if(!Array.isArray(t)||!e)return null;for(var r=0;r<t.length;++r){var n=t[r];if(u.isSourceInput(n)&&"string"==typeof e[n.id]){var i=e[n.id];return~i.indexOf("$")&&(i=i.split("$")[0]),i}}return null},u.getSourceInputIds=function(t){for(var e=[],r=t.inputs,n=0;n<r.length;++n){var i=r[n];u.isSourceInput(i)&&e.push(i.id)}return e},u.setChildStudyMetaInfoPropertiesSourceId=function(t,e,r){for(var i=0;i<t.inputs.length;++i){var o=t.inputs[i];if(u.isSourceInput(o)&&(r instanceof n&&r.inputs&&r.inputs[o.id])){var s=r.inputs[o.id].value();if(s.indexOf("$")>0){var a=s.replace(/^[^\$]+/,e);r.inputs[o.id].setValue(a)}}}},u.patchChildStudyMetaInfoState=function(t){t.state&&function t(e){if("object"==typeof e)for(var r in e)"string"==typeof e[r]&&/^[^\$]+\$\d+$/.test(e[r])?e[r]=e[r].replace(/^[^\$]+/,"{pid}"):t(e[r])}(t.state.inputs),t.state.isChildStudy=!0},u.getStudyIdWithLatestVersion=function(t){const e=u.cutDollarHash(t.id);let r=e;return e.indexOf("@tv-scripting")>=0?r+="-101!":r+="-"+t.version,r},u.prototype.parseValue=function(t,e){return"bool"===t?TradingView.parseBool(e):e},u.prototype.defaultInputs=function(){for(var t=[],e=0;e<this.inputs.length;e++)t.push(this.inputs[e].defval);return t},u.prototype.state=function(t){var e={};for(var r in this)this.hasOwnProperty(r)&&(e[r]=this[r],!0!==t&&"id"===r&&(e[r]+="-"+this.version));return e},u.prototype.symbolInputId=function(){var t=this.inputs.filter((function(t){return"symbol"===t.type}));return t.length>0?t[0].id:null},u.prototype.createDefaults=function(){if(this.defaults){var t=TradingView.clone(this.defaults);t.precision="default";var e=u.getStudyPropertyRootName(this);defaults.create(e,t)}},u.prototype.removeDefaults=function(){defaults.remove(u.getStudyPropertyRootName(this))},u.findStudyMetaInfoByDescription=function(t,e){if(t){for(var r=0;r<t.length;++r)if(t[r].description.toLowerCase()===e.toLowerCase())return t[r];throw new Error("unexpected study id:"+e)}throw new Error("There is no studies metainfo")},u.isParentSourceId=function(t){return"string"==typeof t&&/^[^\$]+\$\d+$/.test(t)},u.isSourceInput=function(t){return t.id&&(("source"===t.id||"src"===t.id)&&("text"===t.type||"source"===t.type)||"source"===t.type)},u.getChildSourceInputTitles=function(t,e,r){var n={};if(e.plots&&e.plots.length&&t.options&&t.options.length)for(var i,o,s,a=0;a<t.options.length;++a)o=(i=t.options[a])&&+i.split("$")[1],(s=isFinite(o)&&e.plots[o])&&~u.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(s.type)&&(n[i]=e.styles&&e.styles[s.id]&&e.styles[s.id].title||s.id,r&&(n[i]=r+": "+n[i]));return n};var l=new Map([["AnchoredVWAP@tv-basicstudies","linetoolanchoredvwap"],["RegressionTrend@tv-basicstudies","linetoolregressiontrend"]]);u.getStudyPropertyRootName=function(t){var e=l.get(t.id)
;if(void 0!==e)return e;var r="study_"+t.id;return t.pine&&t.pine.version&&(r+="_"+t.pine.version.replace(".","_")),r},u.getStudyPropertyRootNameById=function(t){var e=l.get(t);return void 0!==e?e:"study_"+t},u.overrideDefaults=function(t){0!==t.length&&o(a,t,(function(t){return TradingView.defaultProperties[u.getStudyPropertyRootName(t)]||null}))},u.mergeDefaultsOverrides=function(t){TradingView.merge(a,t)},u.isScriptStrategy=function(t){if(t.extra&&t.extra.kind)return t.extra.kind===s.Strategy;if(!0===t.isTVScriptStrategy)return!0;var e=t.TVScriptSourceCode||t.scriptSource;return!!e&&TVScript.isStrategy(e)},u.getOrderedInputIds=function(t){for(var e=[],r=t.inputs,n=0;n<r.length;++n){var i=r[n];e.push(i.id)}return e},u.canBeChild=function(t){if(t&&"string"==typeof t)return!0;if(!t||t.extra&&!u.isAllowedSourceInputsCount(t.extra.sourceInputsCount)||!0===t.canNotBeChild||!1===t.canBeChild||~u.CHILD_STUDY_EXCLUDE_IDS.indexOf(t.id))return!1;for(var e=t.inputs,r=0,n=0;n<e.length;++n)u.isSourceInput(e[n])&&++r;return u.isAllowedSourceInputsCount(r)},u.isAllowedSourceInputsCount=function(t){return 1===t},u.canHaveChildren=function(t){if(t){if(t.isTVScriptStrategy||t.TVScriptSourceCode&&TVScript.isStrategy(t.TVScriptSourceCode))return!1;if(t.id&&!~u.CHILD_STUDY_PARENT_EXCLUDE_IDS.indexOf(t.id)&&Array.isArray(t.plots))for(var e=0;e<t.plots.length;++e)if(~u.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(t.plots[e].type))return!0}return!1},TradingView.StudyMetaInfo=u,t&&t.exports&&(t.exports=u)},27641:(t,e,r)=>{var n;r.d(e,{Constants:()=>n}),function(t){t.DrawingIconColor="rgba( 170, 170, 170, 1)",t[t.NameLengthLimit=300]="NameLengthLimit"}(n||(n={}))},70369:(t,e,r)=>{var n;r.d(e,{DataSourceDangerReason:()=>n}),function(t){t.Spread="spread",t.PineRepainting="pine-repainting",t.CryptoCap="cryptocap"}(n||(n={}))},86189:(t,e,r)=>{var n=r(87236).t,i=r(96396).isStudyStateForAlertType,o=r(18458),s=r(2105).generateTitleForGui,a=r(11905).getLogger("Alerts.Band"),u=r(49473),l=r(43498);TradingView="object"==typeof r.g?r.g.TradingView:TradingView||{};var p={create:function(t){var e,r=t||{},n=r.type;if("MainSeries"===n)e=c;else if(i(n,!0))e=f;else if("Value"===n)e=h;else{if(!/^LineTool.*/i.test(n))return a.logError("Unknown alert band type "+n),null;e=g}return new e(r)}};function d(t){this._band=t||{}}function c(){d.apply(this,arguments)}function f(){d.apply(this,arguments)}function h(){d.apply(this,arguments)}function g(){d.apply(this,arguments)}d.prototype.id=function(){return this._band.id},d.prototype.type=function(){return this._band.type},d.prototype.title=function(){return this._band.title},d.prototype.hasPlots=function(){return this._band.plots&&this._band.plots.length},d.prototype.getActualSymbol=function(){return this._band.actualSymbol},d.prototype.getSymbolString=function(){return this._band.symbolString},d.prototype.getPlotTitle=function(t){
return t.title?t.title:o.isOhlcOpenPlot(t)?t.ohlcTitle+" "+n("Open"):o.isOhlcHighPlot(t)?t.ohlcTitle+" "+n("High"):o.isOhlcLowPlot(t)?t.ohlcTitle+" "+n("Low"):o.isOhlcClosePlot(t)?t.ohlcTitle+" "+n("Close"):"vol"===t.id?n("Volume"):"vol_ma"===t.id?n("Volume MA"):"open"===t.id?n("Open"):"high"===t.id?n("High"):"low"===t.id?n("Low"):"close"===t.id?n("Close"):t.id},d.prototype.getPlots=function(t){var e=t||{};if(!this._band.plots||!this._band.plots.length)return this._band.plots;if("inputSelect"===e.format){var r=-1;return this._band.plots.map((function(t){return{value:++r,title:this.getPlotTitle(t)}}),this)}return this._band.plots},d.prototype.hasUsualPlots=function(){var t=this._band.plots;return!t||t.filter(o.isAlertConditionPlot).length<t.length},d.prototype.getInputs=function(){return{}},inherit(c,d),c.prototype.title=function(t){var e=r(66437),n=t||{},i=!!n.withInterval,o=this._band.actualSymbol;return e&&(o=e.shortName(o)),s({symbol:o,interval:i?this._band.interval:null,style:this._band.style,inputs:this._band.styleInputs||{},boxSize:this._band.boxSize,reversalAmount:this._band.reversalAmount,sessionDescription:n.sessionDescription})},c.prototype.getInterval=function(){return this._band.interval},c.prototype.getStyle=function(){return this._band.style},c.prototype.getStyleInputs=function(){return this._band.styleInputs},c.prototype.isRangeBasedStyle=function(){return u.isRangeBasedStyle(this._band.style)},c.prototype.isSpread=function(){return this._band.isSpread},c.prototype.sessionId=function(){return this._band.sessionId},c.prototype.sessionDescription=function(){return this._band.sessionDescription},c.prototype.getDividendsAdjustment=function(){return this._band.dividendsAdjustment},c.prototype.getBackAdjustment=function(){return this._band.backAdjustment},c.prototype.getSettlementAsClose=function(){return this._band.settlementAsClose},inherit(f,d),f.prototype.title=function(t){var e,r,i,o=t||{},s=o.withPlotTitle,a=this._band;return o.short&&a.shortTitle?e=a.shortTitle:a.title?e=a.title:(e=a.shortDescription||"Study",r=[],Object.keys(a.inputs).forEach((function(t){var e=a.inputs[t]&&a.inputs[t].id;e&&!a.inputs[t].isHidden&&void 0!==a.inputs[e]&&r.push(a.inputs[e])})),r.length&&(e+=" ("+r.join(", ")+")")),s&&(i=this.selectedPlot())&&(e+=" "+(i.title||n("Untitled Plot"))),l.isRtl()&&(e=l.forceLTRStr(e)),e},f.prototype.selectedPlot=function(){var t=this._band;return void 0===t.plotIndex?null:this.getPlots().filter((function(e){return e.value===t.plotIndex}))[0]||null},f.prototype.getInputs=function(){return this._band.inputs||{}},f.prototype.isTVLibrary=function(){return this._band.isTVLibrary||!1},inherit(h,d),h.prototype.title=function(t){var e=this._band.value||0;return t.formatter?t.formatter.format(parseFloat(e)):parseFloat(e).toString()},inherit(g,d),t.exports.AlertBandAbstract=d,t.exports.AlertBandValue=h,t.exports.AlertBandStudy=f,t.exports.alertBandFactory=p},96396:(t,e,r)=>{var n;function i(t,e){let r="Study"===t||t===n.StudyLineTool||/^study_\w+/.test(t);return e&&(r=r||"StudyStrategy"===t),r}r.r(e),
r.d(e,{StateForAlertType:()=>n,isStudyStateForAlertType:()=>i}),function(t){t.StudyLineTool="StudyLineTool"}(n||(n={}))},90557:(t,e,r)=>{function n(t){let e,r=0;if(0===t.length)return r;for(var n=0;n<t.length;n++)e=t.charCodeAt(n),r=(r<<5)-r+e,r&=r;return r}r.r(e),r.d(e,{hash:()=>n})},71417:(t,e,r)=>{function n(t){return t===i(t)}function i(t){const e=t.indexOf("$"),r=t.indexOf("@");return e<0&&r>=0?null:t.substring(Math.max(e+1,0),r>=0?r:t.length)}function o(t){return t.startsWith("PUB;")}function s(t){return t.startsWith("USER;")}function a(t){return t.startsWith("STD;")}function u(t){return t.includes("Candlestick%1Pattern%1")}function l(t){return t.startsWith("EDGR_")}r.d(e,{isPineIdString:()=>n,extractPineId:()=>i,isPublishedPineId:()=>o,isCustomPineId:()=>s,isStandardPineId:()=>a,isCandleStickId:()=>u,isEdgrPineId:()=>l})}}]);